<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Obelisk DEX - Your Decentralized Post-Quantum Bank</title>
    <meta name="description" content="Self-custody decentralized exchange with post-quantum security. Your keys, your crypto, your bank.">

    <!-- Security Headers - Relaxed for functionality -->
    <meta http-equiv="Content-Security-Policy" content="default-src 'self' https: wss:; script-src 'self' 'unsafe-inline' 'unsafe-eval' https:; style-src 'self' 'unsafe-inline' https:; font-src 'self' https:; frame-src https:; img-src 'self' data: https:; connect-src 'self' https: wss:;">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&amp;family=JetBrains+Mono:wght@400;500&amp;display=swap" rel="stylesheet">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/dompurify/3.0.6/purify.min.js" integrity="sha512-H+rglffZ6f5gMl/Qg8OOOOseG+LRxZuLPsqzVXxNh+VLrFOBk6RpDTX3SQs7rMPcQri/9k+I1XQe6HpE+8gkJw==" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="css/main.css?v=20260116">
    <link rel="stylesheet" href="css/forerunner.css">
    <link rel="stylesheet" href="css/banking.css">
    <link rel="stylesheet" href="css/tools.css">
    <link rel="stylesheet" href="css/professional.css">
    <link rel="stylesheet" href="css/polish.css">
    <link rel="stylesheet" href="css/academy.css">
    <link rel="stylesheet" href="css/shaders.css">
    <link rel="stylesheet" href="css/micro-interactions.css">
    <link rel="icon" type="image/svg+xml" href="assets/obelisk-icon.svg">

    <!-- Accessibility: Focus styles for keyboard navigation -->
    <style>
        a:focus, button:focus, input:focus, select:focus, textarea:focus,
        [tabindex]:focus, [role="button"]:focus, [role="menuitem"]:focus {
            outline: 2px solid #00ff88;
            outline-offset: 2px;
        }
        a:focus:not(:focus-visible), button:focus:not(:focus-visible),
        input:focus:not(:focus-visible), select:focus:not(:focus-visible),
        textarea:focus:not(:focus-visible), [tabindex]:focus:not(:focus-visible) {
            outline: none;
        }
        a:focus-visible, button:focus-visible, input:focus-visible,
        select:focus-visible, textarea:focus-visible, [tabindex]:focus-visible,
        [role="button"]:focus-visible, [role="menuitem"]:focus-visible {
            outline: 2px solid #00ff88;
            outline-offset: 2px;
        }
        .skip-link {
            position: absolute;
            top: -100px;
            left: 50%;
            transform: translateX(-50%);
            background: #00ff88;
            color: #0a0a0f;
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: 700;
            z-index: 9999;
            transition: top 0.3s;
            text-decoration: none;
        }
        .skip-link:focus { top: 10px; }

        /* DEMO MODE STYLES */
        .demo-badge {
            background: linear-gradient(135deg, #ff6b35, #f7931a);
            color: #fff;
            font-size: 10px;
            font-weight: 700;
            padding: 3px 8px;
            border-radius: 4px;
            margin-left: 8px;
            text-transform: uppercase;
            letter-spacing: 1px;
            animation: demo-pulse 2s ease-in-out infinite;
        }
        @keyframes demo-pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        .demo-banner {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: linear-gradient(90deg, #ff6b35, #f7931a, #ff6b35);
            background-size: 200% 100%;
            animation: demo-gradient 3s ease infinite;
            color: #fff;
            z-index: 10000;
            padding: 10px 20px;
            font-size: 14px;
        }
        @keyframes demo-gradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        .demo-banner-content {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            max-width: 1200px;
            margin: 0 auto;
        }
        .demo-banner-icon { font-size: 18px; }
        .demo-banner-text { flex: 1; text-align: center; }
        .demo-banner-text a { color: #fff; text-decoration: underline; margin-left: 8px; }
        .demo-banner-close {
            background: rgba(255,255,255,0.2);
            border: none;
            color: #fff;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 16px;
            line-height: 1;
        }
        .demo-banner-close:hover { background: rgba(255,255,255,0.3); }
        body.has-demo-banner { padding-top: 44px; }

        /* Disabled buttons in DEMO mode */
        .demo-disabled {
            opacity: 0.5 !important;
            cursor: not-allowed !important;
            pointer-events: none !important;
        }
        .demo-disabled::after {
            content: " (DEMO)";
            font-size: 10px;
            color: #f7931a;
        }

        /* Product Guide Styles */
        .product-guide {
            background: rgba(5, 10, 20, 0.95);
            border: 1px solid rgba(0, 255, 136, 0.3);
            border-radius: 16px;
            margin-bottom: 24px;
            overflow: hidden;
            backdrop-filter: blur(10px);
        }
        .product-guide-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px 20px;
            cursor: pointer;
            transition: background 0.3s;
            background: rgba(0, 255, 136, 0.08);
        }
        .product-guide-header:hover {
            background: rgba(0, 255, 136, 0.15);
        }
        .product-guide-title {
            display: flex;
            align-items: center;
            gap: 12px;
            font-weight: 600;
            color: #00ff88;
        }
        .product-guide-title .icon {
            font-size: 20px;
        }
        .product-guide-toggle {
            color: #00ff88;
            transition: transform 0.3s;
        }
        .product-guide.expanded .product-guide-toggle {
            transform: rotate(180deg);
        }
        .product-guide-content {
            display: none;
            padding: 0 20px 20px;
        }
        .product-guide.expanded .product-guide-content {
            display: block;
        }
        .guide-section {
            margin-bottom: 20px;
        }
        .guide-section:last-child {
            margin-bottom: 0;
        }
        .guide-section h4 {
            color: #00aaff;
            font-size: 14px;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .guide-section p, .guide-section li {
            color: #888899;
            font-size: 13px;
            line-height: 1.7;
        }
        .guide-section ul, .guide-section ol {
            margin-left: 20px;
            margin-top: 8px;
        }
        .guide-section li {
            margin-bottom: 6px;
        }
        .guide-steps {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        .guide-step {
            display: flex;
            gap: 12px;
            align-items: flex-start;
        }
        .step-number {
            background: linear-gradient(135deg, #00ff88, #00aaff);
            color: #0a0a0f;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 12px;
            flex-shrink: 0;
        }
        .guide-warning {
            background: rgba(255, 170, 0, 0.1);
            border: 1px solid rgba(255, 170, 0, 0.3);
            border-radius: 8px;
            padding: 12px;
            display: flex;
            gap: 10px;
            align-items: flex-start;
        }
        .guide-warning .icon { font-size: 16px; }
        .guide-warning p { color: #ffaa00; margin: 0; }
    </style>

    <!-- CRITICAL: Force Learn and Settings tabs visibility -->
    <style>
        #tab-learn.active,
        #tab-settings.active {
            display: block !important;
            visibility: visible !important;
            opacity: 1 !important;
            min-height: 500px;
        }
        #tab-learn.active *,
        #tab-settings.active * {
            visibility: visible !important;
        }
        #tab-learn .learn-container,
        #tab-learn .learn-hero,
        #tab-learn .learn-grid,
        #tab-learn .learn-card,
        #tab-settings .settings-container,
        #tab-settings .settings-section {
            display: block !important;
            visibility: visible !important;
        }
        #tab-learn .learn-categories {
            display: flex !important;
            flex-wrap: wrap;
            gap: 10px;
        }
        #tab-learn .learn-grid {
            display: grid !important;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
        }
    </style>
</head>
<body class="obelisk-scanlines obelisk-crt">
    <!-- SHADER EFFECTS LAYER -->
    <div class="hex-overlay"></div>
    <div class="cyber-floor"></div>
    <div id="shader-particles"></div>

    <!-- Background Animation Canvas -->
    <canvas id="bg-animation-canvas" style="position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; z-index: 1; pointer-events: none;"></canvas>

    <!-- SIMPLE TAB FUNCTION - Uses IDs directly -->
    <script>
    window.showTab = function(name) {
        console.log('[showTab] Switching to:', name);

        // Close any existing overlay first
        var existingOverlays = document.querySelectorAll('[id^="tab-overlay-"]');
        existingOverlays.forEach(function(o) { o.remove(); });

        // For learn, settings, and about, use overlay approach (workaround for display issue)
        if (name === 'learn' || name === 'settings' || name === 'about') {
            var overlay = document.createElement('div');
            overlay.id = 'tab-overlay-' + name;
            overlay.style.cssText = 'position: fixed; top: 60px; left: 0; right: 0; bottom: 0; background: rgba(10, 10, 15, 0.92); backdrop-filter: blur(8px); -webkit-backdrop-filter: blur(8px); z-index: 9998; overflow-y: auto; padding: 20px 20px 40px 20px;';

            // Back button
            var backBtn = document.createElement('button');
            backBtn.innerHTML = '&larr; ' + (window.i18n ? window.i18n.t('back') : 'Back');
            backBtn.style.cssText = 'position: sticky; top: 0; left: 0; background: linear-gradient(135deg, #1a1a2e, #16213e); color: #00ff88; border: 1px solid rgba(0,255,136,0.3); padding: 12px 24px; border-radius: 8px; cursor: pointer; z-index: 9999; font-size: 14px; font-weight: 600; margin-bottom: 20px; transition: all 0.3s;';
            backBtn.onmouseover = function() { this.style.background = 'linear-gradient(135deg, #00ff88, #00aaff)'; this.style.color = '#0a0a0f'; };
            backBtn.onmouseout = function() { this.style.background = 'linear-gradient(135deg, #1a1a2e, #16213e)'; this.style.color = '#00ff88'; };
            backBtn.onclick = function() {
                overlay.remove();
                window.showTab('trade');
            };
            overlay.appendChild(backBtn);

            // Copy content from the original tab
            var originalTab = document.getElementById('tab-' + name);
            if (originalTab) {
                var content = document.createElement('div');
                content.innerHTML = originalTab.innerHTML;
                overlay.appendChild(content);

                // Attach event listeners for Learn tab buttons
                if (name === 'learn') {
                    content.querySelectorAll('.btn-start-course').forEach(function(btn) {
                        btn.onclick = function(e) {
                            var card = e.target.closest('.learn-card');
                            var courseId = card ? card.dataset.course : null;
                            if (courseId && typeof LearnModule !== 'undefined') {
                                LearnModule.openCourse(courseId);
                            } else {
                                alert('Course: ' + courseId + ' - Coming soon!');
                            }
                        };
                    });
                }
            }

            document.body.appendChild(overlay);

            // IMPORTANT: Re-translate the overlay content for current language
            if (typeof I18n !== 'undefined' && I18n.translatePage) {
                I18n.translatePage();
            }

            // Update nav buttons
            document.querySelectorAll('[data-tab]').forEach(function(btn) {
                btn.classList.toggle('active', btn.dataset.tab === name);
            });
            return;
        }

        // List of all tab IDs - EXHAUSTIVE
        var tabIds = ['trade','swap','banking','bonds','tools','combos','wallet','investments','products','portfolio','settings','learn','academy','invest','about'];

        // Hide all tabs
        for (var i = 0; i < tabIds.length; i++) {
            var tab = document.getElementById('tab-' + tabIds[i]);
            if (tab) {
                tab.classList.remove('active');
                tab.style.cssText = 'display: none !important;';
            }
        }

        // Show target
        var target = document.getElementById('tab-' + name);
        if (target) {
            target.classList.add('active');
            target.style.cssText = 'display: block !important; visibility: visible !important; opacity: 1 !important;';
            var mainContent = document.getElementById('main-content');
            if (mainContent) mainContent.scrollTop = 0;
        } else {
            console.error('[showTab] TAB NOT FOUND:', name);
        }

        // Update nav buttons
        document.querySelectorAll('[data-tab]').forEach(function(btn) {
            btn.classList.toggle('active', btn.dataset.tab === name);
        });
    };
    </script>

    <!-- Accessibility: Skip to main content -->
    <a href="#main-content" class="skip-link">Skip to main content</a>

    <!-- FORERUNNER Background Effects -->
    <div class="forerunner-bg">
        <!-- Hexagonal Grid -->
        <div class="forerunner-grid"></div>

        <!-- Central Monumental Glow -->
        <div class="forerunner-central-glow"></div>

        <!-- Floating Energy Orbs -->
        <div class="forerunner-orb forerunner-orb-1"></div>
        <div class="forerunner-orb forerunner-orb-2"></div>
        <div class="forerunner-orb forerunner-orb-3"></div>
        <div class="forerunner-orb forerunner-orb-4"></div>

        <!-- Vertical Energy Pillars -->
        <div class="forerunner-pillar forerunner-pillar-1"></div>
        <div class="forerunner-pillar forerunner-pillar-2"></div>
        <div class="forerunner-pillar forerunner-pillar-3"></div>
        <div class="forerunner-pillar forerunner-pillar-4"></div>

        <!-- Horizontal Energy Lines -->
        <div class="forerunner-lines">
            <div class="forerunner-line forerunner-line-1"></div>
            <div class="forerunner-line forerunner-line-2"></div>
            <div class="forerunner-line forerunner-line-3"></div>
            <div class="forerunner-line forerunner-line-4"></div>
        </div>

        <!-- Floating Particles -->
        <div class="forerunner-particles" id="forerunner-particles"></div>

        <!-- Forerunner Glyphs -->
        <div class="forerunner-glyph glyph-1">&#x25C6;</div>
        <div class="forerunner-glyph glyph-2">&#x2726;</div>
        <div class="forerunner-glyph glyph-3">&#x2B22;</div>
        <div class="forerunner-glyph glyph-4">&#x2B21;</div>
    </div>

    <!-- NEBULA / AURORA Background -->
    <div class="nebula-container">
        <div class="nebula-cloud nebula-cloud-1"></div>
        <div class="nebula-cloud nebula-cloud-2"></div>
        <div class="nebula-cloud nebula-cloud-3"></div>
        <div class="nebula-cloud nebula-cloud-4"></div>
    </div>
    <div class="aurora-overlay"></div>

    <!-- TWINKLING STARS -->
    <div class="stars-container" id="stars-container">
        <!-- Stars generated by JS -->
        <div class="shooting-star" style="top: 10%; left: 20%;"></div>
        <div class="shooting-star" style="top: 30%; left: 60%; animation-delay: -2s;"></div>
        <div class="shooting-star" style="top: 50%; left: 40%; animation-delay: -3.5s;"></div>
    </div>

    <!-- ENERGY WAVES -->
    <div class="waves-container">
        <div class="energy-wave energy-wave-1"></div>
        <div class="energy-wave energy-wave-2"></div>
        <div class="energy-wave energy-wave-3"></div>
        <div class="energy-wave energy-wave-4"></div>
    </div>
    <div class="scan-wave"></div>

    <!-- GEOMETRIC PATTERNS -->
    <div class="geo-container">
        <div class="geo-hexagon geo-hexagon-1"></div>
        <div class="geo-hexagon geo-hexagon-2"></div>
        <div class="geo-triangle geo-triangle-1"></div>
        <div class="geo-triangle geo-triangle-2"></div>
        <div class="geo-triangle geo-triangle-3"></div>
        <div class="geo-ring geo-ring-1"></div>
        <div class="geo-ring geo-ring-2"></div>
        <div class="geo-diamond geo-diamond-1"></div>
        <div class="geo-diamond geo-diamond-2"></div>
        <div class="geo-diamond geo-diamond-3"></div>
    </div>

    <!-- Forerunner Top Energy Bar -->
    <div class="forerunner-top-bar"></div>

    <!-- EFFECTS CONTROL PANEL -->
    <div id="effects-panel" style="position:fixed;bottom:80px;left:20px;z-index:9998;background:linear-gradient(135deg,rgba(10,10,20,0.95),rgba(20,15,30,0.95));border:1px solid rgba(201,162,39,0.4);border-radius:12px;padding:0;min-width:220px;box-shadow:0 8px 32px rgba(0,0,0,0.5);font-size:13px;backdrop-filter:blur(10px);display:none;">
        <div id="effects-panel-header" style="display:flex;justify-content:space-between;align-items:center;padding:12px 16px;border-bottom:1px solid rgba(201,162,39,0.2);cursor:move;">
            <span style="color:#c9a227;font-weight:600;">‚ú® Effets visuels</span>
            <button onclick="document.getElementById('effects-panel').style.display='none'" style="background:none;border:none;color:#888;font-size:18px;cursor:pointer;padding:0;">&times;</button>
        </div>
        <div style="padding:12px 16px;max-height:400px;overflow-y:auto;">
            <!-- Forerunner -->
            <div style="margin-bottom:12px;">
                <div style="color:#888;font-size:10px;text-transform:uppercase;margin-bottom:8px;">Forerunner</div>
                <label style="display:flex;align-items:center;gap:10px;margin-bottom:6px;cursor:pointer;color:#e8e4d9;">
                    <input type="checkbox" checked onchange="toggleEffect('.forerunner-bg', this.checked)" style="accent-color:#c9a227;width:16px;height:16px;">
                    <span>Background complet</span>
                </label>
                <label style="display:flex;align-items:center;gap:10px;margin-bottom:6px;cursor:pointer;color:#e8e4d9;">
                    <input type="checkbox" checked onchange="toggleEffect('.forerunner-top-bar', this.checked)" style="accent-color:#c9a227;width:16px;height:16px;">
                    <span>Barre √©nergie top</span>
                </label>
                <label style="display:flex;align-items:center;gap:10px;margin-bottom:6px;cursor:pointer;color:#e8e4d9;">
                    <input type="checkbox" checked onchange="toggleEffect('.forerunner-corner', this.checked)" style="accent-color:#c9a227;width:16px;height:16px;">
                    <span>Coins d√©coratifs</span>
                </label>
            </div>
            <!-- CRT -->
            <div style="margin-bottom:12px;">
                <div style="color:#888;font-size:10px;text-transform:uppercase;margin-bottom:8px;">CRT / Scanlines</div>
                <label style="display:flex;align-items:center;gap:10px;margin-bottom:6px;cursor:pointer;color:#e8e4d9;">
                    <input type="checkbox" checked onchange="toggleBodyClass('obelisk-scanlines', this.checked)" style="accent-color:#00d4ff;width:16px;height:16px;">
                    <span>Scanlines</span>
                </label>
                <label style="display:flex;align-items:center;gap:10px;margin-bottom:6px;cursor:pointer;color:#e8e4d9;">
                    <input type="checkbox" checked onchange="toggleBodyClass('obelisk-crt', this.checked)" style="accent-color:#00d4ff;width:16px;height:16px;">
                    <span>Vignette CRT</span>
                </label>
            </div>
            <!-- Nebula -->
            <div style="margin-bottom:12px;">
                <div style="color:#888;font-size:10px;text-transform:uppercase;margin-bottom:8px;">Nebula / Aurora</div>
                <label style="display:flex;align-items:center;gap:10px;margin-bottom:6px;cursor:pointer;color:#e8e4d9;">
                    <input type="checkbox" checked onchange="toggleEffect('.nebula-container', this.checked)" style="accent-color:#8b5cf6;width:16px;height:16px;">
                    <span>Nuages nebuleux</span>
                </label>
                <label style="display:flex;align-items:center;gap:10px;margin-bottom:6px;cursor:pointer;color:#e8e4d9;">
                    <input type="checkbox" checked onchange="toggleEffect('.aurora-overlay', this.checked)" style="accent-color:#8b5cf6;width:16px;height:16px;">
                    <span>Aurora overlay</span>
                </label>
            </div>
            <!-- Stars -->
            <div style="margin-bottom:12px;">
                <div style="color:#888;font-size:10px;text-transform:uppercase;margin-bottom:8px;">√âtoiles</div>
                <label style="display:flex;align-items:center;gap:10px;margin-bottom:6px;cursor:pointer;color:#e8e4d9;">
                    <input type="checkbox" checked onchange="toggleEffect('.stars-container', this.checked)" style="accent-color:#fff;width:16px;height:16px;">
                    <span>√âtoiles scintillantes</span>
                </label>
                <label style="display:flex;align-items:center;gap:10px;margin-bottom:6px;cursor:pointer;color:#e8e4d9;">
                    <input type="checkbox" checked onchange="toggleEffect('.shooting-star', this.checked)" style="accent-color:#fff;width:16px;height:16px;">
                    <span>√âtoiles filantes</span>
                </label>
            </div>
            <!-- Waves -->
            <div style="margin-bottom:12px;">
                <div style="color:#888;font-size:10px;text-transform:uppercase;margin-bottom:8px;">Ondes / Waves</div>
                <label style="display:flex;align-items:center;gap:10px;margin-bottom:6px;cursor:pointer;color:#e8e4d9;">
                    <input type="checkbox" checked onchange="toggleEffect('.waves-container', this.checked)" style="accent-color:#00ff88;width:16px;height:16px;">
                    <span>Ondes radar</span>
                </label>
                <label style="display:flex;align-items:center;gap:10px;margin-bottom:6px;cursor:pointer;color:#e8e4d9;">
                    <input type="checkbox" checked onchange="toggleEffect('.scan-wave', this.checked)" style="accent-color:#00ff88;width:16px;height:16px;">
                    <span>Scan horizontal</span>
                </label>
            </div>
            <!-- Geometric -->
            <div style="margin-bottom:12px;">
                <div style="color:#888;font-size:10px;text-transform:uppercase;margin-bottom:8px;">G√©om√©trie</div>
                <label style="display:flex;align-items:center;gap:10px;margin-bottom:6px;cursor:pointer;color:#e8e4d9;">
                    <input type="checkbox" checked onchange="toggleEffect('.geo-container', this.checked)" style="accent-color:#f59e0b;width:16px;height:16px;">
                    <span>Tous les patterns</span>
                </label>
                <label style="display:flex;align-items:center;gap:10px;margin-bottom:6px;cursor:pointer;color:#e8e4d9;">
                    <input type="checkbox" checked onchange="toggleEffect('.geo-hexagon', this.checked)" style="accent-color:#f59e0b;width:16px;height:16px;">
                    <span>Hexagones</span>
                </label>
                <label style="display:flex;align-items:center;gap:10px;margin-bottom:6px;cursor:pointer;color:#e8e4d9;">
                    <input type="checkbox" checked onchange="toggleEffect('.geo-triangle', this.checked)" style="accent-color:#f59e0b;width:16px;height:16px;">
                    <span>Triangles</span>
                </label>
                <label style="display:flex;align-items:center;gap:10px;margin-bottom:6px;cursor:pointer;color:#e8e4d9;">
                    <input type="checkbox" checked onchange="toggleEffect('.geo-ring', this.checked)" style="accent-color:#f59e0b;width:16px;height:16px;">
                    <span>Anneaux</span>
                </label>
                <label style="display:flex;align-items:center;gap:10px;margin-bottom:6px;cursor:pointer;color:#e8e4d9;">
                    <input type="checkbox" checked onchange="toggleEffect('.geo-diamond', this.checked)" style="accent-color:#f59e0b;width:16px;height:16px;">
                    <span>Diamants</span>
                </label>
            </div>
            <!-- Actions -->
            <div style="display:flex;gap:8px;margin-top:16px;padding-top:12px;border-top:1px solid rgba(201,162,39,0.2);">
                <button onclick="setAllEffects(true)" style="flex:1;padding:8px;background:linear-gradient(135deg,#c9a227,#8b6914);border:none;border-radius:6px;color:#000;font-weight:600;cursor:pointer;font-size:11px;">Tout ON</button>
                <button onclick="setAllEffects(false)" style="flex:1;padding:8px;background:rgba(255,255,255,0.1);border:1px solid rgba(255,255,255,0.2);border-radius:6px;color:#888;font-weight:600;cursor:pointer;font-size:11px;">Tout OFF</button>
            </div>
        </div>
    </div>

    <!-- Toggle Button for Effects Panel -->
    <button id="effects-toggle-btn" onclick="document.getElementById('effects-panel').style.display = document.getElementById('effects-panel').style.display === 'none' ? 'block' : 'none'" style="position:fixed;bottom:20px;left:20px;z-index:9999;width:50px;height:50px;border-radius:50%;background:linear-gradient(135deg,#c9a227,#8b6914);border:2px solid rgba(201,162,39,0.6);color:#000;font-size:20px;cursor:pointer;box-shadow:0 4px 20px rgba(201,162,39,0.4);transition:transform 0.2s;" onmouseover="this.style.transform='scale(1.1)'" onmouseout="this.style.transform='scale(1)'">‚ú®</button>

    <script>
    // Effects Control Functions
    function toggleEffect(selector, show) {
        document.querySelectorAll(selector).forEach(el => {
            el.style.display = show ? '' : 'none';
        });
        saveEffectsState();
    }

    function toggleBodyClass(className, add) {
        if (add) {
            document.body.classList.add(className);
        } else {
            document.body.classList.remove(className);
        }
        saveEffectsState();
    }

    function setAllEffects(on) {
        const checkboxes = document.querySelectorAll('#effects-panel input[type="checkbox"]');
        checkboxes.forEach(cb => {
            cb.checked = on;
            cb.dispatchEvent(new Event('change'));
        });
    }

    function saveEffectsState() {
        const state = {};
        document.querySelectorAll('#effects-panel input[type="checkbox"]').forEach((cb, i) => {
            state['effect_' + i] = cb.checked;
        });
        localStorage.setItem('obelisk_effects', JSON.stringify(state));
    }

    function loadEffectsState() {
        const saved = localStorage.getItem('obelisk_effects');
        if (saved) {
            const state = JSON.parse(saved);
            document.querySelectorAll('#effects-panel input[type="checkbox"]').forEach((cb, i) => {
                if (state['effect_' + i] !== undefined) {
                    cb.checked = state['effect_' + i];
                    cb.dispatchEvent(new Event('change'));
                }
            });
        }
    }

    // Load saved state on page load
    document.addEventListener('DOMContentLoaded', loadEffectsState);
    </script>

    <!-- Corner Decorations -->
    <div class="forerunner-corner forerunner-corner-tl"></div>
    <div class="forerunner-corner forerunner-corner-tr"></div>
    <div class="forerunner-corner forerunner-corner-bl"></div>
    <div class="forerunner-corner forerunner-corner-br"></div>

    <!-- DEMO MODE BANNER -->
    <div class="demo-banner" id="demo-banner">
        <div class="demo-banner-content">
            <span class="demo-banner-icon">üß™</span>
            <span class="demo-banner-text">
                <strong>MODE DEMO</strong> - Les fonds sont simul√©s. Explorez librement sans risque.
                <a href="#" onclick="window.showDemoInfo(); return false;">En savoir plus</a>
            </span>
            <button type="button" class="demo-banner-close" onclick="document.getElementById('demo-banner').style.display='none'" aria-label="Fermer">&times;</button>
        </div>
    </div>

    <!-- Background Image Layer -->
    <div id="bg-image-layer"></div>

    <!-- App Container -->
    <div id="app">
        <!-- Header -->
        <header class="header">
            <h1 class="sr-only">Obelisk DEX - Trading Platform</h1>
            <div class="header-left">
                <div class="logo">
                    <svg class="logo-icon" viewBox="0 0 40 48" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <!-- Obelisk: tall column with pyramidion top -->
                        <!-- Pyramidion (pointed top) -->
                        <path d="M20 2L14 12h12L20 2z" fill="url(#obelisk-gradient)" />
                        <!-- Main column body -->
                        <rect x="14" y="12" width="12" height="32" fill="url(#obelisk-gradient)" />
                        <!-- Inner detail lines -->
                        <rect x="17" y="14" width="6" height="28" fill="#0a0a0f" opacity="0.3" />
                        <!-- Hieroglyph-like details -->
                        <rect x="16" y="18" width="8" height="2" fill="#0a0a0f" opacity="0.2" />
                        <rect x="16" y="24" width="8" height="2" fill="#0a0a0f" opacity="0.2" />
                        <rect x="16" y="30" width="8" height="2" fill="#0a0a0f" opacity="0.2" />
                        <rect x="16" y="36" width="8" height="2" fill="#0a0a0f" opacity="0.2" />
                        <!-- Base -->
                        <rect x="12" y="44" width="16" height="2" fill="url(#obelisk-gradient)" opacity="0.8" />
                        <defs>
                            <linearGradient id="obelisk-gradient" x1="20" y1="2" x2="20" y2="46" gradientUnits="userSpaceOnUse">
                                <stop stop-color="#00ff88" />
                                <stop offset="0.5" stop-color="#00aaff" />
                                <stop offset="1" stop-color="#8a2be2" />
                            </linearGradient>
                        </defs>
                    </svg>
                    <span class="logo-text">OBELISK</span>
                    <span class="logo-badge" data-i18n="logo_badge">Votre Propre Banque</span>
                    <span class="demo-badge">DEMO</span>
                </div>
                <button type="button" class="mobile-menu-btn" id="mobile-menu-btn" aria-label="Menu" aria-expanded="false">
                    <span class="hamburger-line"></span>
                    <span class="hamburger-line"></span>
                    <span class="hamburger-line"></span>
                </button>
                <div class="nav-container">
                    <nav class="nav-tabs">
                        <button type="button" class="nav-tab active" data-tab="dashboard" onclick="ObeliskApp.switchTab('dashboard')">üè† Home</button>
                        <button type="button" class="nav-tab" data-tab="trade" onclick="ObeliskApp.switchTab('trade')">üìà Trade</button>
                        <button type="button" class="nav-tab" data-tab="swap" onclick="ObeliskApp.switchTab('swap')">üîÑ Swap</button>
                        <button type="button" class="nav-tab highlight" data-tab="fast-trading" onclick="ObeliskApp.switchTab('fast-trading')">‚ö° Fast Trading</button>
                        <button type="button" class="nav-tab" data-tab="hft" onclick="ObeliskApp.switchTab('hft')">üöÄ HFT</button>
                        <button type="button" class="nav-tab" data-tab="perps" onclick="ObeliskApp.switchTab('perps')">üìâ Perps</button>
                        <button type="button" class="nav-tab" data-tab="banking" onclick="ObeliskApp.switchTab('banking')">üè¶ Banking</button>
                        <button type="button" class="nav-tab" data-tab="wallet" onclick="ObeliskApp.switchTab('wallet')">üëõ Wallet</button>
                        <button type="button" class="nav-tab" data-tab="portfolio" onclick="ObeliskApp.switchTab('portfolio')">üìä Portfolio</button>
                        <button type="button" class="nav-tab" data-tab="combos" onclick="ObeliskApp.switchTab('combos')">üéØ Combos</button>
                        <button type="button" class="nav-tab" data-tab="investments" onclick="ObeliskApp.switchTab('investments')">üí∞ Invest</button>
                        <button type="button" class="nav-tab" data-tab="products" onclick="ObeliskApp.switchTab('products')">üõí Products</button>
                        <button type="button" class="nav-tab" data-tab="bonds" onclick="ObeliskApp.switchTab('bonds')">üìú Bonds</button>
                        <button type="button" class="nav-tab" data-tab="tools" onclick="ObeliskApp.switchTab('tools')">üîß Tools</button>
                        <button type="button" class="nav-tab" data-tab="bots" onclick="ObeliskApp.switchTab('bots')">ü§ñ Bots</button>
                        <button type="button" class="nav-tab" data-tab="learn" onclick="ObeliskApp.switchTab('learn')">üìö Learn</button>
                        <button type="button" class="nav-tab" data-tab="about" onclick="ObeliskApp.switchTab('about')">üèõÔ∏è About</button>
                    </nav>
                </div>
            </div>
            <div class="header-right">
                <button type="button" class="btn-settings-nav" id="btn-settings-nav" data-tab="settings" title="Settings" onclick="window.showTab('settings')">‚öôÔ∏è</button>
                <select id="lang-select" class="lang-select" onchange="I18n.setLanguage(this.value)" style="background:#1a1a2e;color:#00ff88;border:1px solid rgba(0,255,136,0.3);padding:8px 12px;border-radius:8px;cursor:pointer;font-size:14px;">
                    <option value="en">üá¨üáß EN</option>
                    <option value="fr">üá´üá∑ FR</option>
                    <option value="es">üá™üá∏ ES</option>
                    <option value="de">üá©üá™ DE</option>
                    <option value="zh">üá®üá≥ ‰∏≠Êñá</option>
                    <option value="ja">üáØüáµ Êó•Êú¨Ë™û</option>
                    <option value="ko">üá∞üá∑ ÌïúÍµ≠Ïñ¥</option>
                </select>
                <div class="network-selector">
                    <span class="network-dot"></span>
                    <span id="network-name">Arbitrum</span>
                </div>
                <!-- Auth buttons -->
                <div class="auth-buttons">
                    <div class="auth-logged-out">
                        <button type="button" class="btn-login" id="btn-login" data-i18n="login">Login</button>
                    </div>
                    <div class="auth-logged-in" style="display:none;">
                        <span class="user-info">
                            <span id="user-display-name">User</span>
                        </span>
                        <button type="button" class="btn-logout" id="btn-logout" title="Logout">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/><polyline points="16 17 21 12 16 7"/><line x1="21" y1="12" x2="9" y2="12"/></svg>
                        </button>
                    </div>
                </div>
                <button type="button" class="btn-connect" id="btn-connect-wallet" onclick="WalletConnect.showModal()">
                    <svg class="btn-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>
                    <span data-i18n="connect_wallet">Connect Wallet</span>
                </button>
            </div>
        </header>

        <!-- Professional Hero Banner -->
        <div class="pro-hero" id="pro-hero">
            <div class="pro-stats">
                <div class="pro-stat">
                    <span class="pro-stat-value gold">$2.4B+</span>
                    <span class="pro-stat-label" data-i18n="volume_24h">Volume 24h <span style="font-size:10px;color:#888;">(demo)</span></span>
                </div>
                <div class="pro-stat">
                    <span class="pro-stat-value">150K+</span>
                    <span class="pro-stat-label" data-i18n="active_users">Utilisateurs <span style="font-size:10px;color:#888;">(demo)</span></span>
                </div>
                <div class="pro-stat">
                    <span class="pro-stat-value green" id="security-blocked-count">147K</span>
                    <span class="pro-stat-label" data-i18n="attacks_blocked">Attaques <span style="font-size:10px;color:#888;">(demo)</span></span>
                </div>
                <div class="pro-stat" title="Uptime = pourcentage de temps o√π le serveur est accessible. 99.99% = max 52 min d'indisponibilit√© par an. Calcul√© sur les 30 derniers jours.">
                    <span class="pro-stat-value">99.99%</span>
                    <span class="pro-stat-label" data-i18n="uptime">Uptime <span style="font-size:10px;color:#888;">(demo)</span></span>
                </div>
            </div>

            <div class="pro-trust">
                <div class="trust-badge security">
                    <span class="icon">üõ°Ô∏è</span>
                    <span data-i18n="post_quantum">Post-Quantum</span>
                </div>
                <div class="trust-badge">
                    <span class="icon">üîê</span>
                    <span data-i18n="audited">Audited</span>
                </div>
                <div class="trust-badge live">
                    <span class="icon">‚óè</span>
                    <span data-i18n="live_protection">Live Protection</span>
                </div>
            </div>

            <div class="client-selector">
                <button class="client-option active" data-i18n="retail" onclick="this.parentElement.querySelectorAll('.client-option').forEach(b=>b.classList.remove('active'));this.classList.add('active')">Retail</button>
                <button class="client-option" data-i18n="pro_tier" onclick="this.parentElement.querySelectorAll('.client-option').forEach(b=>b.classList.remove('active'));this.classList.add('active')">Pro</button>
                <button class="client-option" data-i18n="institutional" onclick="this.parentElement.querySelectorAll('.client-option').forEach(b=>b.classList.remove('active'));this.classList.add('active')">Institutional</button>
            </div>

            <div class="pro-actions">
                <button class="pro-btn pro-btn-primary" data-i18n="start_trading" onclick="ObeliskApp.switchTab('banking')">Start Trading</button>
                <button class="pro-btn pro-btn-secondary" data-i18n="learn_more" onclick="ObeliskApp.switchTab('learn')">Learn More</button>
            </div>
        </div>

        <!-- Live Market Ticker - Hidden (not unique, available elsewhere) -->
        <!-- <div class="pro-ticker" id="pro-ticker">...</div> -->

        <!-- Main Content -->
        <main class="main-content" id="main-content">
            <!-- Dashboard Tab -->
            <section class="tab-content active" id="tab-dashboard">
                <div style="padding:40px;text-align:center;color:var(--text-muted)">Chargement du tableau de bord...</div>
            </section>

            <!-- Trade Tab (Hyperliquid) -->
            <section class="tab-content" id="tab-trade">
                <div class="trade-layout">

                    <!-- Product Guide -->
                    <div class="product-guide" id="trade-guide">
                        <div class="product-guide-header" onclick="this.parentElement.classList.toggle('expanded')">
                            <div class="product-guide-title">
                                <span class="icon">üìö</span>
                                <span data-i18n="guide_trading_title">Perpetual Trading Guide</span>
                            </div>
                            <span class="product-guide-toggle">‚ñº</span>
                        </div>
                        <div class="product-guide-content">
                            <div class="guide-section">
                                <h4 data-i18n="guide_trading_what_title">What is Perpetual Trading?</h4>
                                <p data-i18n="guide_trading_what_desc">Perpetual contracts allow you to speculate on crypto prices without an expiration date. You can use leverage up to 100x to amplify your gains (and losses).</p>
                            </div>
                            <div class="guide-section">
                                <h4 data-i18n="guide_trading_how_title">How to Trade?</h4>
                                <div class="guide-steps">
                                    <div class="guide-step">
                                        <span class="step-number">1</span>
                                        <p data-i18n="guide_trading_step1">Deposit USDC via the Banking tab</p>
                                    </div>
                                    <div class="guide-step">
                                        <span class="step-number">2</span>
                                        <p data-i18n="guide_trading_step2">Select a pair (e.g., BTC-USD) on the chart</p>
                                    </div>
                                    <div class="guide-step">
                                        <span class="step-number">3</span>
                                        <p data-i18n="guide_trading_step3">Choose Long (bullish) or Short (bearish)</p>
                                    </div>
                                    <div class="guide-step">
                                        <span class="step-number">4</span>
                                        <p data-i18n="guide_trading_step4">Set your size, leverage, and Stop-Loss/Take-Profit orders</p>
                                    </div>
                                    <div class="guide-step">
                                        <span class="step-number">5</span>
                                        <p data-i18n="guide_trading_step5">Confirm the order and monitor your position</p>
                                    </div>
                                </div>
                            </div>
                            <div class="guide-section">
                                <h4 data-i18n="guide_trading_interface_title">Understanding the Interface</h4>
                                <ul>
                                    <li data-i18n="guide_trading_interface_chart"><strong>Chart:</strong> Analyze prices with candlesticks and technical indicators</li>
                                    <li data-i18n="guide_trading_interface_orderbook"><strong>Order Book:</strong> View supply and demand in real-time</li>
                                    <li data-i18n="guide_trading_interface_orderpanel"><strong>Order Panel:</strong> Place Market, Limit, or Stop orders</li>
                                    <li data-i18n="guide_trading_interface_positions"><strong>Positions:</strong> Manage your open positions and their P&amp;L</li>
                                </ul>
                            </div>
                            <div class="guide-warning">
                                <span class="icon">‚ö†Ô∏è</span>
                                <p data-i18n="guide_trading_warning">Leveraged trading carries high risks. You can lose more than your initial investment. Always use a Stop-Loss and never trade with money you cannot afford to lose.</p>
                            </div>
                        </div>
                    </div>


                    <!-- Chart Section -->
                    <div class="collapsible-panel" data-panel-id="panel-chart">
                        <div class="panel-header">
                            <div class="panel-title">
                                <span class="panel-title-icon">üìä</span>
                                <span data-i18n="chart">Chart</span>
                            </div>
                            <div class="panel-toggle"><span class="chevron">‚ñº</span></div>
                        </div>
                        <div class="panel-content">
                    <div class="chart-container">
                        <div class="chart-header">
                            <div class="pair-selector">
                                <span class="pair-name" id="current-pair">BTC-USD</span>
                                <span class="pair-price positive" id="current-price">$97,234.50</span>
                                <span class="pair-change positive" id="price-change">+2.34%</span>
                                <span class="pair-period">(24h)</span>
                            </div>
                            <div class="chart-controls">
                                <div class="chart-source-selector" style="display:flex !important; background:#8a2be2; padding:10px; border-radius:10px; gap:10px;">
                                    <button type="button" class="chart-src active" data-src="tradingview" onclick="switchChartSource('tradingview')" style="background:#000; color:#fff; padding:12px 24px; font-size:16px; font-weight:bold; border:3px solid #00ff88; border-radius:8px;" data-i18n="tradingview">TRADINGVIEW</button>
                                    <button type="button" class="chart-src" data-src="obelisk" onclick="switchChartSource('obelisk')" style="background:#000; color:#0f0; padding:12px 24px; font-size:16px; font-weight:bold; border:3px solid #00ff88; border-radius:8px;" data-i18n="obelisk_ms">OBELISK MS</button>
                                </div>
                                <div class="chart-tf-group" id="tf-tradingview">
                                    <button type="button" class="chart-tf active">1H</button>
                                    <button type="button" class="chart-tf">4H</button>
                                    <button type="button" class="chart-tf">1D</button>
                                    <button type="button" class="chart-tf">1W</button>
                                </div>
                                <div class="chart-tf-group" id="tf-obelisk" style="display:none;">
                                    <button type="button" class="chart-tf-ms active" onclick="switchObeliskMs(100)">0.1ms</button>
                                    <button type="button" class="chart-tf-ms" onclick="switchObeliskMs(1000)">1ms</button>
                                    <button type="button" class="chart-tf-ms" onclick="switchObeliskMs(10000)">10ms</button>
                                    <button type="button" class="chart-tf-ms" onclick="switchObeliskMs(100000)">100ms</button>
                                    <button type="button" class="chart-tf-ms" onclick="switchObeliskMs(1000000)">1s</button>
                                </div>
                            </div>
                        </div>
                        <div class="chart-area" id="trading-chart" style="min-height: 400px; height: 400px;">
                            <div class="chart-placeholder">
                                <span data-i18n="tradingview_chart">üîç TradingView Chart</span>
                                <span class="sub" data-i18n="chart_placeholder">Connect wallet to load</span>
                            </div>
                        </div>
                    </div>
                        </div>
                    </div>

                    <!-- Order Book -->
                    <div class="collapsible-panel" data-panel-id="panel-orderbook">
                        <div class="panel-header">
                            <div class="panel-title">
                                <span class="panel-title-icon">üìñ</span>
                                <span data-i18n="order_book">Order Book</span>
                            </div>
                            <div class="panel-toggle"><span class="chevron">‚ñº</span></div>
                        </div>
                        <div class="panel-content">
                    <div class="orderbook-container">
                        <div class="orderbook-header">
                            <span data-i18n="order_book">Order Book</span>
                            <div class="orderbook-toggle">
                                <button type="button" class="ob-btn active" data-i18n="both">Both</button>
                                <button type="button" class="ob-btn" data-i18n="bids">Bids</button>
                                <button type="button" class="ob-btn" data-i18n="asks">Asks</button>
                            </div>
                        </div>
                        <div class="orderbook-labels">
                            <span data-i18n="price">Price</span>
                            <span data-i18n="size">Size</span>
                            <span data-i18n="total">Total</span>
                        </div>
                        <div class="orderbook-asks" id="orderbook-asks">
                            <!-- Asks will be populated -->
                        </div>
                        <div class="orderbook-spread">
                            <span id="spread-value">Spread: $12.50 (0.01%)</span>
                        </div>
                        <div class="orderbook-bids" id="orderbook-bids">
                            <!-- Bids will be populated -->
                        </div>
                    </div>
                        </div>
                    </div>

                    <!-- Order Form -->
                    <div class="collapsible-panel" data-panel-id="panel-order">
                        <div class="panel-header">
                            <div class="panel-title">
                                <span class="panel-title-icon">üìù</span>
                                <span data-i18n="place_order">Place Order</span>
                            </div>
                            <div class="panel-toggle"><span class="chevron">‚ñº</span></div>
                        </div>
                        <div class="panel-content">
                    <div class="order-container">
                        <div class="order-tabs">
                            <button type="button" class="order-tab active" data-side="long" data-i18n="long">Long</button>
                            <button type="button" class="order-tab" data-side="short" data-i18n="short">Short</button>
                        </div>
                        <div class="order-type-selector">
                            <button type="button" class="type-btn active" data-i18n="market">Market</button>
                            <button type="button" class="type-btn" data-i18n="limit">Limit</button>
                            <button type="button" class="type-btn" data-i18n="stop">Stop</button>
                        </div>
                        <div class="order-form">
                            <div class="form-group">
                                <label for="order-size" data-i18n="amount">Size (USD)</label>
                                <div class="input-group">
                                    <input type="number" id="order-size" placeholder="0.00" aria-describedby="order-size-suffix" >
                                    <span class="input-suffix">USD</span>
                                </div>
                            </div>
                            <div class="form-group" id="limit-price-group" style="display:none;">
                                <label for="limit-price" data-i18n="limit_price">Limit Price</label>
                                <div class="input-group">
                                    <input type="number" id="limit-price" placeholder="0.00" aria-label="Limit price in USD" >
                                    <span class="input-suffix">USD</span>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="leverage-slider" data-i18n="leverage">Leverage</label>
                                <div class="leverage-slider">
                                    <input type="range" id="leverage-slider" min="1" max="50" value="10" aria-valuetext="10x leverage" >
                                    <span class="leverage-value" id="leverage-value">10x</span>
                                </div>
                                <div class="leverage-presets">
                                    <button type="button" class="lev-btn">1x</button>
                                    <button type="button" class="lev-btn">5x</button>
                                    <button type="button" class="lev-btn active">10x</button>
                                    <button type="button" class="lev-btn">25x</button>
                                    <button type="button" class="lev-btn">50x</button>
                                </div>
                            </div>
                            <div class="order-summary">
                                <div class="summary-row">
                                    <span data-i18n="entry_price">Entry Price</span>
                                    <span id="entry-price">$97,234.50</span>
                                </div>
                                <div class="summary-row">
                                    <span data-i18n="liq_price">Liquidation Price</span>
                                    <span id="liq-price" class="warning">$87,511.05</span>
                                </div>
                                <div class="summary-row">
                                    <span data-i18n="fee">Fee</span>
                                    <span id="order-fee">~$0.50</span>
                                </div>
                            </div>
                            <button type="button" class="btn-order btn-long" id="btn-place-order" disabled data-i18n="connect_to_trade">
                                Connect Wallet to Trade
                            </button>
                        </div>
                    </div>
                        </div>
                    </div>
                </div>

                <!-- Positions -->
                <div class="collapsible-panel" data-panel-id="panel-positions">
                    <div class="panel-header">
                        <div class="panel-title">
                            <span class="panel-title-icon">üíº</span>
                            <span data-i18n="positions">Positions &amp; Orders</span>
                        </div>
                        <div class="panel-toggle"><span class="chevron">‚ñº</span></div>
                    </div>
                    <div class="panel-content">
                <div class="positions-section">
                    <div class="positions-header">
                        <button type="button" class="pos-tab active" data-i18n="positions_count">Positions (0)</button>
                        <button type="button" class="pos-tab" data-i18n="orders_count">Orders (0)</button>
                        <button type="button" class="pos-tab" data-i18n="history">History</button>
                    </div>
                    <div class="positions-table">
                        <div class="positions-empty">
                            <span data-i18n="no_open_positions">No open positions</span>
                        </div>
                    </div>
                </div>
                    </div>
                </div>
            </section>

            <!-- Swap Tab (Uniswap) -->
            <section class="tab-content" id="tab-swap">
                <div class="swap-container">

                    <!-- Product Guide -->
                    <div class="product-guide" id="swap-guide">
                        <div class="product-guide-header" onclick="this.parentElement.classList.toggle('expanded')">
                            <div class="product-guide-title">
                                <span class="icon">üìö</span>
                                <span data-i18n="guide_swap_title">Swap Guide</span>
                            </div>
                            <span class="product-guide-toggle">‚ñº</span>
                        </div>
                        <div class="product-guide-content">
                            <div class="guide-section">
                                <h4 data-i18n="guide_swap_what_title">What is Swap?</h4>
                                <p data-i18n="guide_swap_what_desc">Swap allows you to instantly exchange one crypto for another. We aggregate the best prices from multiple DEXs to guarantee you the best rate, with no platform fees.</p>
                            </div>
                            <div class="guide-section">
                                <h4 data-i18n="guide_swap_how_title">How to Swap?</h4>
                                <div class="guide-steps">
                                    <div class="guide-step">
                                        <span class="step-number">1</span>
                                        <p data-i18n="guide_swap_step1">Connect your wallet containing the tokens to swap</p>
                                    </div>
                                    <div class="guide-step">
                                        <span class="step-number">2</span>
                                        <p data-i18n="guide_swap_step2">Select the source token ("You pay") and target token ("You receive")</p>
                                    </div>
                                    <div class="guide-step">
                                        <span class="step-number">3</span>
                                        <p data-i18n="guide_swap_step3">Enter the amount - the conversion rate displays automatically</p>
                                    </div>
                                    <div class="guide-step">
                                        <span class="step-number">4</span>
                                        <p data-i18n="guide_swap_step4">Review the details (slippage, network fees) and confirm</p>
                                    </div>
                                </div>
                            </div>
                            <div class="guide-section">
                                <h4 data-i18n="guide_swap_advanced_title">Advanced Settings</h4>
                                <ul>
                                    <li data-i18n="guide_swap_slippage"><strong>Slippage:</strong> Price variation tolerance (0.5% by default)</li>
                                    <li data-i18n="guide_swap_minprice"><strong>Minimum Price:</strong> The swap fails if the price is less favorable</li>
                                    <li data-i18n="guide_swap_aggregation"><strong>Aggregation:</strong> We compare Uniswap, Sushiswap, 1inch, etc.</li>
                                </ul>
                            </div>
                            <div class="guide-warning">
                                <span class="icon">‚ö†Ô∏è</span>
                                <p data-i18n="guide_swap_warning">Always verify the token address before swapping. Fraudulent tokens can have names similar to real tokens.</p>
                            </div>
                        </div>
                    </div>

                    <div class="swap-card">
                        <div class="swap-header">
                            <h2 data-i18n="swap">Swap</h2>
                            <button type="button" class="btn-settings" id="swap-settings">‚öôÔ∏è¬è</button>
                        </div>
                        <div class="swap-form">
                            <div class="swap-input">
                                <div class="swap-input-header">
                                    <label for="swap-from-amount" data-i18n="from">From</label>
                                    <span class="balance" data-i18n="balance">Balance</span>: <span id="from-balance">0.00</span>
                                </div>
                                <div class="swap-input-row">
                                    <input type="number" id="swap-from-amount" placeholder="0" aria-label="Amount to pay" >
                                    <button type="button" class="token-selector" id="from-token">
                                        <img src="assets/eth.svg" alt="ETH" class="token-icon" onerror="this.style.display='none'">
                                        <span>ETH</span>
                                        <span class="dropdown-arrow">‚ñº</span>
                                    </button>
                                </div>
                            </div>
                            <button type="button" class="swap-switch" id="btn-swap-switch" aria-label="Switch tokens" title="Switch tokens">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                                    <path d="M7 16V4m0 0L3 8m4-4l4 4M17 8v12m0 0l4-4m-4 4l-4-4"/>
                                </svg>
                            </button>
                            <div class="swap-input">
                                <div class="swap-input-header">
                                    <label for="swap-to-amount" data-i18n="to">To</label>
                                    <span class="balance" data-i18n="balance">Balance</span>: <span id="to-balance">0.00</span>
                                </div>
                                <div class="swap-input-row">
                                    <input type="number" id="swap-to-amount" placeholder="0" readonly aria-label="Amount to receive" >
                                    <button type="button" class="token-selector" id="to-token">
                                        <img src="assets/usdc.svg" alt="USDC" class="token-icon" onerror="this.style.display='none'">
                                        <span>USDC</span>
                                        <span class="dropdown-arrow">‚ñº</span>
                                    </button>
                                </div>
                            </div>
                            <div class="swap-details" id="swap-details" style="display:none;">
                                <div class="detail-row">
                                    <span data-i18n="rate">Rate</span>
                                    <span id="swap-rate">1 ETH = 3,245.67 USDC</span>
                                </div>
                                <div class="detail-row">
                                    <span data-i18n="price_impact">Price Impact</span>
                                    <span id="price-impact" class="positive">&lt;0.01%</span>
                                </div>
                                <div class="detail-row">
                                    <span data-i18n="network_fee">Network Fee</span>
                                    <span id="network-fee">~$2.50</span>
                                </div>
                            </div>
                            <button type="button" class="btn-swap" id="btn-swap" disabled data-i18n="connect_to_swap">
                                Connect Wallet to Swap
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Banking Tab (Deposit/Withdraw) -->
            <section class="tab-content" id="tab-banking">
                <div class="banking-container">
                <!-- Simulated Deposit Panel Banking -->
                <div class="banking-deposit-panel" style="background:linear-gradient(135deg,rgba(0,255,136,0.1),rgba(139,92,246,0.1));border:1px solid rgba(0,255,136,0.3);border-radius:16px;padding:16px;margin-bottom:20px;">
                    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;flex-wrap:wrap;gap:10px;">
                        <h3 style="margin:0;color:#00ff88;font-size:14px;" data-i18n="simulated_capital">Simulated Capital</h3>
                        <span class="sim-balance-display" style="font-size:14px;color:#fff;font-weight:700;">$0.00</span>
                    </div>
                    <div style="display:flex;gap:8px;flex-wrap:wrap;">
                        <button onclick="PortfolioFix.addSimulated(100)" style="padding:8px 14px;background:rgba(0,255,136,0.2);border:1px solid rgba(0,255,136,0.4);border-radius:8px;color:#00ff88;font-weight:600;cursor:pointer;font-size:12px;">+$100</button>
                        <button onclick="PortfolioFix.addSimulated(1000)" style="padding:8px 14px;background:rgba(0,255,136,0.2);border:1px solid rgba(0,255,136,0.4);border-radius:8px;color:#00ff88;font-weight:600;cursor:pointer;font-size:12px;">+$1K</button>
                        <button onclick="PortfolioFix.addSimulated(10000)" style="padding:8px 14px;background:rgba(0,255,136,0.2);border:1px solid rgba(0,255,136,0.4);border-radius:8px;color:#00ff88;font-weight:600;cursor:pointer;font-size:12px;">+$10K</button>
                        <button onclick="PortfolioFix.addSimulated(100000)" style="padding:8px 14px;background:rgba(139,92,246,0.2);border:1px solid rgba(139,92,246,0.4);border-radius:8px;color:#a855f7;font-weight:600;cursor:pointer;font-size:12px;">+$100K</button>
                    </div>
                </div>
                    <div class="banking-header">
                        <h2 data-i18n="banking">Deposit &amp; Withdraw</h2>
                        <p class="banking-subtitle" data-i18n="deposit_desc">Transfer funds to trade on Hyperliquid</p>
                    </div>


                    <!-- Product Guide -->
                    <div class="product-guide" id="banking-guide">
                        <div class="product-guide-header" onclick="this.parentElement.classList.toggle('expanded')">
                            <div class="product-guide-title">
                                <span class="icon">üìö</span>
                                <span data-i18n="guide_banking_title">Deposit &amp; Withdraw Guide</span>
                            </div>
                            <span class="product-guide-toggle">‚ñº</span>
                        </div>
                        <div class="product-guide-content">
                            <div class="guide-section">
                                <h4 data-i18n="guide_banking_what_title">What is Banking?</h4>
                                <p data-i18n="guide_banking_what_desc">The Banking module allows you to transfer funds between your wallet and Hyperliquid for trading. Your funds remain under your full control (self-custody) - only you have access to your private keys.</p>
                            </div>
                            <div class="guide-section">
                                <h4 data-i18n="guide_banking_deposit_title">How to Deposit?</h4>
                                <div class="guide-steps">
                                    <div class="guide-step">
                                        <span class="step-number">1</span>
                                        <p data-i18n="guide_banking_deposit_step1">Connect your wallet (MetaMask, WalletConnect, etc.)</p>
                                    </div>
                                    <div class="guide-step">
                                        <span class="step-number">2</span>
                                        <p data-i18n="guide_banking_deposit_step2">Select the source network (Arbitrum recommended for lowest fees)</p>
                                    </div>
                                    <div class="guide-step">
                                        <span class="step-number">3</span>
                                        <p data-i18n="guide_banking_deposit_step3">Enter the USDC amount to deposit (minimum 10 USDC)</p>
                                    </div>
                                    <div class="guide-step">
                                        <span class="step-number">4</span>
                                        <p data-i18n="guide_banking_deposit_step4">Confirm the transaction in your wallet</p>
                                    </div>
                                </div>
                            </div>
                            <div class="guide-section">
                                <h4 data-i18n="guide_banking_withdraw_title">How to Withdraw?</h4>
                                <div class="guide-steps">
                                    <div class="guide-step">
                                        <span class="step-number">1</span>
                                        <p data-i18n="guide_banking_withdraw_step1">Check your available balance on Hyperliquid</p>
                                    </div>
                                    <div class="guide-step">
                                        <span class="step-number">2</span>
                                        <p data-i18n="guide_banking_withdraw_step2">Choose the destination network to receive your funds</p>
                                    </div>
                                    <div class="guide-step">
                                        <span class="step-number">3</span>
                                        <p data-i18n="guide_banking_withdraw_step3">Enter the amount to withdraw and confirm</p>
                                    </div>
                                </div>
                            </div>
                            <div class="guide-warning">
                                <span class="icon">‚ö†Ô∏è</span>
                                <p data-i18n="guide_banking_warning">Always verify the selected network before depositing. Sending funds to the wrong network can result in permanent loss.</p>
                            </div>
                        </div>
                    </div>

                    <div class="banking-grid">
                        <!-- Deposit Card -->
                        <div class="banking-card">
                            <div class="card-icon deposit-icon">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M12 3v18m0-18l-4 4m4-4l4 4"/>
                                    <rect x="3" y="17" width="18" height="4" rx="1"/>
                                </svg>
                            </div>
                            <h3 data-i18n="deposit_title">Deposit</h3>
                            <p data-i18n="deposit_desc">Transfer your USDC to Hyperliquid</p>

                            <div class="form-group">
                                <label for="deposit-network" data-i18n="select_network">Select Network</label>
                                <select id="deposit-network" class="network-select" onchange="DepositUI.selectNetwork(this.value)">
                                    <option value="ARBITRUM" data-i18n="network_arbitrum">Arbitrum One (Recommended)</option>
                                    <option value="SOLANA" data-i18n="network_solana">Solana</option>
                                    <option value="BASE" data-i18n="network_base">Base</option>
                                    <option value="OPTIMISM" data-i18n="network_optimism">Optimism</option>
                                    <option value="POLYGON" data-i18n="network_polygon">Polygon</option>
                                    <option value="BSC" data-i18n="network_bsc">BNB Chain</option>
                                    <option value="ETHEREUM" data-i18n="network_ethereum">Ethereum</option>
                                </select>
                            </div>

                            <div class="balance-display">
                                <span class="balance-label" data-i18n="wallet_balance">Wallet Balance</span>
                                <span class="balance-amount" id="deposit-wallet-balance">$0.00 USDC</span>
                            </div>

                            <div class="form-group">
                                <label for="deposit-amount" data-i18n="amount_to_deposit">Amount to Deposit</label>
                                <div class="input-group">
                                    <input type="number" id="deposit-amount" placeholder="0.00" min="10" step="0.01" aria-describedby="deposit-hint">
                                    <button type="button" class="btn-max" onclick="DepositUI.setMaxDeposit()">MAX</button>
                                    <span class="input-suffix">USDC</span>
                                </div>
                                <span class="input-hint" data-i18n="minimum_deposit">Minimum: 10 USDC</span>
                            </div>

                            <div class="fee-info">
                                <div class="fee-row">
                                    <span data-i18n="network_fee">Network Fee</span>
                                    <span id="deposit-gas-fee">~$0.50</span>
                                </div>
                                <div class="fee-row">
                                    <span data-i18n="deposit_fee">Deposit Fee</span>
                                    <span class="positive" data-i18n="free">FREE</span>
                                </div>
                            </div>

                            <button type="button" class="btn-primary btn-deposit" id="btn-deposit" disabled data-i18n="connect_to_deposit">
                                Connect Wallet to Deposit
                            </button>
                        </div>

                        <!-- Withdraw Card -->
                        <div class="banking-card">
                            <div class="card-icon withdraw-icon">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M12 21V3m0 18l-4-4m4 4l4-4"/>
                                    <rect x="3" y="3" width="18" height="4" rx="1"/>
                                </svg>
                            </div>
                            <h3 data-i18n="withdraw_title">Withdraw</h3>
                            <p data-i18n="withdraw_desc">Transfer your USDC to your wallet</p>

                            <div class="balance-display">
                                <span class="balance-label" data-i18n="hl_balance">Hyperliquid Balance</span>
                                <span class="balance-amount" id="withdraw-hl-balance">$0.00 USDC</span>
                            </div>

                            <div class="form-group">
                                <label for="withdraw-amount" data-i18n="amount_to_withdraw">Amount to Withdraw</label>
                                <div class="input-group">
                                    <input type="number" id="withdraw-amount" placeholder="0.00" min="2" step="0.01" aria-describedby="withdraw-hint">
                                    <button type="button" class="btn-max" onclick="DepositUI.setMaxWithdraw()">MAX</button>
                                    <span class="input-suffix">USDC</span>
                                </div>
                                <span class="input-hint" data-i18n="minimum_withdraw">Minimum: 2 USDC</span>
                            </div>

                            <div class="fee-info">
                                <div class="fee-row">
                                    <span data-i18n="withdrawal_fee">Withdrawal Fee</span>
                                    <span>$1.00</span>
                                </div>
                                <div class="fee-row">
                                    <span data-i18n="you_will_receive">You will receive</span>
                                    <span id="withdraw-receive">$0.00</span>
                                </div>
                            </div>

                            <button type="button" class="btn-secondary btn-withdraw" id="btn-withdraw" disabled data-i18n="connect_to_withdraw">
                                Connect Wallet to Withdraw
                            </button>
                        </div>
                    </div>

                    <!-- Transaction History -->
                    <div class="tx-history">
                        <h3 data-i18n="recent_transactions">Recent Transactions</h3>
                        <div class="tx-list" id="banking-tx-list">
                            <div class="tx-empty" data-i18n="no_transactions">No transactions</div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Bonds Tab (Fixed Income) -->
            <section class="tab-content" id="tab-bonds">
                <div class="bonds-container">
                    <div class="bonds-header">
                        <div class="header-content">
                            <h2 data-i18n="bonds_title">Tokenized Bonds &amp; Fixed Income</h2>
                            <p class="bonds-subtitle" data-i18n="bonds_desc">Earn stable yields from US Treasuries, Corporate Bonds &amp; DeFi</p>
                        </div>
                        <div class="investor-toggle">
                            <button class="toggle-btn active" data-type="retail" data-i18n="retail">Retail</button>
                            <button class="toggle-btn" data-type="institutional" data-i18n="institutional">Institutional</button>
                        </div>
                    </div>


                    <!-- Product Guide -->
                    <div class="product-guide" id="bonds-guide">
                        <div class="product-guide-header" onclick="this.parentElement.classList.toggle('expanded')">
                            <div class="product-guide-title">
                                <span class="icon">üìö</span>
                                <span data-i18n="guide_bonds_title">How Bonds Work</span>
                            </div>
                            <span class="product-guide-toggle">‚ñº</span>
                        </div>
                        <div class="product-guide-content">
                            <div class="guide-section">
                                <h4 data-i18n="guide_bonds_what_title">What is a Tokenized Bond?</h4>
                                <p data-i18n="guide_bonds_what_desc">Tokenized bonds are traditional bonds (US Treasury bills, corporate bonds) converted into tokens on the blockchain. You invest in USDC and receive fixed interest until maturity.</p>
                            </div>
                            <div class="guide-section">
                                <h4 data-i18n="guide_bonds_how_title">How Does it Work?</h4>
                                <div class="guide-steps">
                                    <div class="guide-step">
                                        <span class="step-number">1</span>
                                        <p data-i18n="guide_bonds_step1">Choose a product based on yield (APY), duration, and risk level (rating AAA to BB)</p>
                                    </div>
                                    <div class="guide-step">
                                        <span class="step-number">2</span>
                                        <p data-i18n="guide_bonds_step2">Invest an amount in USDC (minimum shown on each product)</p>
                                    </div>
                                    <div class="guide-step">
                                        <span class="step-number">3</span>
                                        <p data-i18n="guide_bonds_step3">Interest accrues daily and is visible in "Accrued Yield"</p>
                                    </div>
                                    <div class="guide-step">
                                        <span class="step-number">4</span>
                                        <p data-i18n="guide_bonds_step4">At maturity (or before for liquid products), retrieve your capital + interest</p>
                                    </div>
                                </div>
                            </div>
                            <div class="guide-section">
                                <h4 data-i18n="guide_bonds_types_title">Product Types</h4>
                                <ul>
                                    <li data-i18n="guide_bonds_type_treasury"><strong>US Treasury:</strong> US Treasury Bills - Very low risk, stable yield (~5%)</li>
                                    <li data-i18n="guide_bonds_type_corporate"><strong>Corporate:</strong> Corporate Bonds - Higher yield, moderate risk</li>
                                    <li data-i18n="guide_bonds_type_defi"><strong>DeFi Yield:</strong> Automated DeFi strategies - Variable yield, higher risk</li>
                                    <li data-i18n="guide_bonds_type_credit"><strong>Credit:</strong> Tokenized private credits - High yield, limited liquidity</li>
                                </ul>
                            </div>
                            <div class="guide-warning">
                                <span class="icon">‚ö†Ô∏è</span>
                                <p data-i18n="guide_bonds_warning">Investments carry risks. Past returns do not guarantee future returns. Only invest what you can afford to lose.</p>
                            </div>
                        </div>
                    </div>

                    <!-- Info Box -->
                    <div class="info-box">
                        <span class="info-icon">üí°</span>
                        <p data-i18n="bonds_how">How it works: Choose a bond, invest USDC, wait until maturity, collect your capital + interest.</p>
                    </div>

                    <!-- Portfolio Summary - Simulated vs Real -->
                    <div class="bonds-summary" style="flex-wrap:wrap;gap:8px;">
                        <!-- SIMULATED -->
                        <div class="summary-stat" style="border-left:3px solid #a855f7;padding-left:12px;">
                            <span class="stat-label" style="color:#a855f7;">üéÆ Investi Simul√©</span>
                            <span class="stat-value" id="bonds-total-sim">$0.00</span>
                        </div>
                        <div class="summary-stat" style="border-left:3px solid #a855f7;padding-left:12px;">
                            <span class="stat-label" style="color:#a855f7;">PnL Simul√©</span>
                            <span class="stat-value positive" id="bonds-yield-sim">+$0.00</span>
                        </div>
                        <!-- REAL -->
                        <div class="summary-stat" style="border-left:3px solid #3b82f6;padding-left:12px;">
                            <span class="stat-label" style="color:#3b82f6;">üíé Investi R√©el</span>
                            <span class="stat-value" id="bonds-total-real">$0.00</span>
                        </div>
                        <div class="summary-stat" style="border-left:3px solid #3b82f6;padding-left:12px;">
                            <span class="stat-label" style="color:#3b82f6;">PnL R√©el</span>
                            <span class="stat-value positive" id="bonds-yield-real">+$0.00</span>
                        </div>
                        <!-- APY -->
                        <div class="summary-stat">
                            <span class="stat-label" data-i18n="avg_apy">Avg APY</span>
                            <span class="stat-value" id="bonds-avg-apy">0.00%</span>
                        </div>
                    </div>
                    <!-- Hidden for backward compat -->
                    <span id="bonds-total" style="display:none;">$0.00</span>
                    <span id="bonds-yield" style="display:none;">+$0.00</span>

                    <!-- Product Categories -->
                    <div class="bond-categories">
                        <button type="button" class="cat-btn active" data-category="all" data-i18n="all_products">All Products</button>
                        <button type="button" class="cat-btn" data-category="treasury" data-i18n="us_treasury">US Treasury</button>
                        <button type="button" class="cat-btn" data-category="corporate" data-i18n="corporate">Corporate</button>
                        <button type="button" class="cat-btn" data-category="defi" data-i18n="defi_yield">DeFi Yield</button>
                        <button type="button" class="cat-btn" data-category="credit" data-i18n="credit">Credit</button>
                    </div>

                    <!-- Bond Products Grid -->
                    <div class="bonds-grid" id="bonds-grid">
                        <!-- US Treasury - USDY -->
                        <div class="bond-card" data-product="USDY" data-type="treasury">
                            <div class="bond-header">
                                <div class="bond-info">
                                    <span class="bond-name" data-i18n="bond_usdy">US Dollar Yield</span>
                                    <span class="bond-issuer">Ondo Finance</span>
                                </div>
                                <span class="bond-rating aaa">AAA</span>
                            </div>
                            <div class="bond-apy">
                                <span class="apy-value">5.25%</span>
                                <span class="apy-label" data-i18n="apy">APY</span>
                            </div>
                            <div class="bond-details">
                                <div class="detail">
                                    <span class="label" data-i18n="underlying">Underlying</span>
                                    <span class="value">US Treasuries</span>
                                </div>
                                <div class="detail">
                                    <span class="label" data-i18n="min_investment">Min. Investment</span>
                                    <span class="value">$100</span>
                                </div>
                                <div class="detail">
                                    <span class="label" data-i18n="liquidity">Liquidity</span>
                                    <span class="value" data-i18n="daily">Daily</span>
                                </div>
                            </div>
                            <!-- Investment Buttons -->
                            <div class="bond-actions" style="display:flex;gap:8px;">
                                <button type="button" class="btn-invest" data-product="USDY" onclick="BondsModule.openInvestModal('USDY')" style="flex:1;background:linear-gradient(135deg,#a855f7,#7c3aed);border:none;padding:10px;border-radius:8px;color:#fff;font-weight:600;cursor:pointer;font-size:12px;">
                                    üéÆ Investir Simule
                                </button>
                                <button type="button" onclick="BondsModule.openInvestModal('USDY')" style="flex:1;background:linear-gradient(135deg,#3b82f6,#1d4ed8);border:none;padding:10px;border-radius:8px;color:#fff;font-weight:600;cursor:pointer;font-size:12px;">
                                    üíé Investir Reel
                                </button>
                            </div>
                        </div>

                        <!-- OUSG - Institutional -->
                        <div class="bond-card institutional-only" data-product="OUSG" data-type="treasury">
                            <div class="institutional-badge" data-i18n="institutional">Institutional</div>
                            <div class="bond-header">
                                <div class="bond-info">
                                    <span class="bond-name">Short-Term US Govt</span>
                                    <span class="bond-issuer">Ondo Finance</span>
                                </div>
                                <span class="bond-rating aaa">AAA</span>
                            </div>
                            <div class="bond-apy">
                                <span class="apy-value">5.35%</span>
                                <span class="apy-label" data-i18n="apy">APY</span>
                            </div>
                            <div class="bond-details">
                                <div class="detail">
                                    <span class="label" data-i18n="underlying">Underlying</span>
                                    <span class="value">T-Bills</span>
                                </div>
                                <div class="detail">
                                    <span class="label" data-i18n="min_investment">Min. Investment</span>
                                    <span class="value">$100,000</span>
                                </div>
                                <div class="detail">
                                    <span class="label" data-i18n="maturity">Maturity</span>
                                    <span class="value">3-6 months</span>
                                </div>
                            </div>
                            <!-- Investment Buttons -->
                            <div class="bond-actions" style="display:flex;gap:8px;">
                                <button type="button" class="btn-invest" data-product="OUSG" onclick="BondsModule.openInvestModal('OUSG')" style="flex:1;background:linear-gradient(135deg,#a855f7,#7c3aed);border:none;padding:10px;border-radius:8px;color:#fff;font-weight:600;cursor:pointer;font-size:12px;">
                                    üéÆ Investir Simule
                                </button>
                                <button type="button" onclick="BondsModule.openInvestModal('OUSG')" style="flex:1;background:linear-gradient(135deg,#3b82f6,#1d4ed8);border:none;padding:10px;border-radius:8px;color:#fff;font-weight:600;cursor:pointer;font-size:12px;">
                                    üíé Investir Reel
                                </button>
                            </div>
                        </div>

                        <!-- BlackRock BUIDL -->
                        <div class="bond-card institutional-only premium" data-product="BUIDL" data-type="money-market">
                            <div class="institutional-badge" data-i18n="institutional">Institutional</div>
                            <div class="premium-badge" data-i18n="premium">Premium</div>
                            <div class="bond-header">
                                <div class="bond-info">
                                    <span class="bond-name">BlackRock USD Fund</span>
                                    <span class="bond-issuer">BlackRock / Securitize</span>
                                </div>
                                <span class="bond-rating aaa">AAA</span>
                            </div>
                            <div class="bond-apy">
                                <span class="apy-value">5.30%</span>
                                <span class="apy-label" data-i18n="apy">APY</span>
                            </div>
                            <div class="bond-details">
                                <div class="detail">
                                    <span class="label" data-i18n="underlying">Underlying</span>
                                    <span class="value">T-Bills, Repos</span>
                                </div>
                                <div class="detail">
                                    <span class="label" data-i18n="min_investment">Min. Investment</span>
                                    <span class="value">$5,000,000</span>
                                </div>
                                <div class="detail">
                                    <span class="label" data-i18n="liquidity">Liquidity</span>
                                    <span class="value" data-i18n="daily">Daily</span>
                                </div>
                            </div>
                            <!-- Investment Buttons -->
                            <div class="bond-actions" style="display:flex;gap:8px;">
                                <button type="button" class="btn-invest" data-product="BUIDL" onclick="BondsModule.openInvestModal('BUIDL')" style="flex:1;background:linear-gradient(135deg,#a855f7,#7c3aed);border:none;padding:10px;border-radius:8px;color:#fff;font-weight:600;cursor:pointer;font-size:12px;">
                                    üéÆ Investir Simule
                                </button>
                                <button type="button" onclick="BondsModule.openInvestModal('BUIDL')" style="flex:1;background:linear-gradient(135deg,#3b82f6,#1d4ed8);border:none;padding:10px;border-radius:8px;color:#fff;font-weight:600;cursor:pointer;font-size:12px;">
                                    üíé Investir Reel
                                </button>
                            </div>
                        </div>

                        <!-- Corporate Bond -->
                        <div class="bond-card" data-product="CORP_AAA" data-type="corporate">
                            <div class="bond-header">
                                <div class="bond-info">
                                    <span class="bond-name">Investment Grade Corp</span>
                                    <span class="bond-issuer">Maple Finance</span>
                                </div>
                                <span class="bond-rating a">A</span>
                            </div>
                            <div class="bond-apy">
                                <span class="apy-value">7.50%</span>
                                <span class="apy-label" data-i18n="apy">APY</span>
                            </div>
                            <div class="bond-details">
                                <div class="detail">
                                    <span class="label" data-i18n="underlying">Underlying</span>
                                    <span class="value">Corporate Debt</span>
                                </div>
                                <div class="detail">
                                    <span class="label" data-i18n="min_investment">Min. Investment</span>
                                    <span class="value">$1,000</span>
                                </div>
                                <div class="detail">
                                    <span class="label" data-i18n="maturity">Maturity</span>
                                    <span class="value">90 days</span>
                                </div>
                            </div>
                            <!-- Investment Buttons -->
                            <div class="bond-actions" style="display:flex;gap:8px;">
                                <button type="button" class="btn-invest" data-product="CORP_AAA" onclick="BondsModule.openInvestModal('CORP_AAA')" style="flex:1;background:linear-gradient(135deg,#a855f7,#7c3aed);border:none;padding:10px;border-radius:8px;color:#fff;font-weight:600;cursor:pointer;font-size:12px;">
                                    üéÆ Investir Simule
                                </button>
                                <button type="button" onclick="BondsModule.openInvestModal('CORP_AAA')" style="flex:1;background:linear-gradient(135deg,#3b82f6,#1d4ed8);border:none;padding:10px;border-radius:8px;color:#fff;font-weight:600;cursor:pointer;font-size:12px;">
                                    üíé Investir Reel
                                </button>
                            </div>
                        </div>

                        <!-- sDAI -->
                        <div class="bond-card" data-product="SDAI" data-type="defi">
                            <div class="bond-header">
                                <div class="bond-info">
                                    <span class="bond-name">Spark DAI</span>
                                    <span class="bond-issuer">MakerDAO / Spark</span>
                                </div>
                                <span class="bond-rating defi">DeFi</span>
                            </div>
                            <div class="bond-apy">
                                <span class="apy-value">8.00%</span>
                                <span class="apy-label" data-i18n="apy">APY</span>
                            </div>
                            <div class="bond-details">
                                <div class="detail">
                                    <span class="label" data-i18n="underlying">Underlying</span>
                                    <span class="value">DSR + RWA</span>
                                </div>
                                <div class="detail">
                                    <span class="label" data-i18n="min_investment">Min. Investment</span>
                                    <span class="value">$1</span>
                                </div>
                                <div class="detail">
                                    <span class="label" data-i18n="liquidity">Liquidity</span>
                                    <span class="value" data-i18n="instant">Instant</span>
                                </div>
                            </div>
                            <!-- Investment Buttons -->
                            <div class="bond-actions" style="display:flex;gap:8px;">
                                <button type="button" class="btn-invest" data-product="SDAI" onclick="BondsModule.openInvestModal('SDAI')" style="flex:1;background:linear-gradient(135deg,#a855f7,#7c3aed);border:none;padding:10px;border-radius:8px;color:#fff;font-weight:600;cursor:pointer;font-size:12px;">
                                    üéÆ Investir Simule
                                </button>
                                <button type="button" onclick="BondsModule.openInvestModal('SDAI')" style="flex:1;background:linear-gradient(135deg,#3b82f6,#1d4ed8);border:none;padding:10px;border-radius:8px;color:#fff;font-weight:600;cursor:pointer;font-size:12px;">
                                    üíé Investir Reel
                                </button>
                            </div>
                        </div>

                        <!-- High Yield Credit -->
                        <div class="bond-card high-risk" data-product="CREDIT" data-type="credit">
                            <div class="risk-badge" data-i18n="high_yield">High Yield</div>
                            <div class="bond-header">
                                <div class="bond-info">
                                    <span class="bond-name">DeFi Credit Pool</span>
                                    <span class="bond-issuer">Centrifuge</span>
                                </div>
                                <span class="bond-rating b">B+</span>
                            </div>
                            <div class="bond-apy highlight">
                                <span class="apy-value">12.00%</span>
                                <span class="apy-label" data-i18n="apy">APY</span>
                            </div>
                            <div class="bond-details">
                                <div class="detail">
                                    <span class="label" data-i18n="underlying">Underlying</span>
                                    <span class="value">Trade Finance</span>
                                </div>
                                <div class="detail">
                                    <span class="label" data-i18n="min_investment">Min. Investment</span>
                                    <span class="value">$500</span>
                                </div>
                                <div class="detail">
                                    <span class="label" data-i18n="maturity">Maturity</span>
                                    <span class="value">30-180 days</span>
                                </div>
                            </div>
                            <!-- Investment Buttons -->
                            <div class="bond-actions" style="display:flex;gap:8px;">
                                <button type="button" class="btn-invest" data-product="CREDIT" onclick="BondsModule.openInvestModal('CREDIT')" style="flex:1;background:linear-gradient(135deg,#a855f7,#7c3aed);border:none;padding:10px;border-radius:8px;color:#fff;font-weight:600;cursor:pointer;font-size:12px;">
                                    üéÆ Investir Simule
                                </button>
                                <button type="button" onclick="BondsModule.openInvestModal('CREDIT')" style="flex:1;background:linear-gradient(135deg,#3b82f6,#1d4ed8);border:none;padding:10px;border-radius:8px;color:#fff;font-weight:600;cursor:pointer;font-size:12px;">
                                    üíé Investir Reel
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Institutional Access Section -->
                    <div class="institutional-section" id="institutional-section" style="display:none;">
                        <div class="inst-card">
                            <h3 data-i18n="institutional_access">Institutional Access</h3>
                            <p data-i18n="institutional_access_desc">Access exclusive bond products with higher yields and larger allocations.</p>

                            <div class="requirements">
                                <h4 data-i18n="requirements">Requirements</h4>
                                <ul>
                                    <li data-i18n="requirement_min_investment">Minimum $100,000 investment</li>
                                    <li data-i18n="requirement_accredited">Accredited investor verification</li>
                                    <li data-i18n="requirement_kyc">KYC/AML compliance</li>
                                </ul>
                            </div>

                            <button type="button" class="btn-primary" id="btn-request-institutional" data-i18n="request_institutional_access">
                                Request Institutional Access
                            </button>
                        </div>
                    </div>

                    <!-- My Positions -->
                    <div class="my-positions" id="bond-positions">
                        <h3 data-i18n="my_bond_positions">My Bond Positions</h3>
                        <div class="positions-list" id="bond-positions-list">
                            <div class="positions-empty">
                                <span data-i18n="no_bond_positions">No bond positions yet</span>
                                <span class="sub" data-i18n="invest_to_earn_yield">Invest in bonds above to start earning yield</span>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Tools Tab (Unique Features) -->
            <section class="tab-content" id="tab-tools">

                <!-- Product Guide -->
                <div class="product-guide" id="tools-guide">
                    <div class="product-guide-header" onclick="this.parentElement.classList.toggle('expanded')">
                        <div class="product-guide-title">
                            <span class="icon">üìö</span>
                            <span data-i18n="guide_tools_title">Pro Tools Guide</span>
                        </div>
                        <span class="product-guide-toggle">‚ñº</span>
                    </div>
                    <div class="product-guide-content">
                        <div class="guide-section">
                            <h4 data-i18n="guide_tools_what_title">What are Pro Tools?</h4>
                            <p data-i18n="guide_tools_what_desc">A suite of advanced tools to optimize your trading: arbitrage opportunity detection, AI advisor, whale tracking, and in-depth market analysis.</p>
                        </div>
                        <div class="guide-section">
                            <h4 data-i18n="guide_tools_available_title">Available Tools</h4>
                            <ul>
                                <li data-i18n="guide_tools_arbitrage"><strong>Arbitrage Scanner:</strong> Detects price differences between exchanges to profit from opportunities</li>
                                <li data-i18n="guide_tools_ai"><strong>AI Advisor:</strong> AI analysis that suggests strategies based on market conditions</li>
                                <li data-i18n="guide_tools_whale"><strong>Whale Tracker:</strong> Track large portfolio movements in real-time</li>
                                <li data-i18n="guide_tools_market"><strong>Market Analysis:</strong> Technical indicators, market sentiment, and on-chain data</li>
                                <li data-i18n="guide_tools_risk"><strong>Risk Calculator:</strong> Calculate your optimal position size based on your risk</li>
                            </ul>
                        </div>
                        <div class="guide-section">
                            <h4 data-i18n="guide_tools_scanner_title">How to Use the Arbitrage Scanner?</h4>
                            <div class="guide-steps">
                                <div class="guide-step">
                                    <span class="step-number">1</span>
                                    <p data-i18n="guide_tools_scanner_step1">Activate the scanner to monitor opportunities in real-time</p>
                                </div>
                                <div class="guide-step">
                                    <span class="step-number">2</span>
                                    <p data-i18n="guide_tools_scanner_step2">Filter by token, exchange, or minimum spread</p>
                                </div>
                                <div class="guide-step">
                                    <span class="step-number">3</span>
                                    <p data-i18n="guide_tools_scanner_step3">When an opportunity appears, check fees and liquidity</p>
                                </div>
                                <div class="guide-step">
                                    <span class="step-number">4</span>
                                    <p data-i18n="guide_tools_scanner_step4">Execute quickly - opportunities are fleeting</p>
                                </div>
                            </div>
                        </div>
                        <div class="guide-warning">
                            <span class="icon">‚ö†Ô∏è</span>
                            <p data-i18n="guide_tools_warning">Tools provide information and suggestions, not financial advice. Always do your own research before trading.</p>
                        </div>
                    </div>
                </div>


                <div class="tools-container">
                    <div class="tools-header">
                        <h2 data-i18n="tools">Unique Trading Tools</h2>
                        <p class="tools-subtitle" data-i18n="tools_subtitle">Advanced features that set Obelisk apart</p>
                    </div>

                    <!-- Smart Intent Trading -->
                    <div class="collapsible-panel" data-panel-id="panel-intent">
                        <div class="panel-header">
                            <div class="panel-title">
                                <span class="panel-title-icon">üß†</span>
                                <span data-i18n="smart_intent">Smart Intent Trading</span>
                            </div>
                            <div class="panel-toggle"><span class="chevron">‚ñº</span></div>
                        </div>
                        <div class="panel-content">
                    <div class="intent-section">
                        <div class="info-box">
                            <span class="info-icon">üí°</span>
                            <p data-i18n="smart_intent_desc">Describe what you want in plain language. AI will execute the best strategy.</p>
                        </div>

                        <form id="intent-form" class="intent-form">
                            <label for="intent-input" class="sr-only">Enter trading intent</label>
                            <input type="text" id="intent-input" class="intent-input" data-i18n="intent_placeholder"
                                   placeholder="Example: Buy $100 BTC if price drops 5%'
                                   aria-label="Enter trading intent in natural language" >
                            <button type="submit" class="btn-primary intent-submit" data-i18n="create_intent">Create Intent</button>
                        </form>

                        <div id="intent-suggestions" class="intent-suggestions"></div>

                        <h4 style="margin: 20px 0 12px;" data-i18n="active_intents">Active Intents</h4>
                        <div id="active-intents" class="active-intents">
                            <p class="no-intents" data-i18n="no_intents">No active intents</p>
                        </div>
                    </div>
                        </div>
                    </div>

                    <!-- Cross-Chain Arbitrage Scanner -->
                    <div class="collapsible-panel" data-panel-id="panel-arbitrage">
                        <div class="panel-header">
                            <div class="panel-title">
                                <span class="panel-title-icon">üîç</span>
                                <span data-i18n="arbitrage_scanner">Cross-Chain Arbitrage Scanner</span>
                            </div>
                            <div class="panel-toggle"><span class="chevron">‚ñº</span></div>
                        </div>
                        <div class="panel-content">
                    <div class="arbitrage-section">
                        <div class="info-box">
                            <span class="info-icon">üí°</span>
                            <p data-i18n="arbitrage_desc">Find price differences across exchanges. Buy low on one, sell high on another.</p>
                        </div>

                        <div class="scanner-controls">
                            <button type="button" id="start-scanner" class="btn-primary scanner-btn" data-i18n="start_scanner">
                                Start Scanner
                            </button>
                            <button type="button" id="stop-scanner" class="btn-secondary scanner-btn" data-i18n="stop_scanner" disabled>
                                Stop Scanner
                            </button>
                        </div>

                        <div id="arbitrage-opportunities" class="arbitrage-opportunities">
                            <p class="no-opportunities" data-i18n="scanning">Click "Start Scanner" to find opportunities</p>
                        </div>
                    </div>
                        </div>
                    </div>

                    <!-- AI Portfolio Advisor -->
                    <div class="collapsible-panel" data-panel-id="panel-advisor">
                        <div class="panel-header">
                            <div class="panel-title">
                                <span class="panel-title-icon">ü§ñ</span>
                                <span data-i18n="ai_advisor">AI Portfolio Advisor</span>
                            </div>
                            <div class="panel-toggle"><span class="chevron">‚ñº</span></div>
                        </div>
                        <div class="panel-content">
                    <div class="advisor-section">
                        <div class="info-box">
                            <span class="info-icon">üí°</span>
                            <p data-i18n="ai_advisor_desc">Get personalized trading advice based on your portfolio and market conditions.</p>
                        </div>
                        <div class="advisor-header">
                            <button type="button" id="analyze-portfolio" class="btn-primary" data-i18n="analyze_portfolio">
                                Analyze Portfolio
                            </button>
                        </div>

                        <div id="advisor-results"></div>
                    </div>
                        </div>
                    </div>

                    <!-- Social Recovery -->
                    <div class="collapsible-panel" data-panel-id="panel-recovery">
                        <div class="panel-header">
                            <div class="panel-title">
                                <span class="panel-title-icon">üõ°Ô∏è</span>
                                <span data-i18n="social_recovery">Social Recovery Guardians</span>
                            </div>
                            <div class="panel-toggle"><span class="chevron">‚ñº</span></div>
                        </div>
                        <div class="panel-content">
                    <div class="recovery-section">
                        <div class="info-box">
                            <span class="info-icon">üí°</span>
                            <p data-i18n="social_recovery_desc">Add trusted contacts who can help recover your wallet if you lose access.</p>
                        </div>

                        <div id="recovery-status"></div>

                        <form id="guardian-setup-form" class="guardian-setup-form">
                            <div class="form-group">
                                <label for="guardian-addresses" data-i18n="guardian_addresses">Guardian Addresses</label>
                                <textarea id="guardian-addresses"
                                          placeholder="Enter guardian wallet addresses (one per line)&#10;0x123...&#10;0x456..."
                                          aria-describedby="guardian-help"></textarea>
                                <span class="form-help" id="guardian-help" data-i18n="guardian_help">Add 2-7 trusted addresses who can help recover your wallet</span>
                            </div>
                            <div class="form-group">
                                <label for="guardian-threshold" data-i18n="recovery_threshold">Recovery Threshold</label>
                                <input type="number" id="guardian-threshold" min="2" max="7" value="2" aria-describedby="threshold-help">
                                <span class="form-help" id="threshold-help" data-i18n="threshold_help">Number of guardians required to approve recovery</span>
                            </div>
                            <div class="form-group">
                                <label for="recovery-password" data-i18n="wallet_password">Wallet Password</label>
                                <input type="password" id="recovery-password" placeholder="Your wallet password" data-i18n-placeholder="your_wallet_password">
                            </div>
                            <button type="submit" class="btn-primary" data-i18n="setup_guardians">Setup Guardians</button>
                        </form>
                    </div>
                        </div>
                    </div>
                </div>
            </section>


            <!-- Perps Trading Tab -->
            <section class="tab-content" id="tab-perps">
                <div id="perps-container" style="padding:0;">
                    <div style="text-align:center;padding:60px;">
                        <div style="font-size:64px;margin-bottom:16px;">üìâ</div>
                        <h2 style="color:#00ff88;margin-bottom:8px;">Perpetual Futures</h2>
                        <p style="color:#888;">Loading trading interface...</p>
                    </div>
                </div>
            </section>

            <!-- Fast Trading Tab -->
            <section class="tab-content" id="tab-fast-trading">
                <div id="fast-trading-container" style="padding:20px;">
                    <div style="text-align:center;padding:40px;">
                        <div style="font-size:48px;margin-bottom:16px;">‚ö°</div>
                        <h2 style="color:#00ff88;margin-bottom:8px;">Fast Trading</h2>
                        <p style="color:#888;">Loading...</p>
                    </div>
                </div>
            </section>

            <!-- HFT Simulator Tab -->
            <section class="tab-content" id="tab-hft">
                <div id="hft-container" style="padding:20px;">
                    <div style="text-align:center;padding:40px;">
                        <div style="font-size:48px;margin-bottom:16px;">üöÄ</div>
                        <h2 style="color:#00ff88;margin-bottom:8px;">HFT Simulator</h2>
                        <p style="color:#888;">Loading...</p>
                    </div>
                </div>
            </section>

            <!-- Bot Simulator Tab -->
            <section class="tab-content" id="tab-bots">
                <div id="bots-container" style="padding:20px;">
                    <div style="text-align:center;padding:40px;">
                        <div style="font-size:48px;margin-bottom:16px;">ü§ñ</div>
                        <h2 style="color:#00ff88;margin-bottom:8px;">Bot Simulator</h2>
                        <p style="color:#888;">Loading...</p>
                    </div>
                </div>
            </section>

            <!-- Combos Tab -->
            <section class="tab-content" id="tab-combos">
                <!-- Product Guide -->
                <!-- Simulated Deposit Panel Combos -->
                <div class="combos-deposit-panel" style="background:linear-gradient(135deg,rgba(0,255,136,0.1),rgba(139,92,246,0.1));border:1px solid rgba(0,255,136,0.3);border-radius:16px;padding:16px;margin-bottom:20px;">
                    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;flex-wrap:wrap;gap:10px;">
                        <h3 style="margin:0;color:#00ff88;font-size:14px;" data-i18n="simulated_capital">Simulated Capital</h3>
                        <span class="sim-balance-display" style="font-size:14px;color:#fff;font-weight:700;">$0.00</span>
                    </div>
                    <div style="display:flex;gap:8px;flex-wrap:wrap;">
                        <button onclick="PortfolioFix.addSimulated(100)" style="padding:8px 14px;background:rgba(0,255,136,0.2);border:1px solid rgba(0,255,136,0.4);border-radius:8px;color:#00ff88;font-weight:600;cursor:pointer;font-size:12px;">+$100</button>
                        <button onclick="PortfolioFix.addSimulated(1000)" style="padding:8px 14px;background:rgba(0,255,136,0.2);border:1px solid rgba(0,255,136,0.4);border-radius:8px;color:#00ff88;font-weight:600;cursor:pointer;font-size:12px;">+$1K</button>
                        <button onclick="PortfolioFix.addSimulated(10000)" style="padding:8px 14px;background:rgba(0,255,136,0.2);border:1px solid rgba(0,255,136,0.4);border-radius:8px;color:#00ff88;font-weight:600;cursor:pointer;font-size:12px;">+$10K</button>
                        <button onclick="PortfolioFix.addSimulated(100000)" style="padding:8px 14px;background:rgba(139,92,246,0.2);border:1px solid rgba(139,92,246,0.4);border-radius:8px;color:#a855f7;font-weight:600;cursor:pointer;font-size:12px;">+$100K</button>
                    </div>
                </div>
                <div class="product-guide expanded" id="combos-guide">
                    <div class="product-guide-header" onclick="this.parentElement.classList.toggle('expanded')">
                        <div class="product-guide-title">
                            <span class="icon">üìö</span>
                            <span data-i18n="guide_combos_title">Combos Guide</span>
                        </div>
                        <span class="product-guide-toggle">‚ñº</span>
                    </div>
                    <div class="product-guide-content">
                        <div class="guide-section">
                            <h4 data-i18n="guide_combos_what_title">What is a Combo?</h4>
                            <p data-i18n="guide_combos_what_desc">Combos are pre-configured investment strategies that automatically diversify your capital between staking, vaults, bonds, and DCA to optimize returns.</p>
                        </div>
                        <div class="guide-section">
                            <h4 data-i18n="guide_combos_risk_title">Risk Levels</h4>
                            <ul style="list-style:none;padding:0;">
                                <li style="margin:5px 0;" data-i18n="guide_combos_risk_low"><span style="color:#00ff88">Low</span> - High protection, stable yield (5-12% APY)</li>
                                <li style="margin:5px 0;" data-i18n="guide_combos_risk_medium"><span style="color:#ffaa00">Medium</span> - Risk/reward balance (15-35% APY)</li>
                                <li style="margin:5px 0;" data-i18n="guide_combos_risk_high"><span style="color:#ff6464">High</span> - High yield, increased volatility (40-80% APY)</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Combos Header -->
                <div style="text-align:center;padding:20px 0;">
                    <h2 style="color:#fff;font-size:1.8rem;margin-bottom:10px;" data-i18n="combos_header">Combo Investment Products</h2>
                    <p style="color:#888;margin-bottom:20px;" data-i18n="combos_subtitle">Diversified strategies for all profiles</p>
                    <div style="display:flex;gap:10px;justify-content:center;flex-wrap:wrap;" id="comboFilters">
                        <button class="combo-filter active" data-risk="all" style="padding:8px 16px;border-radius:20px;border:1px solid #333;background:#1a1a2e;color:#fff;cursor:pointer;" data-i18n="filter_all">All</button>
                        <button class="combo-filter" data-risk="Low" style="padding:8px 16px;border-radius:20px;border:1px solid #00ff88;background:transparent;color:#00ff88;cursor:pointer;" data-i18n="filter_risk_low">üü¢ Low</button>
                        <button class="combo-filter" data-risk="Medium" style="padding:8px 16px;border-radius:20px;border:1px solid #ffaa00;background:transparent;color:#ffaa00;cursor:pointer;" data-i18n="filter_risk_medium">üü° Medium</button>
                        <button class="combo-filter" data-risk="High" style="padding:8px 16px;border-radius:20px;border:1px solid #ff6464;background:transparent;color:#ff6464;cursor:pointer;" data-i18n="filter_risk_high">üî¥ High</button>
                    </div>
                </div>

                <!-- Available Balance Banner -->
                <div id="combos-balance-banner" style="background:linear-gradient(135deg,rgba(0,255,136,0.15),rgba(59,130,246,0.15));border:2px solid rgba(0,255,136,0.3);border-radius:16px;padding:20px;margin:0 20px 20px 20px;">
                    <div style="display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:15px;">
                        <div style="display:flex;align-items:center;gap:20px;flex-wrap:wrap;">
                            <div>
                                <div style="color:#888;font-size:12px;margin-bottom:4px;">üí∞ <span data-i18n="available_to_invest">Disponible √† investir</span></div>
                                <div style="font-size:28px;font-weight:700;color:#fff;"><span id="combos-total-balance">$0.00</span> <span style="font-size:14px;color:#888;">USDC</span></div>
                            </div>
                            <div style="display:flex;gap:15px;">
                                <div style="padding:10px 15px;background:rgba(168,85,247,0.2);border-radius:10px;border:1px solid rgba(168,85,247,0.3);">
                                    <div style="color:#a855f7;font-size:11px;">üéÆ <span data-i18n="simulated">SIMUL√â</span></div>
                                    <div style="color:#a855f7;font-size:18px;font-weight:600;" id="combos-sim-balance">$0.00</div>
                                </div>
                                <div style="padding:10px 15px;background:rgba(59,130,246,0.2);border-radius:10px;border:1px solid rgba(59,130,246,0.3);">
                                    <div style="color:#3b82f6;font-size:11px;">üíé <span data-i18n="real">R√âEL</span>
                                        <button onclick="CombosModule.refreshRealBalance && CombosModule.refreshRealBalance()" title="Rafra√Æchir" style="background:none;border:none;cursor:pointer;font-size:11px;padding:0 4px;">üîÑ</button>
                                    </div>
                                    <div style="color:#3b82f6;font-size:18px;font-weight:600;" id="combos-real-balance">$0.00</div>
                                </div>
                            </div>
                        </div>
                        <button onclick="SimulatedPortfolio && SimulatedPortfolio.openModal()" style="padding:10px 20px;background:linear-gradient(135deg,#a855f7,#7c3aed);border:none;border-radius:8px;color:#fff;font-weight:600;cursor:pointer;">
                            + <span data-i18n="add_funds">Ajouter fonds</span>
                        </button>
                    </div>
                </div>

                <!-- Combos Grid -->
                <div id="combosGrid" style="display:grid;grid-template-columns:repeat(auto-fill,minmax(320px,1fr));gap:20px;padding:20px;">
                    <p id="combos-loading" style="color:#888;text-align:center;grid-column:1/-1;" data-i18n="loading_combos">Loading combos...</p>
                </div>

                <!-- Invest Modal (Compact) -->
                <div id="comboInvestModal" style="display:none;position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.85);z-index:10000;align-items:center;justify-content:center;padding:10px;">
                    <div style="background:#1a1a2e;border-radius:12px;padding:20px;max-width:380px;width:95%;border:1px solid #333;margin:auto;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);">
                        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;">
                            <h3 id="modalComboTitle" style="color:#fff;margin:0;font-size:1rem;" data-i18n="invest">Invest</h3>
                            <button onclick="closeComboModal()" style="background:none;border:none;color:#888;font-size:20px;cursor:pointer;padding:0;line-height:1;">&times;</button>
                        </div>
                        <div>
                            <label style="color:#888;display:block;margin-bottom:6px;font-size:0.85rem;" data-i18n="amount_usdc">Amount (USDC)</label>
                            <input type="number" id="comboInvestAmount" min="1" value="10" step="1" style="width:100%;padding:10px;border-radius:6px;border:1px solid #333;background:#0d0d1a;color:#fff;font-size:15px;margin-bottom:10px;">
                            <div id="comboInvestPreview" style="background:#0d0d1a;border-radius:6px;padding:10px;margin-bottom:12px;">
                                <!-- Preview here -->
                            </div>
                            <!-- Current Position Display -->
                            <div id="comboCurrentPosition" style="display:flex;gap:12px;justify-content:center;margin-bottom:12px;padding:10px;background:rgba(0,0,0,0.3);border-radius:8px;">
                                <div style="text-align:center;">
                                    <span style="font-size:1.5em;">üéÆ</span>
                                    <div style="color:#a855f7;font-size:0.75em;">Simul√©</div>
                                    <div id="comboSimPosition" style="color:#a855f7;font-weight:bold;">$0.00</div>
                                </div>
                                <div style="text-align:center;">
                                    <span style="font-size:1.5em;">üíé</span>
                                    <div style="color:#3b82f6;font-size:0.75em;">R√©el</div>
                                    <div id="comboRealPosition" style="color:#3b82f6;font-weight:bold;">$0.00</div>
                                </div>
                            </div>

                            <!-- Invest Section -->
                            <div style="background:linear-gradient(135deg,rgba(0,212,170,0.1),rgba(0,212,170,0.05));border:1px solid rgba(0,212,170,0.3);border-radius:10px;padding:12px;margin-bottom:10px;">
                                <div style="color:#00d4aa;font-size:0.85em;font-weight:600;text-align:center;margin-bottom:8px;">üì• Investir</div>
                                <div style="display:flex;gap:8px;">
                                    <button onclick="CombosModule.executeInvest(true)" style="flex:1;padding:10px 8px;border-radius:6px;border:none;background:linear-gradient(135deg,#a855f7,#7c3aed);color:#fff;font-size:13px;font-weight:600;cursor:pointer;transition:all 0.2s;" onmouseover="this.style.transform='translateY(-2px)'" onmouseout="this.style.transform='none'">
                                        üéÆ SIMUL√â
                                    </button>
                                    <button onclick="CombosModule.executeInvest(false)" style="flex:1;padding:10px 8px;border-radius:6px;border:none;background:linear-gradient(135deg,#3b82f6,#1d4ed8);color:#fff;font-size:13px;font-weight:600;cursor:pointer;transition:all 0.2s;" onmouseover="this.style.transform='translateY(-2px)'" onmouseout="this.style.transform='none'">
                                        üíé R√âEL
                                    </button>
                                </div>
                            </div>

                            <!-- Withdraw Section -->
                            <div style="background:linear-gradient(135deg,rgba(255,159,67,0.1),rgba(255,159,67,0.05));border:1px solid rgba(255,159,67,0.3);border-radius:10px;padding:12px;">
                                <div style="color:#ff9f43;font-size:0.85em;font-weight:600;text-align:center;margin-bottom:8px;">üì§ Retirer</div>
                                <div style="display:flex;gap:8px;">
                                    <button id="btnWithdrawComboSim" onclick="CombosModule.executeWithdraw(true)" style="flex:1;padding:10px 8px;border-radius:6px;border:1px solid rgba(168,85,247,0.5);background:linear-gradient(135deg,rgba(168,85,247,0.3),rgba(168,85,247,0.2));color:#ddd;font-size:13px;font-weight:600;cursor:pointer;transition:all 0.2s;" onmouseover="this.style.background='linear-gradient(135deg,#a855f7,#7c3aed)'" onmouseout="this.style.background='linear-gradient(135deg,rgba(168,85,247,0.3),rgba(168,85,247,0.2))'">
                                        üéÆ <span id="comboWithdrawSimAmt">(vide)</span>
                                    </button>
                                    <button id="btnWithdrawComboReal" onclick="CombosModule.executeWithdraw(false)" style="flex:1;padding:10px 8px;border-radius:6px;border:1px solid rgba(59,130,246,0.5);background:linear-gradient(135deg,rgba(59,130,246,0.3),rgba(59,130,246,0.2));color:#ddd;font-size:13px;font-weight:600;cursor:pointer;transition:all 0.2s;" onmouseover="this.style.background='linear-gradient(135deg,#3b82f6,#1d4ed8)'" onmouseout="this.style.background='linear-gradient(135deg,rgba(59,130,246,0.3),rgba(59,130,246,0.2))'">
                                        üíé <span id="comboWithdrawRealAmt">(vide)</span>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Wallet Tab (Post-Quantum) -->
            <section class="tab-content" id="tab-wallet">

                <!-- Product Guide -->
                <div class="product-guide" id="wallet-guide">
                    <div class="product-guide-header" onclick="this.parentElement.classList.toggle('expanded')">
                        <div class="product-guide-title">
                            <span class="icon">üìö</span>
                            <span data-i18n="guide_wallet_title">Wallet Guide</span>
                        </div>
                        <span class="product-guide-toggle">‚ñº</span>
                    </div>
                    <div class="product-guide-content">
                        <div class="guide-section">
                            <h4 data-i18n="guide_wallet_what_title">What is the Wallet?</h4>
                            <p data-i18n="guide_wallet_what_desc">Your secure post-quantum wallet. Manage your private keys, send and receive crypto, and protect your assets with quantum-resistant cryptography.</p>
                        </div>
                        <div class="guide-section">
                            <h4 data-i18n="guide_wallet_security_title">Post-Quantum Security</h4>
                            <ul>
                                <li data-i18n="guide_wallet_kyber"><strong>CRYSTALS-Kyber:</strong> Encryption algorithm resistant to quantum attacks</li>
                                <li data-i18n="guide_wallet_dilithium"><strong>CRYSTALS-Dilithium:</strong> Post-quantum digital signatures</li>
                                <li data-i18n="guide_wallet_selfcustody"><strong>Self-Custody:</strong> Your keys stay on your device, never on our servers</li>
                                <li data-i18n="guide_wallet_recovery"><strong>Social Recovery:</strong> Recover your wallet via trusted contacts</li>
                            </ul>
                        </div>
                        <div class="guide-section">
                            <h4 data-i18n="guide_wallet_send_title">How to Send Funds?</h4>
                            <div class="guide-steps">
                                <div class="guide-step">
                                    <span class="step-number">1</span>
                                    <p data-i18n="guide_wallet_send_step1">Click "Send" and select the token to send</p>
                                </div>
                                <div class="guide-step">
                                    <span class="step-number">2</span>
                                    <p data-i18n="guide_wallet_send_step2">Enter the recipient's address (verify it twice!)</p>
                                </div>
                                <div class="guide-step">
                                    <span class="step-number">3</span>
                                    <p data-i18n="guide_wallet_send_step3">Set the amount and verify network fees</p>
                                </div>
                                <div class="guide-step">
                                    <span class="step-number">4</span>
                                    <p data-i18n="guide_wallet_send_step4">Confirm the transaction with your security method</p>
                                </div>
                            </div>
                        </div>
                        <div class="guide-warning">
                            <span class="icon">‚ö†Ô∏è</span>
                            <p data-i18n="guide_wallet_warning">NEVER share your seed phrase or private key. Obelisk will never ask for this information. Blockchain transactions are irreversible.</p>
                        </div>
                    </div>
                </div>


                <div class="wallet-container">
                    <!-- No Wallet State -->
                    <div class="wallet-empty" id="wallet-empty">
                        <div class="wallet-hero">
                            <div class="shield-icon">
                                <svg viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M32 4L8 16v16c0 14.4 10.24 27.84 24 32 13.76-4.16 24-17.6 24-32V16L32 4z" fill="url(#shield-grad)" />
                                    <path d="M32 12l-18 9v12c0 10.8 7.68 20.88 18 24 10.32-3.12 18-13.2 18-24V21l-18-9z" fill="#0a0a0f" />
                                    <path d="M28 32l-4-4-2 2 6 6 12-12-2-2-10 10z" fill="#00f0ff" />
                                    <defs>
                                        <linearGradient id="shield-grad" x1="32" y1="4" x2="32" y2="52" gradientUnits="userSpaceOnUse">
                                            <stop stop-color="#00f0ff" />
                                            <stop offset="1" stop-color="#0080ff" />
                                        </linearGradient>
                                    </defs>
                                </svg>
                            </div>
                            <h2 data-i18n="post_quantum_wallet">Post-Quantum Secure Wallet</h2>
                            <p class="hero-subtitle" data-i18n="wallet_hero_subtitle">Your keys never leave your device. Protected against quantum computers.</p>
                            <div class="security-badges">
                                <span class="badge">üîê CRYSTALS-Kyber</span>
                                <span class="badge">√¢≈ì¬ç√Ø¬∏¬è CRYSTALS-Dilithium</span>
                                <span class="badge">üå≥ SPHINCS+</span>
                                <span class="badge">üõ°Ô∏è¬è AES-256-GCM</span>
                                <span class="badge">üîë Argon2id</span>
                                <span class="badge">üíª Stealth Addresses</span>
                                <span class="badge">üîÄ Private Transactions</span>
                            </div>
                        </div>
                        <div class="wallet-actions">
                            <button type="button" class="btn-primary btn-create" id="btn-create-wallet">
                                <span class="btn-icon">‚ú®</span>
                                <span data-i18n="create_new_wallet">Create New Wallet</span>
                            </button>
                            <button type="button" class="btn-secondary btn-import" id="btn-import-wallet">
                                <span class="btn-icon">üî•</span>
                                <span data-i18n="import_existing_wallet">Import Existing Wallet</span>
                            </button>
                            <button type="button" class="btn-secondary btn-connect-external" id="btn-connect-external">
                                <span class="btn-icon">üîó</span>
                                <span data-i18n="connect_external_wallet">Connect External Wallet</span>
                            </button>
                        </div>
                        <div class="privacy-notice">
                            <div class="notice-icon">‚ÑπÔ∏è¬è</div>
                            <div class="notice-text">
                                <strong data-i18n="zero_knowledge_architecture">Zero-Knowledge Architecture</strong>
                                <p data-i18n="zero_knowledge_desc">Obelisk never stores your keys, seeds, or personal data. Everything is encrypted locally on your device with your password. We cannot access your funds - even if compelled by law.</p>
                            </div>
                        </div>
                    </div>

                    <!-- Wallet Connected State -->
                    <div class="wallet-connected" id="wallet-connected" style="display:none;">
                        <div class="wallet-header-section">
                            <div class="wallet-info">
                                <div class="wallet-address-display">
                                    <span class="address-label" data-i18n="address">Address</span>
                                    <div class="address-row">
                                        <span class="address" id="wallet-address">0x1234...5678</span>
                                        <button type="button" class="btn-copy" id="btn-copy-address">üìã</button>
                                    </div>
                                </div>
                                <div class="wallet-security-status">
                                    <span class="security-icon">üõ°Ô∏è¬è</span>
                                    <span class="security-text" data-i18n="post_quantum_protected">Post-Quantum Protected</span>
                                </div>
                            </div>
                            <div class="wallet-balance-card">
                                <span class="balance-label" data-i18n="total_balance">Total Balance</span>
                                <span class="balance-value" id="total-balance">$0.00</span>
                            </div>
                        </div>

                        <!-- Welcome Message for New Users -->
                        <div class="wallet-welcome-banner" id="wallet-welcome-banner">
                            <div class="welcome-icon">üöÄ</div>
                            <div class="welcome-content">
                                <span class="welcome-title" data-i18n="welcome_title">Welcome to Obelisk DEX!</span>
                                <span class="welcome-text" data-i18n="welcome_text">Start by depositing 1 USDC to trade and invest securely.</span>
                            </div>
                            <button type="button" class="btn-deposit-now" id="btn-deposit-welcome" data-i18n="deposit">Deposit</button>
                        </div>

                        <div class="collapsible-panel" data-panel-id="panel-assets">
                            <div class="panel-header">
                                <div class="panel-title">
                                    <span class="panel-title-icon">üí∞</span>
                                    <span data-i18n="assets">Assets</span>
                                </div>
                                <div class="panel-toggle"><span class="chevron">‚ñº</span></div>
                            </div>
                            <div class="panel-content">
                        <div class="wallet-assets">
                            <div class="assets-header">
                                <h3 data-i18n="assets">Assets</h3>
                                <button type="button" class="btn-refresh" id="btn-refresh-balances" title="Refresh" data-i18n-title="refresh">‚Üª</button>
                            </div>
                            <div class="assets-list" id="assets-list">
                                <div class="asset-item">
                                    <div class="asset-info">
                                        <div class="asset-icon">√é≈æ</div>
                                        <div class="asset-details">
                                            <span class="asset-name">Ethereum</span>
                                            <span class="asset-symbol">ETH</span>
                                        </div>
                                    </div>
                                    <div class="asset-balance">
                                        <span class="asset-amount">0.00</span>
                                        <span class="asset-value">$0.00</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                            </div>
                        </div>

                        <div class="wallet-actions-connected">
                            <button type="button" class="btn-action" id="btn-send" onclick="WalletActions.send()">
                                <span>üì§</span> <span data-i18n="send">Send</span>
                            </button>
                            <button type="button" class="btn-action" id="btn-send-private" onclick="WalletActions.sendPrivate()">
                                <span>üîí</span> <span data-i18n="private_send">Private Send</span>
                            </button>
                            <button type="button" class="btn-action" id="btn-receive" onclick="WalletActions.receive()">
                                <span>üì•</span> <span data-i18n="receive">Receive</span>
                            </button>
                            <button type="button" class="btn-action" id="btn-stealth" onclick="WalletActions.stealthAddress()">
                                <span>üé≠</span> <span data-i18n="stealth_address">Stealth Address</span>
                            </button>
                            <button type="button" class="btn-action" id="btn-backup" onclick="WalletActions.backup()">
                                <span>üíæ</span> <span data-i18n="backup">Backup</span>
                            </button>
                        </div>

                        <!-- Privacy Features -->
                        <div class="collapsible-panel" data-panel-id="panel-privacy">
                            <div class="panel-header">
                                <div class="panel-title">
                                    <span class="panel-title-icon">üëª</span>
                                    <span data-i18n="privacy_features">Privacy Features</span>
                                </div>
                                <div class="panel-toggle"><span class="chevron">‚ñº</span></div>
                            </div>
                            <div class="panel-content">
                        <div class="privacy-features">
                            <div class="privacy-grid">
                                <div class="privacy-card">
                                    <div class="privacy-icon">üíª</div>
                                    <h4 data-i18n="stealth_addresses">Stealth Addresses</h4>
                                    <p data-i18n="stealth_addresses_desc">Generate one-time addresses for each payment. Impossible to link.</p>
                                    <span class="meta-address" id="meta-address" data-i18n="not_available">Not available</span>
                                    <button type="button" class="btn-copy-meta" id="btn-copy-meta" data-i18n="copy_meta_address">Copy Meta-Address</button>
                                </div>
                                <div class="privacy-card">
                                    <div class="privacy-icon">üîÄ</div>
                                    <h4 data-i18n="private_transactions">Private Transactions</h4>
                                    <p data-i18n="private_transactions_desc">Mix your transactions through privacy pools.</p>
                                    <div class="privacy-stats">
                                        <span data-i18n="pool_balance">Pool Balance: $2.4M</span>
                                        <span data-i18n="anonymity_set">Anonymity Set: 1,247</span>
                                    </div>
                                    <button type="button" class="btn-mix" id="btn-deposit-pool" data-i18n="deposit_to_pool">Deposit to Pool</button>
                                </div>
                                <div class="privacy-card">
                                    <div class="privacy-icon">üîê</div>
                                    <h4 data-i18n="post_quantum_signatures">Post-Quantum Signatures</h4>
                                    <p data-i18n="post_quantum_signatures_desc">All transactions signed with quantum-resistant algorithms.</p>
                                    <div class="algo-list">
                                        <span class="algo-badge">Dilithium3</span>
                                        <span class="algo-badge">SPHINCS+-256f</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            
            <!-- Investments Tab -->
            <section class="tab-content" id="tab-investments">
                <div id="investments-guide-container"></div>
                <!-- Available Balance Banner -->
                <div id="investments-balance-banner" style="background:linear-gradient(135deg,rgba(0,255,136,0.15),rgba(59,130,246,0.15));border:2px solid rgba(0,255,136,0.3);border-radius:16px;padding:20px;margin-bottom:20px;">
                    <div style="display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:15px;">
                        <div style="display:flex;align-items:center;gap:20px;flex-wrap:wrap;">
                            <div>
                                <div style="color:#888;font-size:12px;margin-bottom:4px;">üí∞ <span data-i18n="available_to_invest">Disponible √† investir</span></div>
                                <div style="font-size:28px;font-weight:700;color:#fff;"><span id="investments-total-balance">$0.00</span> <span style="font-size:14px;color:#888;">USDC</span></div>
                            </div>
                            <div style="display:flex;gap:15px;">
                                <div style="padding:10px 15px;background:rgba(168,85,247,0.2);border-radius:10px;border:1px solid rgba(168,85,247,0.3);">
                                    <div style="color:#a855f7;font-size:11px;">üéÆ <span data-i18n="simulated">SIMUL√â</span></div>
                                    <div style="color:#a855f7;font-size:18px;font-weight:600;" id="invest-sim-balance">$0.00</div>
                                    <div style="color:#a855f7;font-size:10px;margin-top:2px;"><span id="invest-sim-products">0</span> <span data-i18n="products">produits</span></div>
                                </div>
                                <div style="padding:10px 15px;background:rgba(59,130,246,0.2);border-radius:10px;border:1px solid rgba(59,130,246,0.3);">
                                    <div style="color:#3b82f6;font-size:11px;">üíé <span data-i18n="real">R√âEL</span>
                                        <button onclick="InvestmentsUI.refreshRealBalance && InvestmentsUI.refreshRealBalance()" title="Rafra√Æchir" style="background:none;border:none;cursor:pointer;font-size:11px;padding:0 4px;">üîÑ</button>
                                    </div>
                                    <div style="color:#3b82f6;font-size:18px;font-weight:600;" id="invest-real-balance">$0.00</div>
                                    <div style="color:#3b82f6;font-size:10px;margin-top:2px;"><span id="invest-real-products">0</span> <span data-i18n="products">produits</span></div>
                                </div>
                            </div>
                        </div>
                        <div style="display:flex;gap:8px;flex-wrap:wrap;">
                            <button onclick="PortfolioFix.addSimulated(100)" style="padding:8px 14px;background:rgba(0,255,136,0.2);border:1px solid rgba(0,255,136,0.4);border-radius:8px;color:#00ff88;font-weight:600;cursor:pointer;font-size:12px;">+$100</button>
                            <button onclick="PortfolioFix.addSimulated(1000)" style="padding:8px 14px;background:rgba(0,255,136,0.2);border:1px solid rgba(0,255,136,0.4);border-radius:8px;color:#00ff88;font-weight:600;cursor:pointer;font-size:12px;">+$1K</button>
                            <button onclick="SimulatedPortfolio && SimulatedPortfolio.openModal()" style="padding:10px 20px;background:linear-gradient(135deg,#a855f7,#7c3aed);border:none;border-radius:8px;color:#fff;font-weight:600;cursor:pointer;">
                                + <span data-i18n="add_funds">Ajouter fonds</span>
                            </button>
                        </div>
                    </div>
                </div>
                <div id="investments-content"></div>
            </section>

            
            <!-- Products Hub Tab -->
            <section class="tab-content" id="tab-products">
                <div style="padding:20px;">
                    <h2 style="color:#fff;margin-bottom:20px;font-size:1.5rem;" data-i18n="defi_products_hub">DeFi Products Hub</h2>

                    <!-- Available Balance Banner -->
                    <div id="products-balance-banner" style="background:linear-gradient(135deg,rgba(0,255,136,0.15),rgba(59,130,246,0.15));border:2px solid rgba(0,255,136,0.3);border-radius:16px;padding:20px;margin-bottom:20px;">
                        <div style="display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:15px;">
                            <div style="display:flex;align-items:center;gap:20px;flex-wrap:wrap;">
                                <div>
                                    <div style="color:#888;font-size:12px;margin-bottom:4px;">üí∞ <span data-i18n="available_to_invest">Disponible √† investir</span></div>
                                    <div style="font-size:28px;font-weight:700;color:#fff;"><span id="products-total-balance">$0.00</span> <span style="font-size:14px;color:#888;">USDC</span></div>
                                </div>
                                <div style="display:flex;gap:15px;">
                                    <div style="padding:10px 15px;background:rgba(168,85,247,0.2);border-radius:10px;border:1px solid rgba(168,85,247,0.3);">
                                        <div style="color:#a855f7;font-size:11px;">üéÆ <span data-i18n="simulated">SIMUL√â</span></div>
                                        <div style="color:#a855f7;font-size:18px;font-weight:600;" id="products-sim-balance">$0.00</div>
                                        <div style="color:#a855f7;font-size:10px;margin-top:2px;"><span id="products-sim-products">0</span> <span data-i18n="products">produits</span></div>
                                    </div>
                                    <div style="padding:10px 15px;background:rgba(59,130,246,0.2);border-radius:10px;border:1px solid rgba(59,130,246,0.3);">
                                        <div style="color:#3b82f6;font-size:11px;">üíé <span data-i18n="real">R√âEL</span></div>
                                        <div style="color:#3b82f6;font-size:18px;font-weight:600;" id="products-real-balance">$0.00</div>
                                        <div style="color:#3b82f6;font-size:10px;margin-top:2px;"><span id="products-real-products">0</span> <span data-i18n="products">produits</span></div>
                                    </div>
                                </div>
                            </div>
                            <button onclick="SimulatedPortfolio && SimulatedPortfolio.openModal()" style="padding:10px 20px;background:linear-gradient(135deg,#a855f7,#7c3aed);border:none;border-radius:8px;color:#fff;font-weight:600;cursor:pointer;">
                                + <span data-i18n="add_funds">Ajouter fonds</span>
                            </button>
                        </div>
                    </div>

                    <!-- Search & Filter Bar -->
                    <div id="products-filter-bar" style="background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:12px;padding:16px;margin-bottom:20px;">
                        <div style="display:flex;flex-wrap:wrap;gap:12px;align-items:center;">
                            <!-- Search -->
                            <div style="flex:1;min-width:200px;">
                                <input type="text" id="product-search" placeholder="üîç Rechercher un produit..."
                                    style="width:100%;padding:10px 14px;background:rgba(0,0,0,0.3);border:1px solid rgba(255,255,255,0.2);border-radius:8px;color:#fff;font-size:14px;"
                                    oninput="ProductFilter.search(this.value)">
                            </div>
                            <!-- Budget Filter -->
                            <div style="min-width:150px;">
                                <select id="product-budget-filter" onchange="ProductFilter.filterByBudget(this.value)"
                                    style="width:100%;padding:10px 14px;background:rgba(0,0,0,0.3);border:1px solid rgba(255,255,255,0.2);border-radius:8px;color:#fff;font-size:14px;cursor:pointer;">
                                    <option value="all" data-i18n="all_budgets">Tous budgets</option>
                                    <option value="10">‚â§ $10</option>
                                    <option value="50">‚â§ $50</option>
                                    <option value="100">‚â§ $100</option>
                                    <option value="500">‚â§ $500</option>
                                    <option value="1000">‚â§ $1,000</option>
                                </select>
                            </div>
                            <!-- Category Filter -->
                            <div style="min-width:150px;">
                                <select id="product-category-filter" onchange="ProductFilter.filterByCategory(this.value)"
                                    style="width:100%;padding:10px 14px;background:rgba(0,0,0,0.3);border:1px solid rgba(255,255,255,0.2);border-radius:8px;color:#fff;font-size:14px;cursor:pointer;">
                                    <option value="all" data-i18n="all_categories">Toutes cat√©gories</option>
                                    <option value="yield" data-i18n="cat_yield">√âpargne & Rendement</option>
                                    <option value="liquidity" data-i18n="cat_liquidity">Liquidit√©</option>
                                    <option value="trading" data-i18n="cat_trading">Trading & D√©riv√©s</option>
                                    <option value="structured" data-i18n="cat_structured">Produits Structur√©s</option>
                                    <option value="rwa" data-i18n="cat_rwa">Actifs R√©els</option>
                                    <option value="advanced" data-i18n="cat_advanced">Avanc√©</option>
                                </select>
                            </div>
                            <!-- Sort -->
                            <div style="min-width:140px;">
                                <select id="product-sort" onchange="ProductFilter.sort(this.value)"
                                    style="width:100%;padding:10px 14px;background:rgba(0,0,0,0.3);border:1px solid rgba(255,255,255,0.2);border-radius:8px;color:#fff;font-size:14px;cursor:pointer;">
                                    <option value="default" data-i18n="sort_default">Tri par d√©faut</option>
                                    <option value="apy-desc" data-i18n="sort_apy_high">APY ‚Üë</option>
                                    <option value="apy-asc" data-i18n="sort_apy_low">APY ‚Üì</option>
                                    <option value="risk-asc" data-i18n="sort_risk_low">Risque ‚Üì</option>
                                    <option value="risk-desc" data-i18n="sort_risk_high">Risque ‚Üë</option>
                                    <option value="budget-asc" data-i18n="sort_budget_low">Budget ‚Üì</option>
                                </select>
                            </div>
                            <!-- Reset -->
                            <button onclick="ProductFilter.reset()" style="padding:10px 16px;background:rgba(255,255,255,0.1);border:1px solid rgba(255,255,255,0.2);border-radius:8px;color:#fff;cursor:pointer;font-size:13px;">
                                ‚Ü∫ <span data-i18n="reset_filters">Reset</span>
                            </button>
                        </div>
                        <!-- Active filters count -->
                        <div id="filter-results" style="margin-top:10px;color:#888;font-size:12px;display:none;">
                            <span id="filter-count">0</span> <span data-i18n="products_found">produits trouv√©s</span>
                        </div>
                    </div>

                    <!-- Category: Yield -->
                    <div class="product-category" data-category="yield" style="margin-bottom:30px;">
                        <h3 style="color:#00ff88;margin-bottom:15px;font-size:1.1rem;" data-i18n="yield_savings">Yield & Savings</h3>
                        <div style="display:grid;grid-template-columns:repeat(auto-fill,minmax(180px,1fr));gap:12px;">
                            <div class="product-card" onclick="StakingModule.render('product-modal-content');document.getElementById('product-modal').style.display='flex'" style="background:linear-gradient(135deg,rgba(0,255,136,0.1),rgba(0,200,100,0.05));border:1px solid rgba(0,255,136,0.3);border-radius:12px;padding:16px;cursor:pointer;transition:all 0.3s;">
                                <div style="font-size:24px;margin-bottom:8px;">ü•©</div>
                                <div style="color:#fff;font-weight:600;font-size:14px;" data-i18n="product_staking">Staking</div>
                                <div style="color:#888;font-size:11px;">ETH, SOL, AVAX...</div>
                            </div>
                            <div class="product-card" onclick="SavingsModule.render('product-modal-content');document.getElementById('product-modal').style.display='flex'" style="background:linear-gradient(135deg,rgba(0,255,136,0.1),rgba(0,200,100,0.05));border:1px solid rgba(0,255,136,0.3);border-radius:12px;padding:16px;cursor:pointer;transition:all 0.3s;">
                                <div style="font-size:24px;margin-bottom:8px;">üí∞</div>
                                <div style="color:#fff;font-weight:600;font-size:14px;" data-i18n="product_savings">Savings</div>
                                <div style="color:#888;font-size:11px;" data-i18n="product_savings_desc">Fixed & Flexible</div>
                            </div>
                            <div class="product-card" onclick="VaultsModule.render('product-modal-content');document.getElementById('product-modal').style.display='flex'" style="background:linear-gradient(135deg,rgba(0,255,136,0.1),rgba(0,200,100,0.05));border:1px solid rgba(0,255,136,0.3);border-radius:12px;padding:16px;cursor:pointer;transition:all 0.3s;">
                                <div style="font-size:24px;margin-bottom:8px;">üèõÔ∏è</div>
                                <div style="color:#fff;font-weight:600;font-size:14px;" data-i18n="product_vaults">Vaults</div>
                                <div style="color:#888;font-size:11px;" data-i18n="product_vaults_desc">Auto-compound</div>
                            </div>
                            <div class="product-card" onclick="YieldFarmingModule.render('product-modal-content');document.getElementById('product-modal').style.display='flex'" style="background:linear-gradient(135deg,rgba(0,255,136,0.1),rgba(0,200,100,0.05));border:1px solid rgba(0,255,136,0.3);border-radius:12px;padding:16px;cursor:pointer;transition:all 0.3s;">
                                <div style="font-size:24px;margin-bottom:8px;">üåæ</div>
                                <div style="color:#fff;font-weight:600;font-size:14px;" data-i18n="product_yield_farming">Yield Farming</div>
                                <div style="color:#888;font-size:11px;" data-i18n="product_yield_farming_desc">Multi-protocol</div>
                            </div>
                        </div>
                    </div>

                    <!-- Category: Liquidity -->
                    <div class="product-category" data-category="liquidity" style="margin-bottom:30px;">
                        <h3 style="color:#3b82f6;margin-bottom:15px;font-size:1.1rem;" data-i18n="liquidity_pools_cat">Liquidity & Pools</h3>
                        <div style="display:grid;grid-template-columns:repeat(auto-fill,minmax(180px,1fr));gap:12px;">
                            <div class="product-card" onclick="LiquidityPoolsModule.render('product-modal-content');document.getElementById('product-modal').style.display='flex'" style="background:linear-gradient(135deg,rgba(59,130,246,0.1),rgba(59,130,246,0.05));border:1px solid rgba(59,130,246,0.3);border-radius:12px;padding:16px;cursor:pointer;transition:all 0.3s;">
                                <div style="font-size:24px;margin-bottom:8px;">üåä</div>
                                <div style="color:#fff;font-weight:600;font-size:14px;" data-i18n="product_liquidity_pools">Liquidity Pools</div>
                                <div style="color:#888;font-size:11px;" data-i18n="product_liquidity_pools_desc">Provide LP</div>
                            </div>
                            <div class="product-card" onclick="LendingModule.render('product-modal-content');document.getElementById('product-modal').style.display='flex'" style="background:linear-gradient(135deg,rgba(59,130,246,0.1),rgba(59,130,246,0.05));border:1px solid rgba(59,130,246,0.3);border-radius:12px;padding:16px;cursor:pointer;transition:all 0.3s;">
                                <div style="font-size:24px;margin-bottom:8px;">üè¶</div>
                                <div style="color:#fff;font-weight:600;font-size:14px;" data-i18n="product_lending">Lending</div>
                                <div style="color:#888;font-size:11px;" data-i18n="product_lending_desc">Supply & Borrow</div>
                            </div>
                        </div>
                    </div>

                    <!-- Category: Trading -->
                    <div class="product-category" data-category="trading" style="margin-bottom:30px;">
                        <h3 style="color:#f59e0b;margin-bottom:15px;font-size:1.1rem;" data-i18n="trading_derivatives">Trading & Derivatives</h3>
                        <div style="display:grid;grid-template-columns:repeat(auto-fill,minmax(180px,1fr));gap:12px;">
                            <div class="product-card" onclick="PerpetualsModule.render('product-modal-content');document.getElementById('product-modal').style.display='flex'" style="background:linear-gradient(135deg,rgba(245,158,11,0.1),rgba(245,158,11,0.05));border:1px solid rgba(245,158,11,0.3);border-radius:12px;padding:16px;cursor:pointer;transition:all 0.3s;">
                                <div style="font-size:24px;margin-bottom:8px;">üìà</div>
                                <div style="color:#fff;font-weight:600;font-size:14px;" data-i18n="product_perpetuals">Perpetuals</div>
                                <div style="color:#888;font-size:11px;" data-i18n="product_perpetuals_desc">Up to 100x</div>
                            </div>
                            <div class="product-card" onclick="OptionsModule.render('product-modal-content');document.getElementById('product-modal').style.display='flex'" style="background:linear-gradient(135deg,rgba(245,158,11,0.1),rgba(245,158,11,0.05));border:1px solid rgba(245,158,11,0.3);border-radius:12px;padding:16px;cursor:pointer;transition:all 0.3s;">
                                <div style="font-size:24px;margin-bottom:8px;">üéØ</div>
                                <div style="color:#fff;font-weight:600;font-size:14px;" data-i18n="product_options">Options</div>
                                <div style="color:#888;font-size:11px;" data-i18n="product_options_desc">Calls & Puts</div>
                            </div>
                            <div class="product-card" onclick="DerivativesModule.render('product-modal-content');document.getElementById('product-modal').style.display='flex'" style="background:linear-gradient(135deg,rgba(245,158,11,0.1),rgba(245,158,11,0.05));border:1px solid rgba(245,158,11,0.3);border-radius:12px;padding:16px;cursor:pointer;transition:all 0.3s;">
                                <div style="font-size:24px;margin-bottom:8px;">üìâ</div>
                                <div style="color:#fff;font-weight:600;font-size:14px;" data-i18n="product_derivatives">Derivatives</div>
                                <div style="color:#888;font-size:11px;" data-i18n="product_derivatives_desc">Futures, Spreads</div>
                            </div>
                            <div class="product-card" onclick="LeveragedTokensModule.render('product-modal-content');document.getElementById('product-modal').style.display='flex'" style="background:linear-gradient(135deg,rgba(245,158,11,0.1),rgba(245,158,11,0.05));border:1px solid rgba(245,158,11,0.3);border-radius:12px;padding:16px;cursor:pointer;transition:all 0.3s;">
                                <div style="font-size:24px;margin-bottom:8px;">‚ö°</div>
                                <div style="color:#fff;font-weight:600;font-size:14px;" data-i18n="product_leveraged_tokens">Leveraged Tokens</div>
                                <div style="color:#888;font-size:11px;" data-i18n="product_leveraged_tokens_desc">2x/3x Long/Short</div>
                            </div>
                            <div class="product-card" onclick="CopyTradingModule.render('product-modal-content');document.getElementById('product-modal').style.display='flex'" style="background:linear-gradient(135deg,rgba(245,158,11,0.1),rgba(245,158,11,0.05));border:1px solid rgba(245,158,11,0.3);border-radius:12px;padding:16px;cursor:pointer;transition:all 0.3s;">
                                <div style="font-size:24px;margin-bottom:8px;">üë•</div>
                                <div style="color:#fff;font-weight:600;font-size:14px;" data-i18n="product_copy_trading">Copy Trading</div>
                                <div style="color:#888;font-size:11px;" data-i18n="product_copy_trading_desc">Follow top traders</div>
                            </div>
                            <div class="product-card" onclick="BotSimulatorModule.render('product-modal-content');document.getElementById('product-modal').style.display='flex'" style="background:linear-gradient(135deg,rgba(245,158,11,0.1),rgba(245,158,11,0.05));border:1px solid rgba(245,158,11,0.3);border-radius:12px;padding:16px;cursor:pointer;transition:all 0.3s;">
                                <div style="font-size:24px;margin-bottom:8px;">ü§ñ</div>
                                <div style="color:#fff;font-weight:600;font-size:14px;" data-i18n="product_bot_simulator">Bot Simulator</div>
                                <div style="color:#888;font-size:11px;" data-i18n="product_bot_simulator_desc">24 auto-trading bots</div>
                            </div>
                            <div class="product-card" onclick="HFTSimulatorModule.render('product-modal-content');document.getElementById('product-modal').style.display='flex'" style="background:linear-gradient(135deg,rgba(245,158,11,0.1),rgba(245,158,11,0.05));border:1px solid rgba(245,158,11,0.3);border-radius:12px;padding:16px;cursor:pointer;transition:all 0.3s;">
                                <div style="font-size:24px;margin-bottom:8px;">‚ö°</div>
                                <div style="color:#fff;font-weight:600;font-size:14px;" data-i18n="product_hft_simulator">HFT Simulator</div>
                                <div style="color:#888;font-size:11px;" data-i18n="product_hft_simulator_desc">High-frequency trading</div>
                            </div>
                            <div class="product-card" onclick="FastTradingModule.render('product-modal-content');document.getElementById('product-modal').style.display='flex'" style="background:linear-gradient(135deg,rgba(239,68,68,0.1),rgba(239,68,68,0.05));border:1px solid rgba(239,68,68,0.3);border-radius:12px;padding:16px;cursor:pointer;transition:all 0.3s;">
                                <div style="font-size:24px;margin-bottom:8px;">üöÄ</div>
                                <div style="color:#fff;font-weight:600;font-size:14px;" data-i18n="product_fast_trading">Fast Trading</div>
                                <div style="color:#888;font-size:11px;" data-i18n="product_fast_trading_desc">Academy + Real tools</div>
                            </div>
                        </div>
                    </div>

                    <!-- Category: Structured -->
                    <div class="product-category" data-category="structured" style="margin-bottom:30px;">
                        <h3 style="color:#a855f7;margin-bottom:15px;font-size:1.1rem;" data-i18n="structured_special">Structured & Special</h3>
                        <div style="display:grid;grid-template-columns:repeat(auto-fill,minmax(180px,1fr));gap:12px;">
                            <div class="product-card" onclick="StructuredModule.render('product-modal-content');document.getElementById('product-modal').style.display='flex'" style="background:linear-gradient(135deg,rgba(168,85,247,0.1),rgba(168,85,247,0.05));border:1px solid rgba(168,85,247,0.3);border-radius:12px;padding:16px;cursor:pointer;transition:all 0.3s;">
                                <div style="font-size:24px;margin-bottom:8px;">üì¶</div>
                                <div style="color:#fff;font-weight:600;font-size:14px;" data-i18n="product_structured">Structured</div>
                                <div style="color:#888;font-size:11px;" data-i18n="product_structured_desc">Shark Fin, Snowball</div>
                            </div>
                            <div class="product-card" onclick="IndexFundsModule.render('product-modal-content');document.getElementById('product-modal').style.display='flex'" style="background:linear-gradient(135deg,rgba(168,85,247,0.1),rgba(168,85,247,0.05));border:1px solid rgba(168,85,247,0.3);border-radius:12px;padding:16px;cursor:pointer;transition:all 0.3s;">
                                <div style="font-size:24px;margin-bottom:8px;">üìä</div>
                                <div style="color:#fff;font-weight:600;font-size:14px;" data-i18n="product_index_funds">Index Funds</div>
                                <div style="color:#888;font-size:11px;" data-i18n="product_index_funds_desc">DeFi, L1, Gaming...</div>
                            </div>
                            <div class="product-card" onclick="PredictionsModule.render('product-modal-content');document.getElementById('product-modal').style.display='flex'" style="background:linear-gradient(135deg,rgba(168,85,247,0.1),rgba(168,85,247,0.05));border:1px solid rgba(168,85,247,0.3);border-radius:12px;padding:16px;cursor:pointer;transition:all 0.3s;">
                                <div style="font-size:24px;margin-bottom:8px;">üîÆ</div>
                                <div style="color:#fff;font-weight:600;font-size:14px;" data-i18n="product_predictions">Predictions</div>
                                <div style="color:#888;font-size:11px;" data-i18n="product_predictions_desc">Binary markets</div>
                            </div>
                            <div class="product-card" onclick="LotteryModule.render('product-modal-content');document.getElementById('product-modal').style.display='flex'" style="background:linear-gradient(135deg,rgba(168,85,247,0.1),rgba(168,85,247,0.05));border:1px solid rgba(168,85,247,0.3);border-radius:12px;padding:16px;cursor:pointer;transition:all 0.3s;">
                                <div style="font-size:24px;margin-bottom:8px;">üé∞</div>
                                <div style="color:#fff;font-weight:600;font-size:14px;" data-i18n="product_lottery">Lottery</div>
                                <div style="color:#888;font-size:11px;" data-i18n="product_lottery_desc">Daily/Weekly jackpots</div>
                            </div>
                        </div>
                    </div>

                    <!-- Category: Real Assets -->
                    <div class="product-category" data-category="rwa" style="margin-bottom:30px;">
                        <h3 style="color:#ec4899;margin-bottom:15px;font-size:1.1rem;" data-i18n="real_world_assets">Real World Assets</h3>
                        <div style="display:grid;grid-template-columns:repeat(auto-fill,minmax(180px,1fr));gap:12px;">
                            <div class="product-card" onclick="RWAModule.render('product-modal-content');document.getElementById('product-modal').style.display='flex'" style="background:linear-gradient(135deg,rgba(236,72,153,0.1),rgba(236,72,153,0.05));border:1px solid rgba(236,72,153,0.3);border-radius:12px;padding:16px;cursor:pointer;transition:all 0.3s;">
                                <div style="font-size:24px;margin-bottom:8px;">üè¶</div>
                                <div style="color:#fff;font-weight:600;font-size:14px;" data-i18n="product_rwa">RWA</div>
                                <div style="color:#888;font-size:11px;" data-i18n="product_rwa_desc">Bonds, Real Estate, Gold</div>
                            </div>
                            <div class="product-card" onclick="InsuranceModule.render('product-modal-content');document.getElementById('product-modal').style.display='flex'" style="background:linear-gradient(135deg,rgba(236,72,153,0.1),rgba(236,72,153,0.05));border:1px solid rgba(236,72,153,0.3);border-radius:12px;padding:16px;cursor:pointer;transition:all 0.3s;">
                                <div style="font-size:24px;margin-bottom:8px;">üõ°Ô∏è</div>
                                <div style="color:#fff;font-weight:600;font-size:14px;" data-i18n="product_insurance">Insurance</div>
                                <div style="color:#888;font-size:11px;" data-i18n="product_insurance_desc">Smart contract cover</div>
                            </div>
                        </div>
                    </div>

                    <!-- Category: Launch -->
                    <div class="product-category" data-category="advanced" style="margin-bottom:30px;">
                        <h3 style="color:#22d3ee;margin-bottom:15px;font-size:1.1rem;" data-i18n="launchpad_nft">Launchpad & NFT</h3>
                        <div style="display:grid;grid-template-columns:repeat(auto-fill,minmax(180px,1fr));gap:12px;">
                            <div class="product-card" onclick="LaunchpadModule.render('product-modal-content');document.getElementById('product-modal').style.display='flex'" style="background:linear-gradient(135deg,rgba(34,211,238,0.1),rgba(34,211,238,0.05));border:1px solid rgba(34,211,238,0.3);border-radius:12px;padding:16px;cursor:pointer;transition:all 0.3s;">
                                <div style="font-size:24px;margin-bottom:8px;">üöÄ</div>
                                <div style="color:#fff;font-weight:600;font-size:14px;" data-i18n="product_launchpad">Launchpad</div>
                                <div style="color:#888;font-size:11px;" data-i18n="product_launchpad_desc">IDO/ICO</div>
                            </div>
                            <div class="product-card" onclick="NFTStakingModule.render('product-modal-content');document.getElementById('product-modal').style.display='flex'" style="background:linear-gradient(135deg,rgba(34,211,238,0.1),rgba(34,211,238,0.05));border:1px solid rgba(34,211,238,0.3);border-radius:12px;padding:16px;cursor:pointer;transition:all 0.3s;">
                                <div style="font-size:24px;margin-bottom:8px;">üñºÔ∏è</div>
                                <div style="color:#fff;font-weight:600;font-size:14px;" data-i18n="product_nft_staking">NFT Staking</div>
                                <div style="color:#888;font-size:11px;" data-i18n="product_nft_staking_desc">BAYC, Punks, Azuki</div>
                            </div>
                        </div>

                    <!-- Category: Advanced Products -->
                    <div class="product-category" data-category="advanced" style="margin-bottom:30px;">
                        <h3 style="color:#10b981;margin-bottom:15px;font-size:1.1rem;" data-i18n="advanced_products">Advanced Products</h3>
                        <div style="display:grid;grid-template-columns:repeat(auto-fill,minmax(180px,1fr));gap:12px;">
                            <div class="product-card" onclick="MarginTradingModule.render('product-modal-content');document.getElementById('product-modal').style.display='flex'" style="background:linear-gradient(135deg,rgba(16,185,129,0.1),rgba(16,185,129,0.05));border:1px solid rgba(16,185,129,0.3);border-radius:12px;padding:16px;cursor:pointer;transition:all 0.3s;">
                                <div style="font-size:24px;margin-bottom:8px;">üìä</div>
                                <div style="color:#fff;font-weight:600;font-size:14px;" data-i18n="product_margin_trading">Margin Trading</div>
                                <div style="color:#888;font-size:11px;" data-i18n="product_margin_trading_desc">Up to 10x leverage</div>
                            </div>
                            <div class="product-card" onclick="FixedIncomeModule.render('product-modal-content');document.getElementById('product-modal').style.display='flex'" style="background:linear-gradient(135deg,rgba(16,185,129,0.1),rgba(16,185,129,0.05));border:1px solid rgba(16,185,129,0.3);border-radius:12px;padding:16px;cursor:pointer;transition:all 0.3s;">
                                <div style="font-size:24px;margin-bottom:8px;">üìÖ</div>
                                <div style="color:#fff;font-weight:600;font-size:14px;" data-i18n="product_fixed_income">Fixed Income</div>
                                <div style="color:#888;font-size:11px;" data-i18n="product_fixed_income_desc">30-90 day terms</div>
                            </div>
                            <div class="product-card" onclick="CryptoBondsModule.render('product-modal-content');document.getElementById('product-modal').style.display='flex'" style="background:linear-gradient(135deg,rgba(16,185,129,0.1),rgba(16,185,129,0.05));border:1px solid rgba(16,185,129,0.3);border-radius:12px;padding:16px;cursor:pointer;transition:all 0.3s;">
                                <div style="font-size:24px;margin-bottom:8px;">üìú</div>
                                <div style="color:#fff;font-weight:600;font-size:14px;" data-i18n="product_crypto_bonds">Crypto Bonds</div>
                                <div style="color:#888;font-size:11px;" data-i18n="product_crypto_bonds_desc">AAA to BB rated</div>
                            </div>
                            <div class="product-card" onclick="ETFTokensModule.render('product-modal-content');document.getElementById('product-modal').style.display='flex'" style="background:linear-gradient(135deg,rgba(16,185,129,0.1),rgba(16,185,129,0.05));border:1px solid rgba(16,185,129,0.3);border-radius:12px;padding:16px;cursor:pointer;transition:all 0.3s;">
                                <div style="font-size:24px;margin-bottom:8px;">üìà</div>
                                <div style="color:#fff;font-weight:600;font-size:14px;" data-i18n="product_etf_tokens">ETF Tokens</div>
                                <div style="color:#888;font-size:11px;" data-i18n="product_etf_tokens_desc">DeFi, L1, AI, Gaming</div>
                            </div>
                            <div class="product-card" onclick="SocialTradingModule.render('product-modal-content');document.getElementById('product-modal').style.display='flex'" style="background:linear-gradient(135deg,rgba(16,185,129,0.1),rgba(16,185,129,0.05));border:1px solid rgba(16,185,129,0.3);border-radius:12px;padding:16px;cursor:pointer;transition:all 0.3s;">
                                <div style="font-size:24px;margin-bottom:8px;">üë•</div>
                                <div style="color:#fff;font-weight:600;font-size:14px;" data-i18n="product_social_trading">Social Trading</div>
                                <div style="color:#888;font-size:11px;" data-i18n="product_social_trading_desc">Copy top traders</div>
                            </div>
                            <div class="product-card" onclick="AlgoStrategiesModule.render('product-modal-content');document.getElementById('product-modal').style.display='flex'" style="background:linear-gradient(135deg,rgba(16,185,129,0.1),rgba(16,185,129,0.05));border:1px solid rgba(16,185,129,0.3);border-radius:12px;padding:16px;cursor:pointer;transition:all 0.3s;">
                                <div style="font-size:24px;margin-bottom:8px;">ü§ñ</div>
                                <div style="color:#fff;font-weight:600;font-size:14px;" data-i18n="product_algo_strategies">Algo Strategies</div>
                                <div style="color:#888;font-size:11px;" data-i18n="product_algo_strategies_desc">Grid, DCA, Arbitrage</div>
                            </div>
                            <div class="product-card" onclick="FlashLoansModule.render('product-modal-content');document.getElementById('product-modal').style.display='flex'" style="background:linear-gradient(135deg,rgba(16,185,129,0.1),rgba(16,185,129,0.05));border:1px solid rgba(16,185,129,0.3);border-radius:12px;padding:16px;cursor:pointer;transition:all 0.3s;">
                                <div style="font-size:24px;margin-bottom:8px;">‚ö°</div>
                                <div style="color:#fff;font-weight:600;font-size:14px;" data-i18n="product_flash_loans">Flash Loans</div>
                                <div style="color:#888;font-size:11px;" data-i18n="product_flash_loans_desc">Arbitrage, Liquidation</div>
                            </div>
                            <div class="product-card" onclick="YieldAggregatorModule.render('product-modal-content');document.getElementById('product-modal').style.display='flex'" style="background:linear-gradient(135deg,rgba(16,185,129,0.1),rgba(16,185,129,0.05));border:1px solid rgba(16,185,129,0.3);border-radius:12px;padding:16px;cursor:pointer;transition:all 0.3s;">
                                <div style="font-size:24px;margin-bottom:8px;">üîÑ</div>
                                <div style="color:#fff;font-weight:600;font-size:14px;" data-i18n="product_yield_aggregator">Yield Aggregator</div>
                                <div style="color:#888;font-size:11px;" data-i18n="product_yield_aggregator_desc">Auto-compound yields</div>
                            </div>
                            <div class="product-card" onclick="GovernanceStakingModule.render('product-modal-content');document.getElementById('product-modal').style.display='flex'" style="background:linear-gradient(135deg,rgba(16,185,129,0.1),rgba(16,185,129,0.05));border:1px solid rgba(16,185,129,0.3);border-radius:12px;padding:16px;cursor:pointer;transition:all 0.3s;">
                                <div style="font-size:24px;margin-bottom:8px;">üó≥Ô∏è</div>
                                <div style="color:#fff;font-weight:600;font-size:14px;" data-i18n="product_governance_staking">Governance Staking</div>
                                <div style="color:#888;font-size:11px;" data-i18n="product_governance_staking_desc">DAO voting power</div>
                            </div>
                            <div class="product-card" onclick="LiquidationPoolsModule.render('product-modal-content');document.getElementById('product-modal').style.display='flex'" style="background:linear-gradient(135deg,rgba(16,185,129,0.1),rgba(16,185,129,0.05));border:1px solid rgba(16,185,129,0.3);border-radius:12px;padding:16px;cursor:pointer;transition:all 0.3s;">
                                <div style="font-size:24px;margin-bottom:8px;">üíß</div>
                                <div style="color:#fff;font-weight:600;font-size:14px;" data-i18n="product_liquidation_pools">Liquidation Pools</div>
                                <div style="color:#888;font-size:11px;" data-i18n="product_liquidation_pools_desc">Earn liquidation bonus</div>
                            </div>
                        </div>
                    </div>
                    </div>
                </div>

                <!-- Product Modal -->
                <div id="product-modal" style="display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.8);z-index:9999;justify-content:center;align-items:center;" onclick="if(event.target===this)this.style.display='none'">
                    <div style="background:#1a1a2e;border-radius:16px;padding:24px;max-width:800px;max-height:80vh;overflow-y:auto;margin:20px;width:calc(100% - 40px);">
                        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;">
                            <span style="color:#888;font-size:12px;" data-i18n="product_details">Product Details</span>
                            <button onclick="document.getElementById('product-modal').style.display='none'" style="background:none;border:none;color:#fff;font-size:20px;cursor:pointer;">‚úï</button>
                        </div>
                        <div id="product-modal-content"></div>
                    </div>
                </div>
            </section>

            <!-- Portfolio Tab -->
            <section class="tab-content" id="tab-portfolio">

                <!-- Product Guide -->
                <div class="product-guide" id="portfolio-guide">
                    <div class="product-guide-header" onclick="this.parentElement.classList.toggle('expanded')">
                        <div class="product-guide-title">
                            <span class="icon">üìö</span>
                            <span data-i18n="guide_portfolio_title">Portfolio Guide</span>
                        </div>
                        <span class="product-guide-toggle">‚ñº</span>
                    </div>
                    <div class="product-guide-content">
                        <div class="guide-section">
                            <h4 data-i18n="guide_portfolio_what_title">What is the Portfolio?</h4>
                            <p data-i18n="guide_portfolio_what_desc">Your centralized dashboard to view all your assets, track your performance, and analyze your trading history in one place.</p>
                        </div>
                        <div class="guide-section">
                            <h4 data-i18n="guide_portfolio_sections_title">Portfolio Sections</h4>
                            <ul>
                                <li data-i18n="guide_portfolio_overview"><strong>Overview:</strong> Total value, overall P&amp;L, and asset allocation</li>
                                <li data-i18n="guide_portfolio_assets"><strong>Assets:</strong> Detailed list of all your tokens and their current value</li>
                                <li data-i18n="guide_portfolio_positions"><strong>Positions:</strong> Your open trading positions and their performance</li>
                                <li data-i18n="guide_portfolio_history"><strong>History:</strong> Complete history of your transactions and trades</li>
                                <li data-i18n="guide_portfolio_analytics"><strong>Analytics:</strong> Performance charts, drawdown, and advanced metrics</li>
                            </ul>
                        </div>
                        <div class="guide-section">
                            <h4 data-i18n="guide_portfolio_performance_title">How to Read Your Performance?</h4>
                            <div class="guide-steps">
                                <div class="guide-step">
                                    <span class="step-number">1</span>
                                    <p data-i18n="guide_portfolio_pnl"><strong>Total P&amp;L:</strong> Cumulative profit or loss since the beginning</p>
                                </div>
                                <div class="guide-step">
                                    <span class="step-number">2</span>
                                    <p data-i18n="guide_portfolio_winrate"><strong>Win Rate:</strong> Percentage of winning trades</p>
                                </div>
                                <div class="guide-step">
                                    <span class="step-number">3</span>
                                    <p data-i18n="guide_portfolio_drawdown"><strong>Drawdown:</strong> Maximum loss from a peak (risk indicator)</p>
                                </div>
                                <div class="guide-step">
                                    <span class="step-number">4</span>
                                    <p data-i18n="guide_portfolio_sharpe"><strong>Sharpe Ratio:</strong> Risk-adjusted return (>1 = good)</p>
                                </div>
                            </div>
                        </div>
                        <div class="guide-warning">
                            <span class="icon">üí°</span>
                            <p data-i18n="guide_portfolio_tip">Export your history as CSV for tax declarations. Data is available in the History section.</p>
                        </div>
                    </div>
                </div>


                <!-- Simulated Capital Deposit Panel -->
                <div class="simulated-deposit-panel" id="simulated-deposit-panel" style="background:linear-gradient(135deg,rgba(0,255,136,0.1),rgba(139,92,246,0.1));border:1px solid rgba(0,255,136,0.3);border-radius:16px;padding:20px;margin-bottom:20px;">
                    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;">
                        <h3 style="margin:0;color:#00ff88;font-size:16px;" data-i18n="deposit_simulated_capital">Deposit Simulated Capital</h3>
                        <span style="font-size:12px;color:#888;" data-i18n="demo_mode">Demo mode</span>
                    </div>
                    <div style="display:flex;gap:10px;flex-wrap:wrap;margin-bottom:12px;">
                        <button onclick="SimulatedPortfolio.portfolio.simulatedBalance+=100;SimulatedPortfolio.saveState();SimulatedPortfolio.updateUI();showNotification('+$100','success')" style="padding:12px 20px;background:rgba(0,255,136,0.2);border:1px solid rgba(0,255,136,0.4);border-radius:10px;color:#00ff88;font-weight:700;cursor:pointer;">+$100</button>
                        <button onclick="SimulatedPortfolio.portfolio.simulatedBalance+=1000;SimulatedPortfolio.saveState();SimulatedPortfolio.updateUI();showNotification('+$1K','success')" style="padding:12px 20px;background:rgba(0,255,136,0.2);border:1px solid rgba(0,255,136,0.4);border-radius:10px;color:#00ff88;font-weight:700;cursor:pointer;">+$1K</button>
                        <button onclick="SimulatedPortfolio.portfolio.simulatedBalance+=10000;SimulatedPortfolio.saveState();SimulatedPortfolio.updateUI();showNotification('+$10K','success')" style="padding:12px 20px;background:rgba(0,255,136,0.2);border:1px solid rgba(0,255,136,0.4);border-radius:10px;color:#00ff88;font-weight:700;cursor:pointer;">+$10K</button>
                        <button onclick="SimulatedPortfolio.portfolio.simulatedBalance+=100000;SimulatedPortfolio.saveState();SimulatedPortfolio.updateUI();showNotification('+$100K','success')" style="padding:12px 20px;background:rgba(139,92,246,0.2);border:1px solid rgba(139,92,246,0.4);border-radius:10px;color:#a855f7;font-weight:700;cursor:pointer;">+$100K</button>
                    </div>
                </div>

                <div class="portfolio-container">
                    <!-- SIMULATED Portfolio -->
                    <div class="portfolio-summary" style="margin-bottom:8px;">
                        <div class="summary-card" style="border-left:3px solid #a855f7;">
                            <span class="card-label" style="color:#a855f7;">üéÆ Simulated</span>
                            <span class="card-value" id="portfolio-total-sim">$0.00</span>
                            <span class="card-change positive" id="portfolio-change-sim">+0.00%</span>
                        </div>
                        <div class="summary-card" style="border-left:3px solid #a855f7;">
                            <span class="card-label" style="color:#a855f7;">PnL Sim</span>
                            <span class="card-value" id="portfolio-pnl-sim">$0.00</span>
                        </div>
                        <div class="summary-card" style="border-left:3px solid #a855f7;">
                            <span class="card-label" style="color:#a855f7;">Pos. Sim</span>
                            <span class="card-value" id="portfolio-positions-sim">0</span>
                        </div>
                    </div>
                    <!-- REAL Portfolio -->
                    <div class="portfolio-summary" style="margin-bottom:12px;">
                        <div class="summary-card" style="border-left:3px solid #3b82f6;">
                            <span class="card-label" style="color:#3b82f6;">üíé Real</span>
                            <span class="card-value" id="portfolio-total-real">$0.00</span>
                            <span class="card-change positive" id="portfolio-change-real">+0.00%</span>
                        </div>
                        <div class="summary-card" style="border-left:3px solid #3b82f6;">
                            <span class="card-label" style="color:#3b82f6;">PnL Real</span>
                            <span class="card-value" id="portfolio-pnl-real">$0.00</span>
                        </div>
                        <div class="summary-card" style="border-left:3px solid #3b82f6;">
                            <span class="card-label" style="color:#3b82f6;">Pos. Real</span>
                            <span class="card-value" id="portfolio-positions-real">0</span>
                        </div>
                    </div>
                    <!-- Hidden elements for backward compatibility -->
                    <span id="portfolio-total" style="display:none;">$0.00</span>
                    <span id="portfolio-pnl" style="display:none;">$0.00</span>
                    <span id="portfolio-positions" style="display:none;">0</span>
                    </div>

                    <!-- Open Positions List -->
                    <div class="collapsible-panel" data-panel-id="panel-positions" style="margin-bottom:20px;">
                        <div class="panel-header">
                            <div class="panel-title">
                                <span class="panel-title-icon">üìã</span>
                                <span data-i18n="open_positions">Open Positions</span>
                            </div>
                            <div class="panel-toggle"><span class="chevron">‚ñº</span></div>
                        </div>
                        <div class="panel-content">
                            <div id="portfolio-positions-list" style="padding:10px;">
                                <div class="positions-empty" style="text-align:center;color:#888;padding:20px;">
                                    <span data-i18n="no_open_positions">No open positions</span>
                                    <p style="font-size:12px;margin-top:8px;" data-i18n="invest_to_see_positions">Invest to see your positions here</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="collapsible-panel" data-panel-id="panel-portfolio-chart">
                        <div class="panel-header">
                            <div class="panel-title">
                                <span class="panel-title-icon">üìà</span>
                                <span data-i18n="performance_chart">Performance Chart</span>
                            </div>
                            <div class="panel-toggle"><span class="chevron">‚ñº</span></div>
                        </div>
                        <div class="panel-content">
                    <div class="portfolio-chart" id="portfolio-chart-container">
                        <!-- Performance Chart will be injected here by portfolio-performance-chart.js -->
                        <div id="portfolio-chart-area" style="min-height:180px;margin-bottom:16px;"></div>

                        <!-- PnL Stats Panel will be injected here by pnl-stats.js -->
                        <div id="portfolio-pnl-area" class="portfolio-stats" style="margin-bottom:16px;"></div>

                        <div class="chart-placeholder" id="portfolio-chart-placeholder" style="display:none;">
                            <span data-i18n="portfolio_performance">Portfolio Performance</span>
                            <span class="sub" data-i18n="connect_wallet_to_view">Connect wallet to view</span>
                        </div>
                        <div id="portfolio-simulated-stats" style="padding:20px;">
                            <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:12px;margin-bottom:20px;">
                                <!-- Capital Simul√© -->
                                <div style="background:rgba(168,85,247,0.1);border:1px solid rgba(168,85,247,0.3);border-radius:12px;padding:15px;text-align:center;">
                                    <div style="color:#888;font-size:11px;">üéÆ Capital Simul√©</div>
                                    <div id="portfolio-total-balance" style="color:#a855f7;font-size:22px;font-weight:700;">$0.00</div>
                                </div>
                                <!-- Capital R√©el -->
                                <div style="background:rgba(59,130,246,0.1);border:1px solid rgba(59,130,246,0.3);border-radius:12px;padding:15px;text-align:center;">
                                    <div style="color:#888;font-size:11px;">üíé Capital R√©el</div>
                                    <div id="portfolio-real-balance" style="color:#3b82f6;font-size:22px;font-weight:700;">$0.00</div>
                                </div>
                                <!-- Investi -->
                                <div style="background:rgba(0,255,136,0.1);border:1px solid rgba(0,255,136,0.3);border-radius:12px;padding:15px;text-align:center;">
                                    <div style="color:#888;font-size:11px;" data-i18n="invested">Investi</div>
                                    <div id="portfolio-total-invested" style="color:#00ff88;font-size:22px;font-weight:700;">$0.00</div>
                                </div>
                                <!-- Gains -->
                                <div style="background:rgba(0,212,170,0.1);border:1px solid rgba(0,212,170,0.3);border-radius:12px;padding:15px;text-align:center;">
                                    <div style="color:#888;font-size:11px;" data-i18n="earnings">Gains</div>
                                    <div id="portfolio-total-earnings" style="color:#00d4aa;font-size:22px;font-weight:700;">$0.00</div>
                                </div>
                                <!-- Total Global -->
                                <div style="background:rgba(255,170,0,0.1);border:1px solid rgba(255,170,0,0.3);border-radius:12px;padding:15px;text-align:center;">
                                    <div style="color:#888;font-size:11px;">Total Global</div>
                                    <div id="portfolio-global-total" style="color:#ffaa00;font-size:22px;font-weight:700;">$0.00</div>
                                </div>
                                <!-- Produits -->
                                <div style="background:rgba(245,158,11,0.1);border:1px solid rgba(245,158,11,0.3);border-radius:12px;padding:15px;text-align:center;">
                                    <div style="color:#888;font-size:11px;" data-i18n="products">Produits</div>
                                    <div id="portfolio-products-count" style="color:#f59e0b;font-size:22px;font-weight:700;">0</div>
                                </div>
                            </div>
                        </div>
                    </div>
                        </div>
                    </div>
                    <div class="collapsible-panel" data-panel-id="panel-history">
                        <div class="panel-header">
                            <div class="panel-title">
                                <span class="panel-title-icon">üìú</span>
                                <span data-i18n="transaction_history">Transaction History</span>
                            </div>
                            <div class="panel-toggle"><span class="chevron">‚ñº</span></div>
                        </div>
                        <div class="panel-content">
                    <div class="portfolio-history">
                        <div class="history-empty">
                            <span data-i18n="no_transactions_yet">No transactions yet</span>
                        </div>
                    </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Settings Tab -->
            <section class="tab-content" id="tab-settings">
                <div class="settings-container">
                    <div class="settings-header">
                        <h2 data-i18n="settings">‚öôÔ∏è Settings</h2>
                        <p class="settings-subtitle" data-i18n="settings_desc">Personalize your Obelisk experience</p>
                    </div>

                    <!-- UI Theme Section -->
                    <div class="settings-section">
                        <h3>üé≠ Interface Theme</h3>
                        <p class="section-desc">Change the entire look and feel of the interface</p>

                        <div class="theme-selector" id="theme-selector">
                            <div class="theme-option active" data-theme="default" onclick="window.ThemeManager && window.ThemeManager.setTheme('default')">
                                <div class="theme-preview theme-preview-default">
                                    <div class="theme-preview-header"></div>
                                    <div class="theme-preview-content">
                                        <div class="theme-preview-panel"></div>
                                        <div class="theme-preview-panel"></div>
                                    </div>
                                </div>
                                <span class="theme-name" data-i18n="theme_default">Default</span>
                                <span class="theme-desc" data-i18n="theme_default_desc">Clean cyber style</span>
                            </div>
                            <div class="theme-option" data-theme="forerunner" onclick="window.ThemeManager && window.ThemeManager.setTheme('forerunner')">
                                <div class="theme-preview theme-preview-forerunner">
                                    <div class="theme-preview-header"></div>
                                    <div class="theme-preview-content">
                                        <div class="theme-preview-panel"></div>
                                        <div class="theme-preview-panel"></div>
                                    </div>
                                    <div class="theme-preview-hexagon"></div>
                                </div>
                                <span class="theme-name" data-i18n="theme_forerunner">Forerunner</span>
                                <span class="theme-desc" data-i18n="theme_forerunner_desc">Ancient alien tech - ORANGE</span>
                            </div>
                            <div class="theme-option" data-theme="neon" onclick="window.ThemeManager && window.ThemeManager.setTheme('neon')">
                                <div class="theme-preview theme-preview-neon">
                                    <div class="theme-preview-header"></div>
                                    <div class="theme-preview-content">
                                        <div class="theme-preview-panel"></div>
                                        <div class="theme-preview-panel"></div>
                                    </div>
                                </div>
                                <span class="theme-name" data-i18n="theme_neon">Neon</span>
                                <span class="theme-desc" data-i18n="theme_neon_desc">Cyberpunk vibes</span>
                            </div>
                        </div>
                    </div>

                    <!-- Background Animation Section -->
                    <div class="settings-section">
                        <h3 data-i18n="bg_animation">Background Animation</h3>
                        <p class="section-desc" data-i18n="bg_animation_desc">Choose your preferred background style</p>

                        <div class="animation-selector">
                            <div class="animation-option" data-animation="none">
                                <div class="animation-preview preview-none">
                                    <span>‚àÖ</span>
                                </div>
                                <span class="animation-name" data-i18n="animation_none">None</span>
                            </div>
                            <div class="animation-option" data-animation="matrix">
                                <div class="animation-preview preview-matrix">
                                    <span>01</span>
                                </div>
                                <span class="animation-name" data-i18n="animation_matrix">Matrix</span>
                            </div>
                            <div class="animation-option" data-animation="halo">
                                <div class="animation-preview preview-halo">
                                    <span>‚¨°</span>
                                </div>
                                <span class="animation-name" data-i18n="animation_halo">Halo Forerunners</span>
                            </div>
                            <div class="animation-option active" data-animation="avatar">
                                <div class="animation-preview preview-avatar">
                                    <span>‚úß</span>
                                </div>
                                <span class="animation-name" data-i18n="animation_avatar">Avatar Biolum</span>
                            </div>
                            <div class="animation-option" data-animation="particles">
                                <div class="animation-preview preview-particles">
                                    <span>‚ú¶</span>
                                </div>
                                <span class="animation-name" data-i18n="animation_particles">Particles</span>
                            </div>
                            <div class="animation-option" data-animation="galaxy">
                                <div class="animation-preview preview-galaxy" style="background: linear-gradient(135deg, #0a0020 0%, #1a0040 50%, #0a0020 100%);">
                                    <span>ü™ê</span>
                                </div>
                                <span class="animation-name" data-i18n="animation_galaxy">Galaxy</span>
                            </div>
                            <div class="animation-option" data-animation="ocean">
                                <div class="animation-preview preview-ocean" style="background: linear-gradient(180deg, #001428 0%, #002850 50%, #001020 100%);">
                                    <span>üåä</span>
                                </div>
                                <span class="animation-name" data-i18n="animation_ocean">Ocean</span>
                            </div>
                        </div>

                        <!-- Matrix Color Options -->
                        <div class="matrix-options" id="matrix-options" style="display: none;">
                            <h4 data-i18n="matrix_colors">Matrix Colors</h4>
                            <div class="color-options">
                                <button type="button" class="color-btn active" data-color="green" style="background: #00ff41;" data-i18n="color_green">Green</button>
                                <button type="button" class="color-btn" data-color="cyan" style="background: #00ffff;" data-i18n="color_cyan">Cyan</button>
                                <button type="button" class="color-btn" data-color="purple" style="background: #bf00ff;" data-i18n="color_purple">Purple</button>
                                <button type="button" class="color-btn" data-color="rainbow" style="background: linear-gradient(90deg, #ff0000, #ff7f00, #ffff00, #00ff00, #0000ff, #8b00ff);" data-i18n="color_rainbow">Rainbow</button>
                                <button type="button" class="color-btn" data-color="gold" style="background: #ffd700;" data-i18n="color_gold">Gold</button>
                            </div>
                        </div>

                        <!-- Halo Color Options -->
                        <div class="halo-options" id="halo-options" style="display: none;">
                            <h4 data-i18n="forerunner_style">Forerunner Style</h4>
                            <div class="color-options">
                                <button type="button" class="color-btn active" data-color="blue" style="background: #00a8ff;" data-i18n="color_classic_blue">Classic Blue</button>
                                <button type="button" class="color-btn" data-color="gold" style="background: #ffa500;" data-i18n="color_ancient_gold">Ancient Gold</button>
                                <button type="button" class="color-btn" data-color="green" style="background: #39ff14;" data-i18n="color_halo_green">Halo Green</button>
                            </div>
                        </div>
                    </div>

                    <!-- Background Image Section -->
                    <div class="settings-section">
                        <h3 data-i18n="bg_image">Background Image</h3>
                        <p class="section-desc" data-i18n="bg_image_desc">Add a custom background image (optional)</p>

                        <div class="bg-image-controls">
                            <div class="bg-preset-grid">
                                <div class="bg-preset active" data-bg="none">
                                    <div class="preset-preview preset-none">‚àÖ</div>
                                    <span>None</span>
                                </div>
                                <div class="bg-preset" data-bg="space">
                                    <div class="preset-preview preset-space">üåå</div>
                                    <span>Space</span>
                                </div>
                                <div class="bg-preset" data-bg="nebula">
                                    <div class="preset-preview preset-nebula">üîÆ</div>
                                    <span>Nebula</span>
                                </div>
                                <div class="bg-preset" data-bg="circuit">
                                    <div class="preset-preview preset-circuit">‚ö°</div>
                                    <span>Circuit</span>
                                </div>
                                <div class="bg-preset" data-bg="geometric">
                                    <div class="preset-preview preset-geometric">‚óá</div>
                                    <span>Geometric</span>
                                </div>
                            </div>

                            <div class="custom-bg-upload">
                                <label for="bg-upload" class="upload-label">
                                    <span data-i18n="upload_custom_image">Upload Custom Image</span>
                                    <input type="file" id="bg-upload" accept="image/*" hidden >
                                </label>
                                <button type="button" class="btn-clear-bg" id="btn-clear-bg" data-i18n="clear_image">Clear Image</button>
                            </div>

                            <div class="bg-opacity-control">
                                <label for="bg-opacity" data-i18n="background_opacity">Background Opacity</label>
                                <input type="range" id="bg-opacity" min="0" max="100" value="30" >
                                <span id="bg-opacity-value">30%</span>
                            </div>
                        </div>
                    </div>

                    <!-- Animation Speed -->
                    <div class="settings-section">
                        <h3 data-i18n="anim_speed">Animation Speed</h3>
                        <div class="speed-control">
                            <label for="anim-speed" data-i18n="speed">Speed</label>
                            <input type="range" id="anim-speed" min="0.05" max="2" step="0.05" value="1" >
                            <span id="anim-speed-value">1x</span>
                        </div>
                    </div>

                    <!-- Preview -->
                    <div class="settings-section">
                        <h3 data-i18n="live_preview">Live Preview</h3>
                        <div class="preview-container" id="settings-preview">
                            <canvas id="preview-canvas"></canvas>
                            <div class="preview-overlay">
                                <span data-i18n="preview">Preview</span>
                            </div>
                        </div>
                    </div>

                    <!-- DeFi Health Check Section -->
                    <div class="settings-section">
                        <h3 data-i18n="defi_health_title">üè• DeFi Integration Status</h3>
                        <p class="section-desc" data-i18n="defi_health_desc">Real-time verification of DeFi protocol connections</p>

                        <div id="defi-health-panel" style="background:#0d0d1a;border-radius:12px;padding:20px;margin-top:15px;">
                            <div style="display:grid;grid-template-columns:repeat(3,1fr);gap:10px;" id="defi-status-grid">
                                <div class="defi-status-item" id="status-ethers" style="background:#1a1a2e;padding:12px;border-radius:8px;text-align:center;">
                                    <div style="font-size:24px;" id="icon-ethers">‚è≥</div>
                                    <div style="color:#888;font-size:12px;">ethers.js</div>
                                </div>
                                <div class="defi-status-item" id="status-aave" style="background:#1a1a2e;padding:12px;border-radius:8px;text-align:center;">
                                    <div style="font-size:24px;" id="icon-aave">‚è≥</div>
                                    <div style="color:#888;font-size:12px;">Aave V3</div>
                                </div>
                                <div class="defi-status-item" id="status-gmx" style="background:#1a1a2e;padding:12px;border-radius:8px;text-align:center;">
                                    <div style="font-size:24px;" id="icon-gmx">‚è≥</div>
                                    <div style="color:#888;font-size:12px;">GMX GLP</div>
                                </div>
                                <div class="defi-status-item" id="status-aerodrome" style="background:#1a1a2e;padding:12px;border-radius:8px;text-align:center;">
                                    <div style="font-size:24px;" id="icon-aerodrome">‚è≥</div>
                                    <div style="color:#888;font-size:12px;">Aerodrome</div>
                                </div>
                                <div class="defi-status-item" id="status-manager" style="background:#1a1a2e;padding:12px;border-radius:8px;text-align:center;">
                                    <div style="font-size:24px;" id="icon-manager">‚è≥</div>
                                    <div style="color:#888;font-size:12px;">DeFi Manager</div>
                                </div>
                                <div class="defi-status-item" id="status-wallet" style="background:#1a1a2e;padding:12px;border-radius:8px;text-align:center;">
                                    <div style="font-size:24px;" id="icon-wallet">‚è≥</div>
                                    <div style="color:#888;font-size:12px;">Wallet</div>
                                </div>
                            </div>

                            <div style="margin-top:15px;display:flex;gap:10px;justify-content:center;">
                                <button type="button" onclick="runDeFiHealthCheck()"
                                        style="background:linear-gradient(135deg,#00ff88,#00d4aa);color:#000;border:none;padding:10px 20px;border-radius:8px;cursor:pointer;font-weight:bold;">
                                    üîÑ <span data-i18n="run_health_check">Run Health Check</span>
                                </button>
                                <button type="button" onclick="showDeFiProtocols()"
                                        style="background:#1a1a2e;color:#00ff88;border:1px solid #00ff88;padding:10px 20px;border-radius:8px;cursor:pointer;">
                                    üìä <span data-i18n="view_protocols">View Protocols</span>
                                </button>
                            </div>

                            <div id="defi-health-result" style="margin-top:15px;padding:10px;border-radius:8px;display:none;"></div>
                        </div>
                    </div>

                    <!-- Investment Verification Section -->
                    <div class="settings-section">
                        <h3>üìä V√©rification des Investissements</h3>
                        <p class="section-desc">V√©rifiez tous vos investissements (simul√©s et r√©els)</p>

                        <div id="invest-verify-panel" style="background:#0d0d1a;border-radius:12px;padding:20px;margin-top:15px;">
                            <!-- Summary Stats -->
                            <div style="display:grid;grid-template-columns:repeat(4,1fr);gap:10px;margin-bottom:15px;">
                                <div style="background:#1a1a2e;padding:12px;border-radius:8px;text-align:center;">
                                    <div style="font-size:20px;color:#a855f7;" id="verify-sim-count">0</div>
                                    <div style="color:#888;font-size:11px;">Simul√©s</div>
                                </div>
                                <div style="background:#1a1a2e;padding:12px;border-radius:8px;text-align:center;">
                                    <div style="font-size:20px;color:#00ff88;" id="verify-real-count">0</div>
                                    <div style="color:#888;font-size:11px;">R√©els</div>
                                </div>
                                <div style="background:#1a1a2e;padding:12px;border-radius:8px;text-align:center;">
                                    <div style="font-size:20px;color:#a855f7;" id="verify-sim-total">$0</div>
                                    <div style="color:#888;font-size:11px;">Total Sim</div>
                                </div>
                                <div style="background:#1a1a2e;padding:12px;border-radius:8px;text-align:center;">
                                    <div style="font-size:20px;color:#00ff88;" id="verify-real-total">$0</div>
                                    <div style="color:#888;font-size:11px;">Total R√©el</div>
                                </div>
                            </div>

                            <!-- Investment List -->
                            <div id="verify-invest-list" style="background:#1a1a2e;border-radius:8px;padding:10px;max-height:200px;overflow-y:auto;">
                                <div style="color:#666;text-align:center;padding:20px;">Cliquez sur "V√©rifier" pour voir vos investissements</div>
                            </div>

                            <!-- Actions -->
                            <div style="margin-top:15px;display:flex;gap:10px;flex-wrap:wrap;justify-content:center;">
                                <button type="button" onclick="verifyAllInvestments()"
                                        style="background:linear-gradient(135deg,#a855f7,#7c3aed);color:#fff;border:none;padding:10px 20px;border-radius:8px;cursor:pointer;font-weight:bold;">
                                    üîç V√©rifier Tout
                                </button>
                                <button type="button" onclick="exportInvestments()"
                                        style="background:#1a1a2e;color:#00ff88;border:1px solid #00ff88;padding:10px 20px;border-radius:8px;cursor:pointer;">
                                    üì• Exporter JSON
                                </button>
                                <button type="button" onclick="showInvestmentConsole()"
                                        style="background:#1a1a2e;color:#ffaa00;border:1px solid #ffaa00;padding:10px 20px;border-radius:8px;cursor:pointer;">
                                    üñ•Ô∏è Console Debug
                                </button>
                            </div>

                            <div id="verify-result" style="margin-top:15px;padding:10px;border-radius:8px;display:none;"></div>
                        </div>
                    </div>

                    <!-- Save Button -->
                    <div class="settings-actions">
                        <button type="button" class="btn-primary btn-save-settings" id="btn-save-settings" data-i18n="save_settings">
                            Save Settings
                        </button>
                        <button type="button" class="btn-secondary btn-reset-settings" id="btn-reset-settings" data-i18n="reset_to_default">
                            Reset to Default
                        </button>
                    </div>
                </div>
            </section>

            <!-- Learn Tab - Education Hub -->
            <section class="tab-content" id="tab-learn">
                <div class="learn-container">
                    <!-- Hero Section -->
                    <div class="learn-hero">
                        <div class="learn-hero-content">
                            <div class="learn-hero-glyph">‚¨°</div>
                            <h1 class="learn-title" data-i18n="learn_title">Obelisk Academy</h1>
                            <p class="learn-subtitle" data-i18n="learn_subtitle">Master the art of decentralized trading</p>
                            <div class="learn-progress-overview">
                                <div class="progress-ring">
                                    <svg viewBox="0 0 100 100">
                                        <circle class="progress-bg" cx="50" cy="50" r="45"/>
                                        <circle class="progress-fill" cx="50" cy="50" r="45" id="learn-progress-ring"/>
                                    </svg>
                                    <span class="progress-text" id="learn-progress-text">0%</span>
                                </div>
                                <div class="progress-details">
                                    <span id="courses-completed">0</span> / <span id="courses-total">6</span> <span data-i18n="courses">Courses</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Course Categories -->
                    <div class="learn-categories" style="display:flex !important;visibility:visible !important;gap:10px;margin:20px 0;">
                        <button class="category-tab active" data-category="all" style="display:inline-block !important;" data-i18n="all_courses">All Courses</button>
                        <button class="category-tab" data-category="beginner" data-i18n="beginner">Beginner</button>
                        <button class="category-tab" data-category="intermediate" data-i18n="intermediate">Intermediate</button>
                        <button class="category-tab" data-category="advanced" data-i18n="advanced">Advanced</button>
                        <button class="category-tab" data-category="security" data-i18n="security">Security</button>
                    </div>

                    <!-- Course Grid -->
                    <div class="learn-grid" style="display:grid !important;visibility:visible !important;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:20px;padding:20px 0;">
                        <!-- Course 1: Getting Started -->
                        <div class="learn-card" data-course="getting-started" data-category="beginner" style="display:block !important;visibility:visible !important;background:rgba(20,20,40,0.8);border:1px solid #333;border-radius:12px;padding:20px;">
                            <div class="learn-card-header">
                                <div class="course-icon beginner">‚¨°</div>
                                <div class="course-level" data-i18n="beginner">Beginner</div>
                            </div>
                            <h3 data-i18n="course_getting_started">Getting Started</h3>
                            <p data-i18n="course_getting_started_desc">Your first steps into decentralized finance</p>
                            <div class="course-meta">
                                <span class="duration" data-i18n="duration_10min">10 min</span>
                                <span class="lessons" data-i18n="lessons_5">5 lessons</span>
                            </div>
                            <div class="course-progress">
                                <div class="progress-bar"><div class="progress-fill" style="width: 0%"></div></div>
                                <span class="progress-label">0%</span>
                            </div>
                            <button class="btn-start-course" data-i18n="start_course">Start Course</button>
                        </div>

                        <!-- Course 2: Trading Fundamentals -->
                        <div class="learn-card" data-course="trading-fundamentals" data-category="beginner">
                            <div class="learn-card-header">
                                <div class="course-icon beginner">üìä</div>
                                <div class="course-level" data-i18n="beginner">Beginner</div>
                            </div>
                            <h3 data-i18n="course_trading_fundamentals">Trading Fundamentals</h3>
                            <p data-i18n="course_trading_fundamentals_desc">Market orders, limit orders, and basic strategies</p>
                            <div class="course-meta">
                                <span class="duration" data-i18n="duration_15min">15 min</span>
                                <span class="lessons" data-i18n="lessons_7">7 lessons</span>
                            </div>
                            <div class="course-progress">
                                <div class="progress-bar"><div class="progress-fill" style="width: 0%"></div></div>
                                <span class="progress-label">0%</span>
                            </div>
                            <button class="btn-start-course" data-i18n="start_course">Start Course</button>
                        </div>

                        <!-- Course 3: Understanding Leverage -->
                        <div class="learn-card" data-course="leverage-trading" data-category="intermediate">
                            <div class="learn-card-header">
                                <div class="course-icon intermediate">‚ö°</div>
                                <div class="course-level" data-i18n="intermediate">Intermediate</div>
                            </div>
                            <h3 data-i18n="course_leverage">Understanding Leverage</h3>
                            <p data-i18n="course_leverage_desc">Amplify gains, manage risks, liquidation mechanics</p>
                            <div class="course-meta">
                                <span class="duration" data-i18n="duration_20min">20 min</span>
                                <span class="lessons" data-i18n="lessons_8">8 lessons</span>
                            </div>
                            <div class="course-progress">
                                <div class="progress-bar"><div class="progress-fill" style="width: 0%"></div></div>
                                <span class="progress-label">0%</span>
                            </div>
                            <button class="btn-start-course" data-i18n="start_course">Start Course</button>
                        </div>

                        <!-- Course 4: Post-Quantum Security -->
                        <div class="learn-card featured" data-course="post-quantum" data-category="security">
                            <div class="learn-card-header">
                                <div class="course-icon security">üîê</div>
                                <div class="course-level featured" data-i18n="featured">Featured</div>
                            </div>
                            <h3 data-i18n="course_post_quantum">Post-Quantum Security</h3>
                            <p data-i18n="course_post_quantum_desc">CRYSTALS-Kyber, Dilithium, SPHINCS+ explained</p>
                            <div class="course-meta">
                                <span class="duration" data-i18n="duration_25min">25 min</span>
                                <span class="lessons" data-i18n="lessons_10">10 lessons</span>
                            </div>
                            <div class="course-progress">
                                <div class="progress-bar"><div class="progress-fill" style="width: 0%"></div></div>
                                <span class="progress-label">0%</span>
                            </div>
                            <button class="btn-start-course" data-i18n="start_course">Start Course</button>
                        </div>

                        <!-- Course 5: DeFi Strategies -->
                        <div class="learn-card" data-course="defi-strategies" data-category="advanced">
                            <div class="learn-card-header">
                                <div class="course-icon advanced">üß†</div>
                                <div class="course-level" data-i18n="advanced">Advanced</div>
                            </div>
                            <h3 data-i18n="course_defi_strategies">DeFi Strategies</h3>
                            <p data-i18n="course_defi_strategies_desc">Yield farming, liquidity providing, arbitrage</p>
                            <div class="course-meta">
                                <span class="duration" data-i18n="duration_30min">30 min</span>
                                <span class="lessons" data-i18n="lessons_12">12 lessons</span>
                            </div>
                            <div class="course-progress">
                                <div class="progress-bar"><div class="progress-fill" style="width: 0%"></div></div>
                                <span class="progress-label">0%</span>
                            </div>
                            <button class="btn-start-course" data-i18n="start_course">Start Course</button>
                        </div>

                        <!-- Course 6: Risk Management -->
                        <div class="learn-card" data-course="risk-management" data-category="advanced">
                            <div class="learn-card-header">
                                <div class="course-icon advanced">üéØ</div>
                                <div class="course-level" data-i18n="advanced">Advanced</div>
                            </div>
                            <h3 data-i18n="course_risk_management">Risk Management</h3>
                            <p data-i18n="course_risk_management_desc">Portfolio allocation, stop-loss, hedging</p>
                            <div class="course-meta">
                                <span class="duration" data-i18n="duration_25min">25 min</span>
                                <span class="lessons" data-i18n="lessons_9">9 lessons</span>
                            </div>
                            <div class="course-progress">
                                <div class="progress-bar"><div class="progress-fill" style="width: 0%"></div></div>
                                <span class="progress-label">0%</span>
                            </div>
                            <button class="btn-start-course" data-i18n="start_course">Start Course</button>
                        </div>
                    </div>

                    <!-- Quick Tips Section -->
                    <div class="learn-tips-section">
                        <h2 class="section-title" data-i18n="quick_tips">Quick Tips</h2>
                        <div class="tips-carousel">
                            <div class="tip-card">
                                <div class="tip-icon">üí°</div>
                                <h4 data-i18n="tip_invest_title">Never Invest More Than You Can Afford to Lose</h4>
                                <p data-i18n="tip_invest_desc">Crypto markets are volatile. Only use funds you're comfortable potentially losing entirely.</p>
                            </div>
                            <div class="tip-card">
                                <div class="tip-icon">üîë</div>
                                <h4 data-i18n="tip_keys_title">Secure Your Private Keys</h4>
                                <p data-i18n="tip_keys_desc">Write them on paper, store offline. Never share them with anyone, ever.</p>
                            </div>
                            <div class="tip-card">
                                <div class="tip-icon">üìâ</div>
                                <h4 data-i18n="tip_leverage_title">Start with Low Leverage</h4>
                                <p data-i18n="tip_leverage_desc">Begin with 2x-5x leverage. Higher leverage = higher risk of liquidation.</p>
                            </div>
                            <div class="tip-card">
                                <div class="tip-icon">üéØ</div>
                                <h4 data-i18n="tip_stoploss_title">Always Set Stop-Loss</h4>
                                <p data-i18n="tip_stoploss_desc">Protect your capital with stop-loss orders. Define your max loss before entering any trade.</p>
                            </div>
                        </div>
                    </div>

                    <!-- Glossary Section -->
                    <div class="learn-glossary">
                        <h2 class="section-title" data-i18n="glossary">Glossary</h2>
                        <div class="glossary-search">
                            <input type="text" id="glossary-search" placeholder="Search terms..." data-i18n-placeholder="search_terms">
                        </div>
                        <div class="glossary-grid" id="glossary-list">
                            <div class="glossary-item">
                                <h4 data-i18n="glossary_dex">DEX</h4>
                                <p data-i18n="glossary_dex_desc">Decentralized Exchange - Trade directly from your wallet without intermediaries</p>
                            </div>
                            <div class="glossary-item">
                                <h4 data-i18n="glossary_leverage">Leverage</h4>
                                <p data-i18n="glossary_leverage_desc">Borrowed capital to increase position size. 10x = 10 times your collateral</p>
                            </div>
                            <div class="glossary-item">
                                <h4 data-i18n="glossary_liquidation">Liquidation</h4>
                                <p data-i18n="glossary_liquidation_desc">Forced closure of position when losses exceed margin. Results in loss of collateral</p>
                            </div>
                            <div class="glossary-item">
                                <h4 data-i18n="glossary_stoploss">Stop-Loss</h4>
                                <p data-i18n="glossary_stoploss_desc">Order to automatically close position at a certain loss level to limit damage</p>
                            </div>
                            <div class="glossary-item">
                                <h4 data-i18n="glossary_takeprofit">Take-Profit</h4>
                                <p data-i18n="glossary_takeprofit_desc">Order to automatically close position at a certain profit level to lock gains</p>
                            </div>
                            <div class="glossary-item">
                                <h4 data-i18n="glossary_long">Long</h4>
                                <p data-i18n="glossary_long_desc">Betting price will go UP. Profit when price increases</p>
                            </div>
                            <div class="glossary-item">
                                <h4 data-i18n="glossary_short">Short</h4>
                                <p data-i18n="glossary_short_desc">Betting price will go DOWN. Profit when price decreases</p>
                            </div>
                            <div class="glossary-item">
                                <h4 data-i18n="glossary_margin">Margin</h4>
                                <p data-i18n="glossary_margin_desc">Collateral required to open a leveraged position</p>
                            </div>
                            <div class="glossary-item">
                                <h4 data-i18n="glossary_slippage">Slippage</h4>
                                <p data-i18n="glossary_slippage_desc">Difference between expected and executed price due to market movement</p>
                            </div>
                            <div class="glossary-item">
                                <h4 data-i18n="glossary_apy">APY</h4>
                                <p data-i18n="glossary_apy_desc">Annual Percentage Yield - Returns over a year including compound interest</p>
                            </div>
                            <div class="glossary-item">
                                <h4 data-i18n="glossary_postquantum">Post-Quantum</h4>
                                <p data-i18n="glossary_postquantum_desc">Cryptography resistant to attacks from quantum computers</p>
                            </div>
                            <div class="glossary-item">
                                <h4 data-i18n="glossary_noncustodial">Non-Custodial</h4>
                                <p data-i18n="glossary_noncustodial_desc">You control your own keys. No third party holds your funds</p>
                            </div>
                            <div class="glossary-item">
                                <h4 data-i18n="glossary_impermanent_loss">Impermanent Loss (IL)</h4>
                                <p data-i18n="glossary_impermanent_loss_desc"><strong>Definition:</strong> Loss incurred when providing liquidity to an AMM pool due to price divergence between assets. Called "impermanent" because it only becomes permanent when you withdraw.<br><br>
                                <strong>How it works:</strong> When you deposit 2 tokens (e.g., ETH/USDC) in a liquidity pool, the AMM automatically rebalances them as prices change. If ETH goes up 100%, the pool sells ETH and buys USDC to maintain the ratio. You end up with less ETH than if you had just held it.<br><br>
                                <strong>Example:</strong> Deposit $1000 (0.5 ETH + 500 USDC). ETH doubles to $2000. Without LP: 0.5 ETH = $1000 + 500 USDC = $1500 total. With LP: Pool rebalances to ~0.35 ETH + 707 USDC = $1414. IL = $86 (5.7%).<br><br>
                                <strong>Formula:</strong> IL = 2 * sqrt(price_ratio) / (1 + price_ratio) - 1<br>
                                - 25% price change = 0.6% IL<br>
                                - 100% price change = 5.7% IL<br>
                                - 400% price change = 20% IL<br><br>
                                <strong>Mitigation:</strong> Choose stable pairs (USDC/DAI), use concentrated liquidity, or pick high-fee pools where fees > IL.</p>
                            </div>
                            <div class="glossary-item">
                                <h4 data-i18n="glossary_tvl">TVL (Total Value Locked)</h4>
                                <p data-i18n="glossary_tvl_desc">Total value of assets deposited in a DeFi protocol. Higher TVL = more liquidity and trust.</p>
                            </div>
                            <div class="glossary-item">
                                <h4 data-i18n="glossary_yield_farming">Yield Farming</h4>
                                <p data-i18n="glossary_yield_farming_desc">Strategy of moving assets between DeFi protocols to maximize returns through liquidity provision, staking, and reward tokens.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Course Modal -->
                <div class="course-modal" id="course-modal">
                    <div class="course-modal-content">
                        <button class="modal-close" id="close-course-modal">&times;</button>
                        <div class="course-modal-header">
                            <h2 id="modal-course-title" data-i18n="course_title">Course Title</h2>
                            <div class="modal-progress">
                                <span id="modal-lesson-current">1</span> / <span id="modal-lesson-total">5</span>
                            </div>
                        </div>
                        <div class="course-modal-body" id="modal-course-content">
                            <!-- Course content loaded dynamically -->
                        </div>
                        <div class="course-modal-nav">
                            <button class="btn-prev-lesson" id="btn-prev-lesson" data-i18n="previous">Previous</button>
                            <button class="btn-next-lesson" id="btn-next-lesson" data-i18n="next">Next</button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Academy Tab - Simulated Traders for Education -->
            <section class="tab-content" id="tab-academy">
                <div class="academy-container">
                    <!-- Notifications Container -->
                    <div id="academy-notifications" class="academy-notifications"></div>

                    <!-- Hero Section -->
                    <div class="academy-hero">
                        <div class="academy-hero-icon">üéì</div>
                        <h1 class="academy-title">Trading Academy</h1>
                        <p class="academy-subtitle">Apprenez des traders virtuels avec differents styles. Suivez leurs trades en temps reel, testez vos connaissances et copiez les meilleurs!</p>
                    </div>

                    <!-- Tabs Navigation -->
                    <div class="academy-tabs">
                        <button class="academy-tab active" data-section="traders" onclick="AcademyModule.switchSection('traders')">üë• Traders</button>
                        <button class="academy-tab" data-section="feed" onclick="AcademyModule.switchSection('feed')">üìä Live Feed</button>
                        <button class="academy-tab" data-section="leaderboard" onclick="AcademyModule.switchSection('leaderboard')">üèÜ Leaderboard</button>
                        <button class="academy-tab" data-section="quiz" onclick="AcademyModule.switchSection('quiz')">‚ùì Quiz</button>
                        <button class="academy-tab" data-section="copytrade" onclick="AcademyModule.switchSection('copytrade')">üìã Copy Trade</button>
                    </div>

                    <!-- Traders Section -->
                    <div id="academy-traders" class="academy-section">
                        <div id="traders-grid" class="traders-grid">
                            <!-- Traders will be rendered by JS -->
                            <div style="text-align:center;padding:40px;color:#888;">
                                Loading traders...
                            </div>
                        </div>
                    </div>

                    <!-- Live Feed Section -->
                    <div id="academy-feed" class="academy-section" style="display:none;">
                        <div class="live-feed-container">
                            <div class="live-feed-header">
                                <h2 class="live-feed-title">
                                    <span class="live-indicator"></span>
                                    Live Trading Feed
                                </h2>
                                <button onclick="AcademyModule.loadFeed()" style="background:rgba(201,162,39,0.2);border:1px solid rgba(201,162,39,0.4);color:#c9a227;padding:8px 16px;border-radius:6px;cursor:pointer;">
                                    Refresh
                                </button>
                            </div>
                            <div id="live-feed-list" class="live-feed-list">
                                <!-- Feed items rendered by JS -->
                            </div>
                        </div>
                    </div>

                    <!-- Leaderboard Section -->
                    <div id="academy-leaderboard" class="academy-section" style="display:none;">
                        <div class="leaderboard-container">
                            <h2 class="leaderboard-title">üèÜ Trader Leaderboard</h2>
                            <div id="leaderboard-table" class="leaderboard-table">
                                <!-- Leaderboard rendered by JS -->
                            </div>
                        </div>
                    </div>

                    <!-- Quiz Section -->
                    <div id="academy-quiz" class="academy-section" style="display:none;">
                        <div class="quiz-container">
                            <div class="quiz-header">
                                <h2 class="quiz-title">‚ùì Test Your Trading Knowledge</h2>
                                <p class="quiz-subtitle">Que ferait chaque trader dans cette situation?</p>
                            </div>
                            <div id="quiz-content">
                                <button class="btn-next-quiz" onclick="AcademyModule.loadQuiz()">Start Quiz</button>
                            </div>
                        </div>
                    </div>

                    <!-- Copy Trade Section -->
                    <div id="academy-copytrade" class="academy-section" style="display:none;">
                        <div class="copy-trade-settings">
                            <div class="copy-trade-header">
                                <h2 class="copy-trade-title">üìã Copy Trade Settings</h2>
                                <label class="copy-trade-toggle">
                                    <input type="checkbox" id="copy-trade-toggle">
                                    <span class="copy-trade-slider"></span>
                                </label>
                            </div>
                            <p style="color:rgba(255,255,255,0.6);margin-bottom:20px;">
                                Activez le copy trading pour copier automatiquement les trades des traders que vous suivez.
                            </p>
                            <div class="copy-trade-config">
                                <div class="config-item">
                                    <div class="config-label">Max Size par Trade ($)</div>
                                    <input type="number" class="config-input" data-config="maxSize" value="10" min="1" max="100">
                                </div>
                                <div class="config-item">
                                    <div class="config-label">Risk % du Portfolio</div>
                                    <input type="number" class="config-input" data-config="riskPercent" value="1" min="0.1" max="5" step="0.1">
                                </div>
                                <div class="config-item">
                                    <div class="config-label">Mode</div>
                                    <select class="config-input" data-config="autoExecute">
                                        <option value="false">Confirmation manuelle</option>
                                        <option value="true">Execution automatique</option>
                                    </select>
                                </div>
                            </div>
                            <div style="margin-top:20px;padding:15px;background:rgba(255,200,0,0.1);border:1px solid rgba(255,200,0,0.3);border-radius:8px;color:#ffc800;">
                                ‚ö†Ô∏è <strong>Mode Demo</strong>: Les copy trades sont simules et n'executent pas de vrais ordres.
                            </div>
                        </div>
                    </div>

                </div>
            </section>

            <!-- Governance Tab - Community Voting -->
            <section class="tab-content" id="tab-governance" style="display:none;">
                <div id="governance-section">
                    <!-- Governance UI will be rendered here by governance-ui.js -->
                    <div style="text-align:center;padding:60px 20px;color:#888;">
                        <div style="font-size:60px;margin-bottom:20px;">üó≥Ô∏è</div>
                        <h2 style="color:#00ff88;margin-bottom:10px;">Loading Governance...</h2>
                        <p>Please wait while we load the governance system</p>
                    </div>
                </div>
            </section>

            <!-- About Tab - Private Investment Bank -->
            <section class="tab-content" id="tab-about">
                <div class="about-container" style="max-width: 1200px; margin: 0 auto; padding: 40px 20px;">
                    <!-- Hero Section -->
                    <div class="about-hero" style="text-align: center; margin-bottom: 60px;">
                        <div style="font-size: 80px; margin-bottom: 20px;">üèõÔ∏è</div>
                        <h1 data-i18n="about_title" style="font-size: 48px; background: linear-gradient(135deg, #00ff88, #00aaff); -webkit-background-clip: text; -webkit-text-fill-color: transparent; margin-bottom: 16px;">Your Own Private Investment Bank, Everywhere</h1>
                        <p data-i18n="about_subtitle" style="font-size: 20px; color: #888; margin-bottom: 30px;">The power of institutional finance, accessible to everyone</p>
                        <p data-i18n="about_hero_desc" style="font-size: 16px; color: #aaa; max-width: 800px; margin: 0 auto; line-height: 1.8;">Obelisk is your own private investment bank, everywhere. We don't hold your funds - you do. Access institutional-grade tools and products that were once reserved for the ultra-wealthy, while keeping full control of your assets.</p>
                    </div>

                    <!-- Features Grid -->
                    <div class="about-features" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 24px; margin-bottom: 60px;">
                        <div class="about-feature" style="background: linear-gradient(145deg, rgba(0,255,136,0.1), rgba(0,170,255,0.05)); border: 1px solid rgba(0,255,136,0.2); border-radius: 16px; padding: 30px;">
                            <div style="font-size: 40px; margin-bottom: 16px;">üîê</div>
                            <h3 data-i18n="about_feature_1_title" style="color: #00ff88; margin-bottom: 12px; font-size: 20px;">Self-Custody Banking</h3>
                            <p data-i18n="about_feature_1_desc" style="color: #888; line-height: 1.7;">You are your own bank. Keep full control of your assets with post-quantum secured wallets. No intermediaries, no frozen accounts, no withdrawal limits.</p>
                        </div>
                        <div class="about-feature" style="background: linear-gradient(145deg, rgba(0,170,255,0.1), rgba(138,43,226,0.05)); border: 1px solid rgba(0,170,255,0.2); border-radius: 16px; padding: 30px;">
                            <div style="font-size: 40px; margin-bottom: 16px;">üíé</div>
                            <h3 data-i18n="about_feature_2_title" style="color: #00aaff; margin-bottom: 12px; font-size: 20px;">Institutional Products</h3>
                            <p data-i18n="about_feature_2_desc" style="color: #888; line-height: 1.7;">Access DeFi yields, structured products, tokenized bonds, and investment combos previously available only to hedge funds and institutions.</p>
                        </div>
                        <div class="about-feature" style="background: linear-gradient(145deg, rgba(245,158,11,0.1), rgba(0,255,136,0.05)); border: 1px solid rgba(245,158,11,0.2); border-radius: 16px; padding: 30px;">
                            <div style="font-size: 40px; margin-bottom: 16px;">üìà</div>
                            <h3 data-i18n="about_feature_3_title" style="color: #f59e0b; margin-bottom: 12px; font-size: 20px;">Wealth Generation</h3>
                            <p data-i18n="about_feature_3_desc" style="color: #888; line-height: 1.7;">Grow your capital with staking (4-25% APY), liquidity pools, yield vaults, and smart investment strategies.</p>
                        </div>
                        <div class="about-feature" style="background: linear-gradient(145deg, rgba(138,43,226,0.1), rgba(0,170,255,0.05)); border: 1px solid rgba(138,43,226,0.2); border-radius: 16px; padding: 30px;">
                            <div style="font-size: 40px; margin-bottom: 16px;">üõ°Ô∏è</div>
                            <h3 data-i18n="about_feature_4_title" style="color: #a855f7; margin-bottom: 12px; font-size: 20px;">Total Privacy</h3>
                            <p data-i18n="about_feature_4_desc" style="color: #888; line-height: 1.7;">Your financial data stays yours. Zero server storage, local encryption, and optional stealth transactions.</p>
                        </div>
                    </div>

                    <!-- Why Obelisk Section -->
                    <div class="about-why" style="background: rgba(0,0,0,0.3); border-radius: 20px; padding: 40px; margin-bottom: 60px;">
                        <h2 data-i18n="about_why_title" style="color: #00ff88; font-size: 28px; margin-bottom: 30px; text-align: center;">Why Obelisk?</h2>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
                            <div style="display: flex; align-items: center; gap: 16px; padding: 16px; background: rgba(0,255,136,0.05); border-radius: 12px;">
                                <span style="font-size: 24px;">üí∞</span>
                                <p data-i18n="about_why_1" style="color: #ccc; margin: 0;">Traditional banks offer 0.5% savings rates. We offer 4-25% APY.</p>
                            </div>
                            <div style="display: flex; align-items: center; gap: 16px; padding: 16px; background: rgba(0,170,255,0.05); border-radius: 12px;">
                                <span style="font-size: 24px;">üìä</span>
                                <p data-i18n="about_why_2" style="color: #ccc; margin: 0;">Banks charge fees. We generate yield.</p>
                            </div>
                            <div style="display: flex; align-items: center; gap: 16px; padding: 16px; background: rgba(245,158,11,0.05); border-radius: 12px;">
                                <span style="font-size: 24px;">üîë</span>
                                <p data-i18n="about_why_3" style="color: #ccc; margin: 0;">Banks can freeze your money. We can't - you hold the keys.</p>
                            </div>
                            <div style="display: flex; align-items: center; gap: 16px; padding: 16px; background: rgba(138,43,226,0.05); border-radius: 12px;">
                                <span style="font-size: 24px;">‚è∞</span>
                                <p data-i18n="about_why_4" style="color: #ccc; margin: 0;">Banks close on weekends. We're live 24/7/365.</p>
                            </div>
                        </div>
                    </div>

                    <!-- Stats Section -->
                    <div class="about-stats" style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; margin-bottom: 60px;">
                        <div style="text-align: center; padding: 24px; background: rgba(0,255,136,0.1); border-radius: 16px;">
                            <div style="font-size: 32px; font-weight: 700; color: #00ff88;">$2.4B+</div>
                            <div data-i18n="about_stat_volume" style="color: #888; font-size: 14px; margin-top: 8px;">Trading Volume <span style="font-size:10px;">(simulated)</span></div>
                        </div>
                        <div style="text-align: center; padding: 24px; background: rgba(0,170,255,0.1); border-radius: 16px;">
                            <div style="font-size: 32px; font-weight: 700; color: #00aaff;">150K+</div>
                            <div data-i18n="about_stat_users" style="color: #888; font-size: 14px; margin-top: 8px;">Active Users <span style="font-size:10px;">(simulated)</span></div>
                        </div>
                        <div style="text-align: center; padding: 24px; background: rgba(245,158,11,0.1); border-radius: 16px;">
                            <div style="font-size: 32px; font-weight: 700; color: #f59e0b;">150+</div>
                            <div data-i18n="about_stat_products" style="color: #888; font-size: 14px; margin-top: 8px;">Investment Products</div>
                        </div>
                        <div style="text-align: center; padding: 24px; background: rgba(138,43,226,0.1); border-radius: 16px;">
                            <div style="font-size: 32px; font-weight: 700; color: #a855f7;">A+</div>
                            <div data-i18n="about_stat_security" style="color: #888; font-size: 14px; margin-top: 8px;">Security Score</div>
                        </div>
                    </div>

                    <!-- CTA Section -->
                    <div class="about-cta" style="text-align: center; padding: 60px 40px; background: linear-gradient(135deg, rgba(0,255,136,0.15), rgba(0,170,255,0.1)); border-radius: 24px; border: 1px solid rgba(0,255,136,0.3);">
                        <h2 data-i18n="about_cta_title" style="font-size: 32px; color: #fff; margin-bottom: 16px;">Start Building Your Wealth</h2>
                        <p data-i18n="about_cta_desc" style="color: #aaa; font-size: 18px; margin-bottom: 30px;">Join thousands of users who have discovered a better way to bank.</p>
                        <button onclick="ObeliskApp.switchTab('banking')" style="background: linear-gradient(135deg, #00ff88, #00d4aa); color: #000; font-size: 18px; font-weight: 700; padding: 16px 40px; border: none; border-radius: 12px; cursor: pointer; transition: transform 0.3s, box-shadow 0.3s;" onmouseover="this.style.transform='scale(1.05)';this.style.boxShadow='0 10px 40px rgba(0,255,136,0.4)'" onmouseout="this.style.transform='scale(1)';this.style.boxShadow='none'">
                            <span data-i18n="about_cta_button">Open Your Own Private Bank</span> ‚Üí
                        </button>
                    </div>
                </div>
            </section>
        </main>

        <!-- Footer -->
        <footer class="footer">
            <div class="footer-left">
                <span class="status-indicator online"></span>
                <span data-i18n="connected_to_hyperliquid">Connected to Hyperliquid</span>
                <span class="footer-separator">|</span>
                <span class="last-update-footer">üîÑ <span id="update-time">--:--:--</span></span>
            </div>
            <div class="footer-center">
                <span class="security-notice" data-i18n="footer_security_notice">All data encrypted locally - Zero server storage</span>
            </div>
            <div class="footer-right">
                <a href="legal/terms.html" class="footer-link" data-i18n="terms">Terms</a>
                <a href="legal/privacy.html" class="footer-link" data-i18n="privacy">Privacy</a>
                <span class="footer-separator">|</span>
                <a href="https://twitter.com/ObeliskDEX" target="_blank" rel="noopener" class="footer-link" title="Twitter/X">ùïè</a>
                <a href="https://discord.gg/obeliskdex" target="_blank" rel="noopener" class="footer-link" title="Discord">Discord</a>
                <a href="https://github.com/obelisk-dex" target="_blank" rel="noopener" class="footer-link" title="GitHub">GitHub</a>
                <button type="button" class="btn-debug" onclick="toggleDebugPanel()" title="Debug Panel">üõ†Ô∏è</button>
            </div>
        </footer>

        <!-- Debug Panel (Admin) - v2 -->
        <div id="debug-panel" class="debug-panel" style="display:block; position:fixed; bottom:50px; right:20px; z-index:999999;">
            <div class="debug-header">
                <span data-i18n="debug_panel">Debug Panel</span>
                <div>
                    <button onclick="minimizeDebugPanel()" title="Minimize/Expand">‚ûñ</button>
                    <button onclick="closeDebugPanel()" title="Close">‚úï</button>
                </div>
            </div>
            <div class="debug-content" id="debug-content">
                <div class="debug-section">
                    <strong data-i18n="chart_status">Chart Status:</strong>
                    <div id="debug-chart-status" data-i18n="checking">Checking...</div>
                </div>
                <div class="debug-section">
                    <strong data-i18n="console_logs">Console Logs:</strong> <button onclick="toggleLogPause()" id="log-pause-btn" style="font-size:10px;padding:2px 6px;margin-left:8px;" data-i18n="pause">Pause</button>
                    <div id="debug-logs" class="debug-logs"></div>
                </div>
            </div>
        </div>

        <script>
        // Debug Panel
        const originalLog = console.log;
        const originalError = console.error;
        const originalWarn = console.warn;
        const debugLogs = [];
        let logsPaused = false;

        console.log = function(...args) {
            debugLogs.push({type: 'log', msg: args.join(' '), time: new Date().toLocaleTimeString()});
            if (!logsPaused) updateDebugLogs();
            originalLog.apply(console, args);
        };
        console.error = function(...args) {
            debugLogs.push({type: 'error', msg: args.join(' '), time: new Date().toLocaleTimeString()});
            if (!logsPaused) updateDebugLogs();
            originalError.apply(console, args);
        };
        console.warn = function(...args) {
            debugLogs.push({type: 'warn', msg: args.join(' '), time: new Date().toLocaleTimeString()});
            if (!logsPaused) updateDebugLogs();
            originalWarn.apply(console, args);
        };

        function toggleLogPause() {
            logsPaused = !logsPaused;
            const btn = document.getElementById('log-pause-btn');
            btn.textContent = logsPaused ? 'Resume' : 'Pause';
            if (!logsPaused) updateDebugLogs();
        }

        function updateDebugLogs() {
            if (logsPaused) return;
            const el = document.getElementById('debug-logs');
            if (el) {
                el.innerHTML = debugLogs.slice(-20).map(l =>
                    `<div class="debug-log ${l.type}"><span class="time">${l.time}</span> ${l.msg}</div>`
                ).join('');
                el.scrollTop = el.scrollHeight;
            }
        }

        function toggleDebugPanel() {
            const panel = document.getElementById('debug-panel');
            if (panel.style.display === 'none') {
                panel.style.display = 'block';
                checkChartStatus();
            } else {
                panel.style.display = 'none';
            }
        }

        function minimizeDebugPanel() {
            const content = document.getElementById('debug-content');
            content.style.display = content.style.display === 'none' ? 'block' : 'none';
        }

        function closeDebugPanel() {
            document.getElementById('debug-panel').style.display = 'none';
        }

        function checkChartStatus() {
            const container = document.getElementById('trading-chart');
            const status = document.getElementById('debug-chart-status');
            if (!status) return;

            let html = '';
            html += `<div>Container exists: ${container ? '‚úÖ' : '‚ùå'}</div>`;
            if (container) {
                html += `<div>Container size: ${container.offsetWidth}x${container.offsetHeight}px</div>`;
                html += `<div>Has iframe: ${container.querySelector('iframe') ? '‚úÖ' : '‚ùå'}</div>`;
                html += `<div>Inner HTML length: ${container.innerHTML.length}</div>`;
                html += `<div>Display: ${getComputedStyle(container).display}</div>`;
                html += `<div>Visibility: ${getComputedStyle(container).visibility}</div>`;
            }
            html += `<div>ObeliskApp.state.chartLoaded: ${typeof ObeliskApp !== 'undefined' ? ObeliskApp.state.chartLoaded : 'N/A'}</div>`;
            html += `<br><button onclick="forceLoadChart()" style="background:#ff6600;border:none;color:#fff;padding:8px 16px;border-radius:4px;cursor:pointer;">Force Load Chart</button>`;
            status.innerHTML = html;
        }

        function forceLoadChart() {
            console.log('[Debug] Force loading chart...');
            const container = document.getElementById('trading-chart');
            if (!container) {
                console.error('[Debug] Container not found!');
                return;
            }

            container.innerHTML = '';
            const iframe = document.createElement('iframe');
            iframe.src = 'https://s.tradingview.com/widgetembed/?frameElementId=tv_chart&symbol=BINANCE:BTCUSDT&interval=15&hidesidetoolbar=0&symboledit=1&saveimage=0&toolbarbg=0a0a1e&theme=dark&style=1&timezone=Etc%2FUTC&locale=en';
            iframe.style.cssText = 'width:100%;height:100%;border:none;';
            iframe.allowFullscreen = true;
            container.appendChild(iframe);
            console.log('[Debug] Chart iframe added!');
            checkChartStatus();
        }

        setInterval(checkChartStatus, 2000);

        // Auto-check on load
        setTimeout(checkChartStatus, 500);

        // ===== CHART SOURCE SWITCHING =====
        let currentChartSource = 'tradingview';
        let obeliskChartInterval = null;
        let obeliskPriceHistory = [];
        let obeliskChartMs = 100; // 0.1ms default

        function switchChartSource(src) {
            console.log('[Chart] Switching to:', src);
            currentChartSource = src;

            // Update button states
            document.querySelectorAll('.chart-src').forEach(b => b.classList.remove('active'));
            document.querySelector('.chart-src[data-src="' + src + '"]').classList.add('active');

            // Toggle timeframe groups
            document.getElementById('tf-tradingview').style.display = src === 'tradingview' ? 'flex' : 'none';
            document.getElementById('tf-obelisk').style.display = src === 'obelisk' ? 'flex' : 'none';

            // Switch chart
            if (src === 'tradingview') {
                stopObeliskChart();
                loadTradingViewChart();
            } else {
                startObeliskChart();
            }
        }

        function switchObeliskMs(ms) {
            console.log('[Chart] Switching to ms:', ms);
            document.querySelectorAll('.chart-tf-ms').forEach(b => b.classList.remove('active'));
            event.target.classList.add('active');
            obeliskChartMs = ms;
            if (currentChartSource === 'obelisk') {
                restartObeliskChart();
            }
        }

        function loadTradingViewChart() {
            const container = document.getElementById('trading-chart');
            container.innerHTML = '';
            const iframe = document.createElement('iframe');
            iframe.src = 'https://s.tradingview.com/widgetembed/?frameElementId=tv_chart&symbol=BINANCE:BTCUSDT&interval=15&hidesidetoolbar=0&symboledit=1&saveimage=0&toolbarbg=0a0a1e&theme=dark&style=1&timezone=Etc%2FUTC&locale=en';
            iframe.style.cssText = 'width:100%;height:100%;border:none;';
            iframe.allowFullscreen = true;
            container.appendChild(iframe);
        }

        function startObeliskChart() {
            console.log('[Obelisk] Starting Obelisk chart...');
            const container = document.getElementById('trading-chart');
            if (!container) {
                console.error('[Obelisk] Container not found!');
                return;
            }

            // Create canvas
            container.innerHTML = '<canvas id="obelisk-chart"></canvas>';
            const canvas = document.getElementById('obelisk-chart');
            if (!canvas) {
                console.error('[Obelisk] Canvas not created!');
                return;
            }

            // Set canvas size explicitly
            canvas.width = container.offsetWidth || 800;
            canvas.height = container.offsetHeight || 400;
            canvas.style.width = '100%';
            canvas.style.height = '100%';
            canvas.style.background = '#0a0a1e';

            const ctx = canvas.getContext('2d');
            obeliskPriceHistory = [];

            console.log('[Obelisk] Canvas created:', canvas.width, 'x', canvas.height);

            // Draw initial message
            ctx.fillStyle = '#0a0a1e';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            ctx.fillStyle = '#00ff88';
            ctx.font = 'bold 16px monospace';
            ctx.fillText('Obelisk Chart - Collecting data...', 20, 30);

            // Interval in ms (minimum 1ms, browser will use ~4ms minimum)
            const intervalMs = Math.max(1, obeliskChartMs / 1000);
            console.log('[Obelisk] Update interval:', intervalMs, 'ms');

            obeliskChartInterval = setInterval(() => {
                // Get current price from RealtimePrices
                let price = 0;
                if (typeof RealtimePrices !== 'undefined' && RealtimePrices.state.prices.BTC) {
                    price = RealtimePrices.state.prices.BTC.price;
                } else {
                    price = 94000 + Math.random() * 100; // Demo data if no real prices
                }

                const now = performance.now();
                obeliskPriceHistory.push({ time: now, price: price });

                // Keep only last 500 points
                if (obeliskPriceHistory.length > 500) {
                    obeliskPriceHistory.shift();
                }

                drawObeliskChart(ctx, canvas.width, canvas.height);
            }, intervalMs);

            console.log('[Obelisk] Chart started!');
        }

        function stopObeliskChart() {
            if (obeliskChartInterval) {
                clearInterval(obeliskChartInterval);
                obeliskChartInterval = null;
            }
        }

        function restartObeliskChart() {
            stopObeliskChart();
            obeliskPriceHistory = [];
            startObeliskChart();
        }

        function drawObeliskChart(ctx, w, h) {
            // Clear
            ctx.fillStyle = '#0a0a1e';
            ctx.fillRect(0, 0, w, h);

            if (obeliskPriceHistory.length < 2) return;

            // Find min/max
            const prices = obeliskPriceHistory.map(p => p.price);
            const minPrice = Math.min(...prices);
            const maxPrice = Math.max(...prices);
            const range = maxPrice - minPrice || 1;

            // Draw grid
            ctx.strokeStyle = 'rgba(255,255,255,0.05)';
            ctx.lineWidth = 1;
            for (let i = 0; i < 5; i++) {
                const y = (h / 5) * i;
                ctx.beginPath();
                ctx.moveTo(0, y);
                ctx.lineTo(w, y);
                ctx.stroke();
            }

            // Draw price line
            ctx.strokeStyle = '#00ff88';
            ctx.lineWidth = 2;
            ctx.shadowColor = '#00ff88';
            ctx.shadowBlur = 10;
            ctx.beginPath();

            obeliskPriceHistory.forEach((point, i) => {
                const x = (i / (obeliskPriceHistory.length - 1)) * w;
                const y = h - ((point.price - minPrice) / range) * (h - 40) - 20;
                if (i === 0) ctx.moveTo(x, y);
                else ctx.lineTo(x, y);
            });
            ctx.stroke();
            ctx.shadowBlur = 0;

            // Draw current price
            const lastPrice = obeliskPriceHistory[obeliskPriceHistory.length - 1].price;
            ctx.fillStyle = '#00ff88';
            ctx.font = 'bold 14px monospace';
            ctx.fillText('$' + lastPrice.toLocaleString('en-US', {minimumFractionDigits: 2}), 10, 25);

            // Draw timeframe info
            ctx.fillStyle = '#888';
            ctx.font = '11px monospace';
            ctx.fillText('Obelisk Chart | ' + (obeliskChartMs/1000).toFixed(3) + 'ms | ' + obeliskPriceHistory.length + ' points', 10, h - 10);
        }
        </script>

    <!-- Modals -->
    <div class="modal" id="modal-create-wallet" style="display:none;">
        <div class="modal-backdrop"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h3 data-i18n="modal_create_wallet_title">Create Post-Quantum Wallet</h3>
                <button type="button" class="modal-close">&amp;times;</button>
            </div>
            <div class="modal-body">
                <div class="step-indicator">
                    <div class="step active" data-i18n="step_password">1. Password</div>
                    <div class="step" data-i18n="step_seed_phrase">2. Seed Phrase</div>
                    <div class="step" data-i18n="step_verify">3. Verify</div>
                </div>
                <div class="step-content" id="step-1">
                    <p data-i18n="modal_create_wallet_desc">Create a strong password to encrypt your wallet locally.</p>
                    <div class="form-group">
                        <label for="create-password" data-i18n="password">Password</label>
                        <input type="password" id="create-password" placeholder="Enter strong password" autocomplete="new-password" data-i18n-placeholder="enter_strong_password">
                    </div>
                    <div class="form-group">
                        <label for="confirm-password" data-i18n="confirm_password">Confirm Password</label>
                        <input type="password" id="confirm-password" placeholder="Confirm password" autocomplete="new-password" data-i18n-placeholder="confirm_password_placeholder">
                    </div>
                    <div class="password-strength">
                        <div class="strength-bar"></div>
                        <span class="strength-text" data-i18n="password_strength">Password strength: --</span>
                    </div>
                    <button type="button" class="btn-primary btn-next" data-i18n="continue">Continue</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="js/core/bg-animations.js"></script>
    <script src="js/shaders.js"></script>
    <script src="js/core/debug-panel.js"></script>
    <script src="js/wallet/crypto-utils.js"></script>
    <script src="js/wallet/post-quantum.js"></script>
    <script src="js/wallet/pq-crypto-real.js"></script>
    <script src="js/wallet/private-wallet.js"></script>
    <script src="js/wallet/wallet.js"></script>
    <script src="js/wallet/wallet-creation-flow.js"></script>
    <script src="js/wallet/wallet-connect.js"></script>
    <script src="js/wallet/wallet-appkit.js"></script>
    <script src="js/trading/real-trading.js"></script>
    <script src="js/trading/trading-ui-real.js"></script>
    <script src="js/core/sanitize.js"></script>
    <script src="js/utils/security-audit.js"></script>
    <script src="js/ui/user-accounts.js"></script>
    <script src="js/ui/academy-module.js"></script>
    <script src="js/products/fee-config.js"></script>
    <script src="js/products/commission-simulator.js"></script>

    <!-- New Modules: Multi-Wallet, 2FA, Academy Traders, Micro-interactions -->
    <script src="js/modules/wallet-manager.js"></script>
    <script src="js/modules/twofa-setup.js"></script>
    <script src="js/modules/academy-traders.js"></script>
    <script src="js/modules/ripple-effect.js"></script>

    <!-- Advanced Security Modules v2.0 - Full Nightmare Scenario Coverage -->
    <script src="security/quantum-shield.js"></script>
    <script src="security/contract-guards.js"></script>
    <script src="security/circuit-breaker.js"></script>
    <script src="security/oracle-security.js"></script>
    <script src="security/security-monitor.js"></script>
    <script src="security/anomaly-detector.js"></script>
    <script src="security/infra-security.js"></script>
    <script src="security/defi-security.js"></script>
    <script src="security/social-security.js"></script>
    <script src="security/zeroday-shield.js"></script>
    <script src="security/security-core.js"></script>

    <script src="js/trading/hyperliquid.js"></script>
    <script src="js/trading/uniswap.js"></script>
    <script src="js/core/storage.js"></script>
    <script src="js/trading/prices.js"></script>
    <script src="js/products/deposit-withdraw.js"></script>
    <script src="js/products/bonds.js"></script>
    <script src="js/products/combos.js"></script>
    <script>
// Force CombosModule init after DOM ready
window.addEventListener('load', function() {
    setTimeout(function() {
        if (typeof CombosModule !== 'undefined') {
            console.log('[INLINE] comboData length:', CombosModule.comboData ? CombosModule.comboData.length : 0);
            CombosModule.init();
        }
    }, 500);
});
</script>
    <script src="js/portfolio/investment-products.js"></script>
<script src="js/core/products-loader.js"></script>
    <script src="js/utils/market-indexes.js"></script>
    <script src="js/portfolio/investments-ui.js"></script>
    <script src="js/portfolio/investment-tracker.js"></script>
    <script src="js/portfolio/leaderboard.js"></script>
    <script src="js/products/fiat-onramp.js"></script>
    <script src="js/products/product-filter.js"></script>
    <script src="js/products/invest-helper.js"></script>
    <script src="js/products/dual-investment.js"></script>
    <script src="js/core/i18n-v2.js?v=20260117-v7"></script>
    <script src="js/core/i18n-asian.js"></script>
    <script src="js/core/zoom-hint.js"></script>
    <script src="js/core/app.js"></script>
    <script src="js/utils/simulator.js"></script>
    <script src="js/utils/click-tester.js"></script>
    <script src="js/core/ui-banking.js"></script>
    <script src="js/core/wallet-actions.js"></script>
    <script src="js/core/feedback-system.js"></script>
    <!-- Unique Tools -->
    <script src="js/utils/smart-intent.js"></script>
    <script src="js/trading/arbitrage-scanner.js"></script>
    <script src="js/wallet/social-recovery.js"></script>
    <script src="js/utils/ai-advisor.js"></script>
    <script src="js/core/ui-tools.js"></script>

    <!-- Realtime Multi-DEX Prices with PPS Counter -->
    <script src="js/trading/realtime-prices.js"></script>
    <script src="js/trading/price-interval-control.js"></script>
    <script src="js/utils/init-realtime.js"></script>

    <!-- Demo Trading Mode (Paper Trading) -->
    <script src="js/trading/demo-trading.js"></script>

    <!-- Collapsible Panels System -->
    <script src="js/core/collapsible.js"></script>

    <!-- Auth Script -->

    <!-- Real Stats Widget -->
    <script src="js/utils/min-profitable-calc.js"></script>
    <script src="js/utils/real-stats-widget.js"></script>

    <!-- Learn / Tutorial System -->
    <script src="js/core/tutorial-system.js"></script>
    <script src="js/utils/learn.js"></script>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <script src="js/wallet/firebase-auth.js"></script>
    <script src="js/wallet/auth.js"></script>

    <!-- Ethers.js for DeFi Integrations -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ethers/6.9.0/ethers.umd.min.js"></script>

    <!-- Real DeFi Protocol Integrations -->
    <script src="js/defi/aave-integration.js"></script>
    <script src="js/defi/gmx-integration.js"></script>
    <script src="js/defi/gains-integration.js"></script>
    <script src="js/defi/aerodrome-integration.js"></script>
    <script src="js/defi/protocol-registry.js"></script>
    <script src="js/defi/defi-manager.js"></script>
    <script src="js/defi/defi-health-check.js"></script>
    <script src="js/defi/defi-ui.js"></script>

    <!-- Investment Simulator -->
    <script src="js/portfolio/investment-simulator.js"></script>
    <script src="js/portfolio/simulated-portfolio.js?v=2"></script>
    <script src="js/utils/firebase-persistence.js?v=2"></script>
    <script src="js/portfolio/portfolio-positions-list.js"></script>
    <script src="js/trading/swap-enhancements.js"></script>
    <script src="js/portfolio/projected-returns-chart.js"></script>
    <script src="js/portfolio/portfolio-performance-chart.js"></script>
    <script src="js/portfolio/pnl-stats.js"></script>
    <script src="js/wallet/wallet-persistence.js"></script>
    <script src="js/portfolio/portfolio-fix.js?v=3"></script>
    <script src="js/admin/fee-system.js"></script>
    <script src="js/admin/premium-system.js"></script>
    <script src="js/education/learning-center.js"></script>
    <script src="js/security/emergency-system.js"></script>

    <!-- Login Modal -->
    <div class="auth-modal" id="login-modal">
        <div class="auth-modal-backdrop" onclick="Auth.hideAuthModals()" role="button" tabindex="-1" aria-label="Close modal"></div>
        <div class="auth-modal-content">
            <button type="button" class="auth-modal-close" aria-label="Close">&amp;times;</button>
            <div class="auth-header">
                <h2 data-i18n="login">Login</h2>
                <p data-i18n="login_subtitle">Welcome back to Obelisk DEX</p>
            </div>
            <!-- Social Login Buttons -->
            <div class="social-login-buttons" style="display:flex;flex-direction:column;gap:10px;margin-bottom:20px;">
                <button type="button" onclick="Auth.signInWithGoogle()" class="btn-social btn-google" style="display:flex;align-items:center;justify-content:center;gap:10px;padding:12px;border:1px solid #333;border-radius:8px;background:#1a1a2e;color:#fff;cursor:pointer;transition:all 0.3s;">
                    <svg width="18" height="18" viewBox="0 0 24 24"><path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/><path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/><path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/><path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/></svg>
                    <span data-i18n="continue_with_google">Continue with Google</span>
                </button>
            </div>

            <div class="auth-divider" style="display:flex;align-items:center;margin:20px 0;color:#666;">
                <div style="flex:1;height:1px;background:#333;"></div>
                <span style="padding:0 15px;font-size:12px;" data-i18n="or">or</span>
                <div style="flex:1;height:1px;background:#333;"></div>
            </div>

            <form id="login-form">
                <div class="auth-error" id="login-error"></div>
                <div class="form-group">
                    <label for="login-email" data-i18n="email_or_username">Email or Username</label>
                    <input type="text" id="login-email" placeholder="hugo@example.com" required data-i18n-placeholder="email_placeholder">
                </div>
                <div class="form-group">
                    <label for="login-password" data-i18n="password">Password</label>
                    <input type="password" id="login-password" placeholder="********" required data-i18n-placeholder="password_placeholder">
                </div>
                <button type="submit" class="btn-primary" data-i18n="login">Login</button>
            </form>
            <div class="auth-footer">
                <span data-i18n="no_account">Don't have an account?</span>
                <button type="button" class="btn-link" data-auth-switch="signup" data-i18n="signup">Sign Up</button>
            </div>
        </div>
    </div>

    <!-- Signup Modal -->
    <div class="auth-modal" id="signup-modal">
        <div class="auth-modal-backdrop" onclick="Auth.hideAuthModals()" role="button" tabindex="-1" aria-label="Close modal"></div>
        <div class="auth-modal-content">
            <button type="button" class="auth-modal-close" aria-label="Close">&amp;times;</button>
            <div class="auth-header">
                <h2 data-i18n="signup">Sign Up</h2>
                <p data-i18n="signup_subtitle">Create your Obelisk account</p>
            </div>
            <form id="signup-form">
                <div class="auth-error" id="signup-error"></div>
                <div class="form-group">
                    <label for="signup-username" data-i18n="username">Username</label>
                    <input type="text" id="signup-username" placeholder="satoshi" required data-i18n-placeholder="username_placeholder">
                </div>
                <div class="form-group">
                    <label for="signup-email" data-i18n="email">Email</label>
                    <input type="email" id="signup-email" placeholder="hugo@example.com" required data-i18n-placeholder="email_placeholder">
                </div>
                <div class="form-group">
                    <label for="signup-password" data-i18n="password">Password</label>
                    <input type="password" id="signup-password" placeholder="Min. 6 characters" required data-i18n-placeholder="min_6_chars">
                </div>
                <div class="form-group">
                    <label for="signup-confirm" data-i18n="confirm_password">Confirm Password</label>
                    <input type="password" id="signup-confirm" placeholder="********" required data-i18n-placeholder="password_placeholder">
                </div>
                <button type="submit" class="btn-primary" data-i18n="signup">Sign Up</button>
            </form>
            <div class="auth-footer">
                <span data-i18n="have_account">Already have an account?</span>
                <button type="button" class="btn-link" data-auth-switch="login" data-i18n="login">Login</button>
            </div>
        </div>
    </div>

    <!-- Notifications Container -->
    <div id="notifications" role="status" aria-live="polite" aria-atomic="true"></div>

    <!-- Forerunner Particle Generator -->
    <script>
    (function() {
        const container = document.getElementById('forerunner-particles');
        if (!container) return;

        // Generate 30 floating particles
        for (let i = 0; i < 30; i++) {
            const particle = document.createElement('div');
            particle.className = 'forerunner-particle';
            particle.style.left = Math.random() * 100 + '%';
            particle.style.animationDelay = -(Math.random() * 15) + 's';
            particle.style.animationDuration = (10 + Math.random() * 10) + 's';

            // Alternate between gold and cyan particles
            if (i % 3 === 0) {
                particle.style.background = '#00d4ff';
                particle.style.boxShadow = '0 0 10px rgba(0, 212, 255, 0.8), 0 0 20px rgba(0, 212, 255, 0.4)';
            }

            container.appendChild(particle);
        }
    })();

    // Generate twinkling stars
    (function() {
        const starsContainer = document.getElementById('stars-container');
        if (!starsContainer) return;

        // Generate 80 stars with varied properties
        for (let i = 0; i < 80; i++) {
            const star = document.createElement('div');
            star.className = 'star';

            // Random position
            star.style.left = Math.random() * 100 + '%';
            star.style.top = Math.random() * 100 + '%';

            // Random delay and duration for natural effect
            star.style.animationDelay = -(Math.random() * 3) + 's';
            star.style.animationDuration = (2 + Math.random() * 2) + 's';

            // Vary star types
            if (i % 10 === 0) {
                star.classList.add('large');
            }
            if (i % 7 === 0) {
                star.classList.add('gold');
            } else if (i % 5 === 0) {
                star.classList.add('cyan');
            }

            starsContainer.appendChild(star);
        }
    })();
    </script>
<script src="js/utils/error-handler.js"></script>
<script src="js/utils/safe-ops.js"></script>
<script src="js/products/staking.js"></script>
<script src="js/products/liquidity-pools.js"></script>
<script src="js/products/vaults.js"></script>
<script src="js/products/leveraged-tokens.js"></script>
<script src="js/products/insurance.js"></script>
<script src="js/products/nft-staking.js"></script>
<script src="js/products/yield-farming.js"></script>
<script src="js/products/options.js"></script>
<script src="js/products/lending.js"></script>
<script src="js/products/predictions.js"></script>
<script src="js/products/launchpad.js"></script>
<script src="js/products/savings.js"></script>
<script src="js/products/structured.js"></script>
<script src="js/products/perpetuals.js"></script>
<script src="js/products/copy-trading.js"></script>
<script src="js/products/index-funds.js?v=2"></script>
<script src="js/products/derivatives.js"></script>
<script src="js/products/rwa.js"></script>
<script src="js/products/lottery.js"></script>
<script src="js/products/margin-trading.js"></script>
<script src="js/products/fixed-income.js"></script>
<script src="js/products/crypto-bonds.js"></script>
<script src="js/products/etf-tokens.js"></script>
<script src="js/products/social-trading.js"></script>
<script src="js/products/algo-strategies.js"></script>
<script src="js/products/flash-loans.js"></script>
<script src="js/products/yield-aggregator.js"></script>
<script src="js/products/governance-staking.js"></script>
<script src="js/products/liquidation-pools.js"></script>
<script src="js/products/bot-simulator.js"></script>
<script src="js/products/hft-simulator.js"></script>
<script src="js/products/fast-trading.js"></script>
<script src="js/products/perps-trading.js"></script>
<script src="js/products/product-forecast-chart.js"></script>
<!-- Force initialization of all modules -->
<script src="js/core/force-init.js"></script>
<script src="js/core/ui-verifier.js"></script>
<script src="js/core/versioning.js"></script>
<script src="js/core/backup-system.js"></script>
<!-- Security Monitor -->
<script src="js/security/security-monitor-ui.js"></script>
<script src="js/security/attack-simulator.js"></script>

<!-- V2.1: Chain Manager (Multi-Chain Support) -->
<script src="js/core/chain-manager.js"></script>
<!-- V2.1: Portfolio Analytics Dashboard -->
<script src="js/portfolio/portfolio-analytics.js"></script>
<!-- V2.1: Product Tester -->
<script src="js/utils/product-tester.js"></script>
<!-- V2.1: Cross-Chain Swaps -->
<script src="js/trading/cross-chain-swap.js"></script>
<!-- V2.1: OBL Native Token -->
<script src="js/products/obl-token.js"></script>
<!-- V2.1: Governance -->
<script src="js/governance/governance.js"></script>
<script src="js/governance/governance-ui.js"></script>

<!-- V2.1: Portfolio Analytics Dashboard Section -->
<div id="portfolio-analytics-section" style="display:none;"></div>
<!-- V2.1: Cross-Chain Swap Section -->
<div id="cross-chain-section" style="display:none;"></div>
<!-- V2.1: OBL Token Section -->
<div id="obl-token-section" style="display:none;"></div>
<!-- FLOATING CAPITAL PANEL -->
<div id="floating-capital-panel" style="position:fixed;bottom:20px;right:20px;z-index:9999;background:linear-gradient(135deg,#1a1a2e,#0d0d1a);border:2px solid #00ff88;border-radius:16px;padding:16px;min-width:280px;box-shadow:0 8px 32px rgba(0,255,136,0.3);">
    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;">
        <h4 style="margin:0;color:#00ff88;font-size:14px;" data-i18n="simulated_capital">Simulated Capital</h4>
        <span id="floating-balance" style="font-size:16px;color:#fff;font-weight:bold;">$0.00</span>
    </div>
    <div style="display:flex;gap:8px;flex-wrap:wrap;">
        <button onclick="if(typeof PortfolioFix!=='undefined')PortfolioFix.addSimulated(100);else{let d=JSON.parse(localStorage.getItem('simulated_portfolio')||'{}');d.balance=(d.balance||0)+100;localStorage.setItem('simulated_portfolio',JSON.stringify(d));document.getElementById('floating-balance').textContent='$'+d.balance.toLocaleString();}" style="flex:1;min-width:60px;padding:8px;background:rgba(0,255,136,0.2);border:1px solid #00ff88;border-radius:8px;color:#00ff88;font-weight:bold;cursor:pointer;">+$100</button>
        <button onclick="if(typeof PortfolioFix!=='undefined')PortfolioFix.addSimulated(1000);else{let d=JSON.parse(localStorage.getItem('simulated_portfolio')||'{}');d.balance=(d.balance||0)+1000;localStorage.setItem('simulated_portfolio',JSON.stringify(d));document.getElementById('floating-balance').textContent='$'+d.balance.toLocaleString();}" style="flex:1;min-width:60px;padding:8px;background:rgba(0,255,136,0.2);border:1px solid #00ff88;border-radius:8px;color:#00ff88;font-weight:bold;cursor:pointer;">+$1K</button>
        <button onclick="if(typeof PortfolioFix!=='undefined')PortfolioFix.addSimulated(10000);else{let d=JSON.parse(localStorage.getItem('simulated_portfolio')||'{}');d.balance=(d.balance||0)+10000;localStorage.setItem('simulated_portfolio',JSON.stringify(d));document.getElementById('floating-balance').textContent='$'+d.balance.toLocaleString();}" style="flex:1;min-width:60px;padding:8px;background:rgba(0,255,136,0.2);border:1px solid #00ff88;border-radius:8px;color:#00ff88;font-weight:bold;cursor:pointer;">+$10K</button>
        <button onclick="if(typeof PortfolioFix!=='undefined')PortfolioFix.addSimulated(100000);else{let d=JSON.parse(localStorage.getItem('simulated_portfolio')||'{}');d.balance=(d.balance||0)+100000;localStorage.setItem('simulated_portfolio',JSON.stringify(d));document.getElementById('floating-balance').textContent='$'+d.balance.toLocaleString();}" style="flex:1;min-width:60px;padding:8px;background:rgba(139,92,246,0.3);border:1px solid #a855f7;border-radius:8px;color:#a855f7;font-weight:bold;cursor:pointer;">+$100K</button>
    </div>
    <button onclick="this.parentElement.style.display='none'" style="position:absolute;top:8px;right:8px;background:none;border:none;color:#666;cursor:pointer;font-size:16px;">‚úï</button>
</div>

<script>
// FORCE COMBOS AND CAPITAL INIT
window.addEventListener('load', function() {
    setTimeout(function() {
        console.log('[FORCE] Initializing...');
        // Force Combos
        if (typeof CombosModule !== 'undefined' && CombosModule.comboData) {
            CombosModule.combos = CombosModule.comboData.slice();
            if (CombosModule.generateUltraCombos) {
                var ultras = CombosModule.generateUltraCombos();
                CombosModule.combos = CombosModule.combos.concat(ultras);
            }
            console.log('[FORCE] Total combos:', CombosModule.combos.length);
            if (CombosModule.render) CombosModule.render();
        }
        // Update balance display
        try {
            var d = JSON.parse(localStorage.getItem('simulated_portfolio') || '{}');
            var bal = document.getElementById('floating-balance');
            if (bal && d.balance) bal.textContent = '$' + d.balance.toLocaleString();
        } catch(e) {}

        // FORCE FIX: Ensure Settings and Learn tabs display content
        forceTabsVisibility();
    }, 1000);
});

// Force all tab content to be properly styled
function forceTabsVisibility() {
    console.log('[FORCE-TABS] Checking all tabs...');

    // Get all tab contents
    var tabs = document.querySelectorAll('.tab-content');
    tabs.forEach(function(tab) {
        // Ensure CSS is correct
        if (!tab.classList.contains('active')) {
            tab.style.display = 'none';
        }
        console.log('[FORCE-TABS]', tab.id, '- active:', tab.classList.contains('active'), '- children:', tab.children.length);
    });

    // Specifically check settings
    var settings = document.getElementById('tab-settings');
    if (settings) {
        var settingsContainer = settings.querySelector('.settings-container');
        if (settingsContainer) {
            settingsContainer.style.display = 'block';
            settingsContainer.style.visibility = 'visible';
            settingsContainer.style.opacity = '1';
            console.log('[FORCE-TABS] Settings container found with', settingsContainer.children.length, 'children');
        } else {
            console.warn('[FORCE-TABS] Settings container NOT FOUND');
        }
    }

    // Specifically check learn
    var learn = document.getElementById('tab-learn');
    if (learn) {
        var learnContainer = learn.querySelector('.learn-container');
        if (learnContainer) {
            learnContainer.style.display = 'block';
            learnContainer.style.visibility = 'visible';
            learnContainer.style.opacity = '1';
            console.log('[FORCE-TABS] Learn container found with', learnContainer.children.length, 'children');
        } else {
            console.warn('[FORCE-TABS] Learn container NOT FOUND');
        }
    }
}

// Override switchTab to force visibility
var originalSwitchTab = null;
if (typeof ObeliskApp !== 'undefined' && ObeliskApp.switchTab) {
    originalSwitchTab = ObeliskApp.switchTab.bind(ObeliskApp);
    ObeliskApp.switchTab = function(tabName) {
        console.log('[FORCE-TABS] Switching to tab:', tabName);
        if (originalSwitchTab) originalSwitchTab(tabName);

        // Force display after switch
        setTimeout(function() {
            var tab = document.getElementById('tab-' + tabName);
            if (tab) {
                tab.style.display = 'block';
                var container = tab.querySelector('.settings-container, .learn-container');
                if (container) {
                    container.style.display = 'block';
                    container.style.visibility = 'visible';
                }
            }
        }, 50);
    };
}

// Attack simulator disabled by default - can be started manually via console:
// AttackSimulator.start('demo') or AttackSimulator.start('normal')
console.log('[Security] Attack simulator ready - start with: AttackSimulator.start("demo")');

// FORCE FIX: Override switchTab to ensure Learn and Settings work
(function() {
    function forceShowTab(tabName) {
        console.log('[FORCE] Switching to:', tabName);

        // Hide all tabs
        document.querySelectorAll('.tab-content').forEach(function(tab) {
            tab.classList.remove('active');
            tab.style.display = 'none';
        });

        // Show target tab
        var targetTab = document.getElementById('tab-' + tabName);
        if (targetTab) {
            targetTab.classList.add('active');
            targetTab.style.display = 'block';
            targetTab.style.visibility = 'visible';
            targetTab.style.opacity = '1';
            targetTab.style.minHeight = '500px';

            // Force show inner containers
            var containers = targetTab.querySelectorAll('.learn-container, .settings-container, .learn-hero, .learn-card, .settings-section, .dashboard-container');
            containers.forEach(function(c) {
                c.style.display = 'block';
                c.style.visibility = 'visible';
                c.style.opacity = '1';
            });

            // Fix learn-grid specifically (needs grid display)
            var learnGrid = targetTab.querySelector('.learn-grid');
            if (learnGrid) {
                learnGrid.style.display = 'grid';
                learnGrid.style.gridTemplateColumns = 'repeat(auto-fill, minmax(280px, 1fr))';
                learnGrid.style.gap = '20px';
                learnGrid.style.visibility = 'visible';
            }

            // Re-render dashboard when switching to it
            if (tabName === 'dashboard' && typeof ObeliskDashboard !== 'undefined') {
                ObeliskDashboard.render();
            }

            console.log('[FORCE] Tab shown:', tabName, 'children:', targetTab.children.length);
        } else {
            console.error('[FORCE] Tab not found:', tabName);
        }

        // Update nav buttons
        document.querySelectorAll('.nav-tab').forEach(function(btn) {
            btn.classList.toggle('active', btn.dataset.tab === tabName);
        });

        // Update settings button
        var settingsBtn = document.getElementById('btn-settings-nav');
        if (settingsBtn) {
            settingsBtn.classList.toggle('active', tabName === 'settings');
        }
    }

    // Mobile: toggle nav-group dropdowns on click
    document.querySelectorAll('.nav-group-btn').forEach(function(btn) {
        btn.addEventListener('click', function(e) {
            if (window.innerWidth <= 768) {
                e.stopPropagation();
                btn.parentElement.classList.toggle('open');
            }
        });
    });

    // Expose globally
    window.forceShowTab = forceShowTab;

    // Override ObeliskApp.switchTab if exists
    if (typeof ObeliskApp !== 'undefined') {
        var originalSwitch = ObeliskApp.switchTab ? ObeliskApp.switchTab.bind(ObeliskApp) : null;
        ObeliskApp.switchTab = function(tabName) {
            forceShowTab(tabName);
            if (originalSwitch) {
                try { originalSwitch(tabName); } catch(e) {}
            }

            // Render Perps Trading module
            if (tabName === 'perps' && typeof PerpsModule !== 'undefined') {
                PerpsModule.render('perps-container');
            }

            // Render Fast Trading module
            if (tabName === 'fast-trading' && typeof FastTradingModule !== 'undefined') {
                FastTradingModule.render('fast-trading-container');
            }

            // Render HFT Simulator module
            if (tabName === 'hft' && typeof HFTSimulatorModule !== 'undefined') {
                HFTSimulatorModule.render('hft-container');
            }

            // Render Bot Simulator module
            if (tabName === 'bots' && typeof BotSimulatorModule !== 'undefined') {
                BotSimulatorModule.render('bots-container');
            }
        };
        console.log('[FORCE] ObeliskApp.switchTab overridden');
    }
})();
</script>

<!-- Professional Footer -->
<footer class="pro-footer" id="pro-footer">
    <div class="pro-footer-content">
        <div class="footer-section">
            <h4 data-i18n="footer_products">Products</h4>
            <a href="#" onclick="ObeliskApp.switchTab('trade')" data-i18n="perpetuals">Perpetuals</a>
            <a href="#" onclick="ObeliskApp.switchTab('swap')" data-i18n="swap">Swap</a>
            <a href="#" onclick="ObeliskApp.switchTab('investments')" data-i18n="investments">Investments</a>
            <a href="#" onclick="ObeliskApp.switchTab('bonds')" data-i18n="bonds">Bonds</a>
        </div>
        <div class="footer-section">
            <h4 data-i18n="footer_institutional">Institutional</h4>
            <a href="#" data-i18n="api_access">API Access</a>
            <a href="#" data-i18n="otc_trading">OTC Trading</a>
            <a href="#" data-i18n="custody_solutions">Custody Solutions</a>
            <a href="#" data-i18n="prime_services">Prime Services</a>
        </div>
        <div class="footer-section">
            <h4 data-i18n="footer_resources">Resources</h4>
            <a href="#" onclick="ObeliskApp.switchTab('learn')" data-i18n="academy">Academy</a>
            <a href="#" data-i18n="documentation">Documentation</a>
            <a href="#" data-i18n="blog">Blog</a>
            <a href="#" data-i18n="support">Support</a>
        </div>
        <div class="footer-section">
            <h4 data-i18n="footer_company">Company</h4>
            <a href="#" data-i18n="about_us">About Us</a>
            <a href="#" data-i18n="careers">Careers</a>
            <a href="#" data-i18n="security">Security</a>
            <a href="#" data-i18n="press_kit">Press Kit</a>
        </div>
    </div>
    <div class="footer-bottom">
        <div class="footer-legal">
            <a href="legal/privacy.html" data-i18n="privacy_policy">Privacy Policy</a>
            <a href="legal/terms.html" data-i18n="terms_of_service">Terms of Service</a>
            <a href="#" data-i18n="risk_disclosure">Risk Disclosure</a>
            <span data-i18n="footer_copyright">2026 Obelisk DEX. All rights reserved.</span>
        </div>
        <div class="footer-certifications">
            <span class="cert-badge" data-i18n="soc2_compliant">SOC2 Compliant</span>
            <span class="cert-badge" data-i18n="iso_27001">ISO 27001</span>
            <span class="cert-badge" data-i18n="post_quantum_ready">Post-Quantum Ready</span>
        </div>
    </div>
</footer>

<!-- FEEDBACK SYSTEM -->
<button id="feedback-btn" onclick="FeedbackSystem.open()" style="position:fixed;bottom:20px;left:20px;width:50px;height:50px;border-radius:50%;background:linear-gradient(135deg,#00ff88,#00d4aa);border:none;color:#0d0d1a;font-size:20px;cursor:pointer;box-shadow:0 4px 15px rgba(0,255,136,0.4);z-index:9999;transition:all 0.3s;" title="Report Bug / Feedback">
    üí¨
</button>

<div id="feedback-modal" style="display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.8);z-index:10000;justify-content:center;align-items:center;">
    <div style="background:#1a1a2e;border-radius:16px;padding:24px;max-width:400px;width:90%;max-height:80vh;overflow-y:auto;border:1px solid rgba(0,255,136,0.3);box-shadow:0 8px 32px rgba(0,255,136,0.2);">
        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;">
            <h2 style="color:#00ff88;margin:0;">üí¨ Feedback & Support</h2>
            <button onclick="FeedbackSystem.close()" style="background:none;border:none;color:#888;font-size:24px;cursor:pointer;">&times;</button>
        </div>

        <form id="feedback-form" onsubmit="FeedbackSystem.submit(event)">
            <div style="margin-bottom:16px;">
                <label style="color:#888;font-size:12px;display:block;margin-bottom:6px;">Type</label>
                <select id="feedback-type" required style="width:100%;padding:12px;background:#0d0d1a;border:1px solid rgba(0,255,136,0.3);border-radius:8px;color:#fff;font-size:14px;">
                    <option value="bug">üêõ Bug Report</option>
                    <option value="suggestion">üí° Suggestion</option>
                    <option value="question">‚ùì Question</option>
                </select>
            </div>

            <div style="margin-bottom:16px;">
                <label style="color:#888;font-size:12px;display:block;margin-bottom:6px;">Your Message *</label>
                <textarea id="feedback-desc" required rows="5" placeholder="Describe your bug, suggestion, or question..." style="width:100%;padding:12px;background:#0d0d1a;border:1px solid rgba(0,255,136,0.3);border-radius:8px;color:#fff;font-size:14px;resize:vertical;box-sizing:border-box;"></textarea>
            </div>

            <div style="background:rgba(0,255,136,0.1);border:1px solid rgba(0,255,136,0.3);border-radius:8px;padding:12px;margin-bottom:16px;">
                <p style="color:#00ff88;font-size:12px;margin:0;">Your feedback will be saved locally and reviewed by our team. Thank you for helping us improve!</p>
            </div>

            <div style="display:flex;gap:12px;">
                <button type="button" onclick="FeedbackSystem.close()" style="flex:1;padding:14px;background:rgba(255,255,255,0.1);border:none;border-radius:8px;color:#888;font-size:14px;cursor:pointer;">Cancel</button>
                <button type="submit" style="flex:2;padding:14px;background:linear-gradient(135deg,#00ff88,#00d4aa);border:none;border-radius:8px;color:#000;font-weight:700;font-size:14px;cursor:pointer;">Submit</button>
            </div>
        </form>

        <!-- Previous feedback history -->
        <div id="feedback-history" style="margin-top:20px;border-top:1px solid rgba(0,255,136,0.2);padding-top:16px;">
            <h3 style="color:#888;font-size:12px;margin-bottom:10px;">Your Previous Feedback</h3>
            <div id="feedback-list" style="max-height:150px;overflow-y:auto;"></div>
        </div>
    </div>
</div>

<script>
const FeedbackSystem = {
    feedbacks: [],

    init() {
        try {
            const saved = localStorage.getItem('obelisk_feedbacks');
            if (saved) this.feedbacks = JSON.parse(saved);
        } catch (e) {}
        this.renderHistory();
    },

    open() {
        document.getElementById('feedback-modal').style.display = 'flex';
        this.renderHistory();
    },

    close() {
        document.getElementById('feedback-modal').style.display = 'none';
    },

    submit(e) {
        e.preventDefault();

        const feedback = {
            id: 'FB_' + Date.now(),
            type: document.getElementById('feedback-type').value,
            message: document.getElementById('feedback-desc').value,
            timestamp: Date.now(),
            status: 'pending',
            page: window.location.hash || 'home',
            userAgent: navigator.userAgent
        };

        this.feedbacks.unshift(feedback);
        localStorage.setItem('obelisk_feedbacks', JSON.stringify(this.feedbacks));

        // Reset form
        document.getElementById('feedback-form').reset();

        // Show success
        if (typeof showNotification === 'function') {
            showNotification('Thank you! Your feedback has been saved and will be reviewed.', 'success');
        } else {
            alert('Thank you! Your feedback has been saved.');
        }

        this.renderHistory();
        this.close();

        console.log('[Feedback] New feedback submitted:', feedback);
    },

    renderHistory() {
        const list = document.getElementById('feedback-list');
        if (!list) return;

        if (this.feedbacks.length === 0) {
            list.innerHTML = '<p style="color:#666;font-size:12px;">No feedback submitted yet</p>';
            return;
        }

        list.innerHTML = this.feedbacks.slice(0, 5).map(fb => {
            const typeIcons = { bug: 'üêõ', suggestion: 'üí°', question: '‚ùì' };
            const statusColors = { pending: '#f59e0b', resolved: '#00ff88', rejected: '#ff4444' };
            const date = new Date(fb.timestamp).toLocaleDateString();
            const msg = fb.message || fb.description || '';

            return `
                <div style="background:rgba(0,255,136,0.05);border:1px solid rgba(0,255,136,0.1);border-radius:8px;padding:10px;margin-bottom:8px;">
                    <div style="display:flex;justify-content:space-between;align-items:center;">
                        <span style="color:#00ff88;font-size:12px;">${typeIcons[fb.type] || 'üí¨'} ${fb.type}</span>
                        <span style="color:${statusColors[fb.status] || '#888'};font-size:10px;text-transform:uppercase;">${fb.status}</span>
                    </div>
                    <p style="color:#ccc;font-size:11px;margin:6px 0 0 0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;">${msg}</p>
                    <span style="color:#555;font-size:10px;">${date}</span>
                </div>
            `;
        }).join('');
    },

    // Export all feedbacks (for admin)
    exportAll() {
        return JSON.stringify(this.feedbacks, null, 2);
    }
};

// Initialize on load
document.addEventListener('DOMContentLoaded', () => FeedbackSystem.init());
</script>

<!-- DEMO MODE SCRIPT -->
<script>
(function() {
    'use strict';

    // DEMO MODE Configuration
    const DEMO_MODE = true;

    // Add body padding for banner
    document.body.classList.add('has-demo-banner');

    // Show demo info modal
    window.showDemoInfo = function() {
        const modal = document.createElement('div');
        modal.className = 'demo-info-modal';
        modal.innerHTML = `
            <div class="demo-info-content">
                <h2>Mode Demonstration</h2>
                <p><strong>Obelisk est actuellement en mode DEMO.</strong></p>
                <ul>
                    <li>Tous les fonds affiches sont <strong>simules</strong></li>
                    <li>Les prix sont <strong>reels</strong> (Binance, Coinbase, Kraken)</li>
                    <li>Le trading est <strong>simule</strong> - aucune transaction reelle</li>
                    <li>Les investissements DeFi sont en <strong>lecture seule</strong></li>
                    <li>Vous pouvez explorer toutes les fonctionnalites sans risque</li>
                </ul>
                <p style="margin-top:16px;color:#00ff88;">
                    Les depots et retraits reels seront actives apres la phase beta.
                </p>
                <button onclick="this.parentElement.parentElement.remove()" style="margin-top:20px;padding:12px 32px;background:linear-gradient(135deg,#00ff88,#00aaff);border:none;border-radius:8px;color:#0a0a0f;font-weight:700;cursor:pointer;">
                    Compris !
                </button>
            </div>
        `;
        modal.style.cssText = 'position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.8);display:flex;align-items:center;justify-content:center;z-index:100000;';
        modal.querySelector('.demo-info-content').style.cssText = 'background:#0a0a0f;border:1px solid #00ff88;border-radius:16px;padding:32px;max-width:500px;color:#fff;text-align:center;';
        modal.querySelector('ul').style.cssText = 'text-align:left;margin:16px 0;padding-left:20px;';
        modal.querySelector('li').style.cssText = 'margin:8px 0;color:#888;';
        document.body.appendChild(modal);
        modal.onclick = (e) => { if(e.target === modal) modal.remove(); };
    };

    // Disable real deposit/invest buttons in DEMO mode
    if (DEMO_MODE) {
        document.addEventListener('DOMContentLoaded', function() {
            // Override deposit button
            const btnDeposit = document.getElementById('btn-deposit');
            if (btnDeposit) {
                btnDeposit.onclick = function(e) {
                    e.preventDefault();
                    if (typeof ObeliskToast !== 'undefined') {
                        ObeliskToast.warning('MODE DEMO: Les depots reels ne sont pas encore actives. Vos fonds de demonstration sont automatiquement credites.');
                    } else {
                        alert('MODE DEMO: Les depots reels ne sont pas encore actives.');
                    }
                    return false;
                };
            }

            // Override real invest buttons (keep simulated ones working)
            document.querySelectorAll('button').forEach(btn => {
                const text = btn.textContent || '';
                if (text.includes('Investir Reel') || text.includes('Invest Real') || text.includes('Investir R√©el')) {
                    btn.style.opacity = '0.5';
                    btn.onclick = function(e) {
                        e.preventDefault();
                        e.stopPropagation();
                        if (typeof ObeliskToast !== 'undefined') {
                            ObeliskToast.warning('MODE DEMO: Les investissements reels seront actives apres la phase beta. Utilisez le mode simule pour tester.');
                        } else {
                            alert('MODE DEMO: Les investissements reels seront actives apres la phase beta.');
                        }
                        return false;
                    };
                }
            });

            // Add DEMO indicator to trading
            const tradingHeader = document.querySelector('.trading-header');
            if (tradingHeader && !tradingHeader.querySelector('.demo-indicator')) {
                const indicator = document.createElement('span');
                indicator.className = 'demo-indicator';
                indicator.textContent = 'SIMULATION';
                indicator.style.cssText = 'background:#f7931a;color:#fff;padding:4px 8px;border-radius:4px;font-size:10px;font-weight:700;margin-left:8px;';
                tradingHeader.appendChild(indicator);
            }
        });
    }

    console.log('%c OBELISK DEMO MODE ', 'background:#f7931a;color:#fff;font-size:14px;font-weight:bold;padding:8px;border-radius:4px;');
    console.log('Les fonds sont simules. Explorez librement!');
})();
</script>

<!-- Toast Notification System -->
<script src="js/ui/toast.js"></script>

<!-- Dashboard -->
<script src="js/ui/dashboard.js"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Render dashboard on load
    if (typeof ObeliskDashboard !== 'undefined') {
        ObeliskDashboard.render();
    }

    // Service Worker registration
    if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('/sw.js').then(function(reg) {
            console.log('[SW] Registered:', reg.scope);
        }).catch(function(err) {
            console.log('[SW] Registration failed:', err);
        });
    }

    // Favorites/Watchlist: add star icons to trade pairs
    initFavorites();
});

// Favorites system
function initFavorites() {
    const favs = JSON.parse(localStorage.getItem('obelisk_favorites') || '[]');

    // Add star to pair selectors when they appear
    const observer = new MutationObserver(function() {
        document.querySelectorAll('.pair-item, .market-pair-row, [data-pair]').forEach(function(el) {
            if (el.querySelector('.fav-star')) return;
            const pair = el.dataset.pair || el.textContent.trim().split(/\s/)[0];
            if (!pair || pair.length > 20) return;
            const star = document.createElement('span');
            star.className = 'fav-star';
            star.textContent = favs.includes(pair) ? '\u2605' : '\u2606';
            star.style.cssText = 'cursor:pointer;color:' + (favs.includes(pair) ? '#c9a227' : '#6b5d3e') + ';font-size:18px;margin-right:8px;';
            star.onclick = function(e) {
                e.stopPropagation();
                toggleFavorite(pair, star);
            };
            el.prepend(star);
        });
    });
    observer.observe(document.getElementById('main-content'), { childList: true, subtree: true });
}

function toggleFavorite(pair, starEl) {
    let favs = JSON.parse(localStorage.getItem('obelisk_favorites') || '[]');
    const idx = favs.indexOf(pair);
    if (idx >= 0) {
        favs.splice(idx, 1);
        starEl.textContent = '\u2606';
        starEl.style.color = '#6b5d3e';
        if (typeof ObeliskToast !== 'undefined') ObeliskToast.info(((typeof I18n !== 'undefined' && I18n.t) ? I18n.t('fav_removed') : 'Removed from watchlist') + ': ' + pair);
    } else {
        favs.push(pair);
        starEl.textContent = '\u2605';
        starEl.style.color = '#c9a227';
        if (typeof ObeliskToast !== 'undefined') ObeliskToast.success(((typeof I18n !== 'undefined' && I18n.t) ? I18n.t('fav_added') : 'Added to watchlist') + ': ' + pair);
    }
    localStorage.setItem('obelisk_favorites', JSON.stringify(favs));
    // Update all matching stars
    document.querySelectorAll('.fav-star').forEach(function(s) {
        const p = s.parentElement.dataset.pair || s.parentElement.textContent.trim().split(/\s/)[1];
        if (p === pair) {
            s.textContent = favs.includes(pair) ? '\u2605' : '\u2606';
            s.style.color = favs.includes(pair) ? '#c9a227' : '#6b5d3e';
        }
    });
}
</script>

<!-- Live Mode Manager (DEMO/BETA/LIVE) -->
<script src="js/obelisk-live.js"></script>

</body>
</html>




<!-- lun. 29 d√©c. 2025 02:20:24 -->
<!-- deploy: 1766993609 -->
<!-- v1766994069 -->
<!-- forerunner-ultimate-v1767013993 -->
<!-- deploy-2025-12-31 -->
